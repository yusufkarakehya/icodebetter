!function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);this.CodeMirror=e()}}(function(){"use strict";var e=/gecko\/\d/i.test(navigator.userAgent),t=/MSIE \d/.test(navigator.userAgent),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),n=t||r,i=n&&(t?document.documentMode||6:r[1]),o=/WebKit\//.test(navigator.userAgent),l=o&&/Qt\/\d+\.\d+/.test(navigator.userAgent),s=/Chrome\//.test(navigator.userAgent),a=/Opera\//.test(navigator.userAgent),u=/Apple Computer/.test(navigator.vendor),c=/KHTML\//.test(navigator.userAgent),f=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),h=/PhantomJS/.test(navigator.userAgent),d=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),p=d||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),g=d||/Mac/.test(navigator.platform),v=/win/i.test(navigator.platform),m=a&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);m&&(m=Number(m[1])),m&&m>=15&&(a=!1,o=!0);var y=g&&(l||a&&(null==m||m<12.11)),b=e||n&&i>=9,w=!1,x=!1;function C(e,t){if(!(this instanceof C))return new C(e,t);this.options=t=t?ro(t):{},ro(Pr,t,!1),D(t);var r=t.value;"string"==typeof r&&(r=new ti(r,t.mode)),this.doc=r;var l=this.display=new function(e,t){var r=this,l=r.input=fo("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");o?l.style.width="1000px":l.setAttribute("wrap","off");d&&(l.style.border="1px solid black");l.setAttribute("autocorrect","off"),l.setAttribute("autocapitalize","off"),l.setAttribute("spellcheck","false"),r.inputDiv=fo("div",[l],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),r.scrollbarFiller=fo("div",null,"CodeMirror-scrollbar-filler"),r.scrollbarFiller.setAttribute("not-content","true"),r.gutterFiller=fo("div",null,"CodeMirror-gutter-filler"),r.gutterFiller.setAttribute("not-content","true"),r.lineDiv=fo("div",null,"CodeMirror-code"),r.selectionDiv=fo("div",null,null,"position: relative; z-index: 1"),r.cursorDiv=fo("div",null,"CodeMirror-cursors"),r.measure=fo("div",null,"CodeMirror-measure"),r.lineMeasure=fo("div",null,"CodeMirror-measure"),r.lineSpace=fo("div",[r.measure,r.lineMeasure,r.selectionDiv,r.cursorDiv,r.lineDiv],null,"position: relative; outline: none"),r.mover=fo("div",[fo("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=fo("div",[r.mover],"CodeMirror-sizer"),r.sizerWidth=null,r.heightForcer=fo("div",null,null,"position: absolute; height: "+Gi+"px; width: 1px;"),r.gutters=fo("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=fo("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=fo("div",[r.inputDiv,r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),n&&i<8&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0);d&&(l.style.width="0px");o||(r.scroller.draggable=!0);c&&(r.inputDiv.style.height="1px",r.inputDiv.style.position="absolute");e&&(e.appendChild?e.appendChild(r.wrapper):e(r.wrapper));r.viewFrom=r.viewTo=t.first,r.reportedViewFrom=r.reportedViewTo=t.first,r.view=[],r.renderedView=null,r.externalMeasured=null,r.viewOffset=0,r.lastWrapHeight=r.lastWrapWidth=0,r.updateLineNumbers=null,r.nativeBarWidth=r.barHeight=r.barWidth=0,r.scrollbarsClipped=!1,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.prevInput="",r.alignWidgets=!1,r.pollingFast=!1,r.poll=new ji,r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.inaccurateSelection=!1,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r.shift=!1,r.selForContextMenu=null}(e,r);l.wrapper.CodeMirror=this,W(this),T(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),t.autofocus&&!p&&Vt(this),P(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new ji,keySeq:null},n&&i<11&&setTimeout(no(Ut,this,!0),20),function(e){var t=e.display;Hi(t.scroller,"mousedown",kt(e,$t)),Hi(t.scroller,"dblclick",n&&i<11?kt(e,function(t){if(!Pi(e,t)){var r=Yt(e,t);if(r&&!Zt(e,t)&&!_t(e.display,t)){ki(t);var n=e.findWordAt(r);Le(e.doc,n.anchor,n.head)}}}):function(t){Pi(e,t)||ki(t)});Hi(t.lineSpace,"selectstart",function(e){_t(t,e)||ki(e)}),b||Hi(t.scroller,"contextmenu",function(t){vr(e,t)});function r(t){Pi(e,t)||Ni(t)}Hi(t.scroller,"scroll",function(){t.scroller.clientHeight&&(er(e,t.scroller.scrollTop),tr(e,t.scroller.scrollLeft,!0),Di(e,"scroll",e))}),Hi(t.scroller,"mousewheel",function(t){or(e,t)}),Hi(t.scroller,"DOMMouseScroll",function(t){or(e,t)}),Hi(t.wrapper,"scroll",function(){t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),Hi(t.input,"keyup",function(t){hr.call(e,t)}),Hi(t.input,"input",function(){n&&i>=9&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),Gt(e)}),Hi(t.input,"keydown",kt(e,fr)),Hi(t.input,"keypress",kt(e,dr)),Hi(t.input,"focus",no(pr,e)),Hi(t.input,"blur",no(gr,e)),e.options.dragDrop&&(Hi(t.scroller,"dragstart",function(t){!function(e,t){if(n&&(!e.state.draggingText||+new Date-Qt<100))return void Ni(t);if(Pi(e,t)||_t(e.display,t))return;if(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!u){var r=fo("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",a&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),a&&r.parentNode.removeChild(r)}}(e,t)}),Hi(t.scroller,"dragenter",r),Hi(t.scroller,"dragover",r),Hi(t.scroller,"drop",kt(e,Jt)));function l(r){if(e.somethingSelected())Bt=e.getSelections(),t.inaccurateSelection&&(t.prevInput="",t.inaccurateSelection=!1,t.input.value=Bt.join("\n"),Qi(t.input));else{for(var n=[],i=[],o=0;o<e.doc.sel.ranges.length;o++){var l=e.doc.sel.ranges[o].head.line,s={anchor:ce(l,0),head:ce(l+1,0)};i.push(s),n.push(e.getRange(s.anchor,s.head))}"cut"==r.type?e.setSelections(i,null,Vi):(t.prevInput="",t.input.value=n.join("\n"),Qi(t.input)),Bt=n}"cut"==r.type&&(e.state.cutIncoming=!0)}Hi(t.scroller,"paste",function(r){_t(t,r)||(e.state.pasteIncoming=!0,Vt(e),Pt(e))}),Hi(t.input,"paste",function(){if(o&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var r=t.input.selectionStart,n=t.input.selectionEnd;t.input.value+="$",t.input.selectionEnd=n,t.input.selectionStart=r,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,Pt(e)}),Hi(t.input,"cut",l),Hi(t.input,"copy",l),c&&Hi(t.sizer,"mouseup",function(){go()==t.input&&t.input.blur(),Vt(e)})}(this),function(){if(xo)return;Hi(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,wo(jt)},100))}),Hi(window,"blur",function(){wo(gr)}),xo=!0;var e}(),yt(this),this.curOp.forceUpdate=!0,oi(this,r),t.autofocus&&!p||go()==l.input?setTimeout(no(pr,this),20):gr(this);for(var s in Rr)Rr.hasOwnProperty(s)&&Rr[s](this,t[s],Br);U(this);for(var f=0;f<Kr.length;++f)Kr[f](this);bt(this)}function L(e){e.doc.mode=C.getMode(e.options,e.doc.modeOption),S(e)}function S(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Be(e,100),e.state.modeGen++,e.curOp&&At(e)}function k(e){var t=pt(e.display),r=e.options.lineWrapping,n=r&&Math.max(5,e.display.scroller.clientWidth/gt(e.display)-3);return function(i){if(Tn(e.doc,i))return 0;var o=0;if(i.widgets)for(var l=0;l<i.widgets.length;l++)i.widgets[l].height&&(o+=i.widgets[l].height);return r?o+(Math.ceil(i.text.length/n)||1)*t:o+t}}function M(e){var t=e.doc,r=k(e);t.iter(function(e){var t=r(e);t!=e.height&&ui(e,t)})}function T(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),nt(e)}function N(e){W(e),At(e),setTimeout(function(){G(e)},20)}function W(e){var t=e.display.gutters,r=e.options.gutters;ho(t);for(var n=0;n<r.length;++n){var i=r[n],o=t.appendChild(fo("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none",A(e)}function A(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function H(e){if(0==e.height)return 0;for(var t,r=e.text.length,n=e;t=xn(n);){n=(i=t.find(0,!0)).from.line,r+=i.from.ch-i.to.ch}for(n=e;t=Cn(n);){var i=t.find(0,!0);r-=n.text.length-i.from.ch,r+=(n=i.to.line).text.length-i.to.ch}return r}function O(e){var t=e.display,r=e.doc;t.maxLine=li(r,r.first),t.maxLineLength=H(t.maxLine),t.maxLineChanged=!0,r.iter(function(e){var r=H(e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)})}function D(e){var t=Ji(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function z(e){var t=e.display,r=t.gutters.offsetWidth,n=Math.round(e.doc.height+Ke(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:n,scrollHeight:n+je(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}function I(e,t,r){this.cm=r;var o=this.vert=fo("div",[fo("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),l=this.horiz=fo("div",[fo("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(o),e(l),Hi(o,"scroll",function(){o.clientHeight&&t(o.scrollTop,"vertical")}),Hi(l,"scroll",function(){l.clientWidth&&t(l.scrollLeft,"horizontal")}),this.checkedOverlay=!1,n&&i<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function E(){}function P(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&mo(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new C.scrollbarModel[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),Hi(t,"mousedown",function(){e.state.focused&&setTimeout(no(Vt,e),0)}),t.setAttribute("not-content","true")},function(t,r){"horizontal"==r?tr(e,t):er(e,t)},e),e.display.scrollbars.addClass&&yo(e.display.wrapper,e.display.scrollbars.addClass)}function R(e,t){t||(t=z(e));var r=e.display.barWidth,n=e.display.barHeight;F(e,t);for(var i=0;i<4&&r!=e.display.barWidth||n!=e.display.barHeight;i++)r!=e.display.barWidth&&e.options.lineWrapping&&q(e),F(e,z(e)),r=e.display.barWidth,n=e.display.barHeight}function F(e,t){var r=e.display,n=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=n.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=n.bottom)+"px",n.right&&n.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=n.bottom+"px",r.scrollbarFiller.style.width=n.right+"px"):r.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=n.bottom+"px",r.gutterFiller.style.width=t.gutterWidth+"px"):r.gutterFiller.style.display=""}function B(e,t,r){var n=r&&null!=r.top?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-Ve(e));var i=r&&null!=r.bottom?r.bottom:n+e.wrapper.clientHeight,o=fi(t,n),l=fi(t,i);if(r&&r.ensure){var s=r.ensure.from.line,a=r.ensure.to.line;s<o?(o=s,l=fi(t,hi(li(t,s))+e.wrapper.clientHeight)):Math.min(a,t.lastLine())>=l&&(o=fi(t,hi(li(t,a))-e.wrapper.clientHeight),l=a)}return{from:o,to:Math.max(l,o+1)}}function G(e){var t=e.display,r=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=K(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=n+"px",l=0;l<r.length;l++)if(!r[l].hidden){e.options.fixedGutter&&r[l].gutter&&(r[l].gutter.style.left=o);var s=r[l].alignable;if(s)for(var a=0;a<s.length;a++)s[a].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=n+i+"px")}}function U(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=V(e.options,t.first+t.size-1),n=e.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(fo("div",[fo("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,l=i.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-l),n.lineNumWidth=n.lineNumInnerWidth+l,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",A(e),!0}return!1}function V(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function K(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function X(e,t,r){var n=e.display;this.viewport=t,this.visible=B(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=_e(e),this.force=r,this.dims=Q(e)}function j(e,t){var r=e.display,n=e.doc;if(t.editorIsHidden)return Ot(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==It(e))return!1;U(e)&&(Ot(e),t.dims=Q(e));var i=n.first+n.size,l=Math.max(t.visible.from-e.options.viewportMargin,n.first),s=Math.min(i,t.visible.to+e.options.viewportMargin);r.viewFrom<l&&l-r.viewFrom<20&&(l=Math.max(n.first,r.viewFrom)),r.viewTo>s&&r.viewTo-s<20&&(s=Math.min(i,r.viewTo)),x&&(l=kn(e.doc,l),s=Mn(e.doc,s));var a=l!=r.viewFrom||s!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;!function(e,t,r){var n=e.display;0==n.view.length||t>=n.viewTo||r<=n.viewFrom?(n.view=Wt(e,t,r),n.viewFrom=t):(n.viewFrom>t?n.view=Wt(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(Dt(e,t))),n.viewFrom=t,n.viewTo<r?n.view=n.view.concat(Wt(e,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,Dt(e,r))));n.viewTo=r}(e,l,s),r.viewOffset=hi(li(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var u=It(e);if(!a&&0==u&&!t.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var c=go();return u>4&&(r.lineDiv.style.display="none"),function(e,t,r){var n=e.display,i=e.options.lineNumbers,l=n.lineDiv,s=l.firstChild;function a(t){var r=t.nextSibling;return o&&g&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),r}for(var u=n.view,c=n.viewFrom,f=0;f<u.length;f++){var h=u[f];if(h.hidden);else if(h.node){for(;s!=h.node;)s=a(s);var d=i&&null!=t&&t<=c&&h.lineNumber;h.changes&&(Ji(h.changes,"gutter")>-1&&(d=!1),J(e,h,c,r)),d&&(ho(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(V(e.options,c)))),s=h.node.nextSibling}else{var p=le(e,h,c,r);l.insertBefore(p,s)}c+=h.size}for(;s;)s=a(s)}(e,r.updateLineNumbers,t.dims),u>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,c&&go()!=c&&c.offsetHeight&&c.focus(),ho(r.cursorDiv),ho(r.selectionDiv),r.heightForcer.style.top=r.gutters.style.height=0,a&&(r.lastWrapHeight=t.wrapperHeight,r.lastWrapWidth=t.wrapperWidth,Be(e,400)),r.updateLineNumbers=null,!0}function _(e,t){t.force;for(var r=t.viewport,n=!0;;n=!1){if(n&&e.options.lineWrapping&&t.oldDisplayWidth!=_e(e))!0;else if(!1,r&&null!=r.top&&(r={top:Math.min(e.doc.height+Ke(e.display)-Ye(e),r.top)}),t.visible=B(e.display,e.doc,r),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!j(e,t))break;q(e);var i=z(e);Ee(e),$(e,i),R(e,i)}Ii(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(Ii(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Y(e,t){var r=new X(e,t);if(j(e,r)){q(e),_(e,r);var n=z(e);Ee(e),$(e,n),R(e,n)}}function $(e,t){e.display.sizer.style.minHeight=t.docHeight+"px";var r=t.docHeight+je(e);e.display.heightForcer.style.top=r+"px",e.display.gutters.style.height=Math.max(r,t.clientHeight)+"px"}function q(e){for(var t=e.display,r=t.lineDiv.offsetTop,o=0;o<t.view.length;o++){var l,s=t.view[o];if(!s.hidden){if(n&&i<8){var a=s.node.offsetTop+s.node.offsetHeight;l=a-r,r=a}else{var u=s.node.getBoundingClientRect();l=u.bottom-u.top}var c=s.line.height-l;if(l<2&&(l=pt(t)),(c>.001||c<-.001)&&(ui(s.line,l),Z(s.line),s.rest))for(var f=0;f<s.rest.length;f++)Z(s.rest[f])}}}function Z(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function Q(e){for(var t=e.display,r={},n={},i=t.gutters.clientLeft,o=t.gutters.firstChild,l=0;o;o=o.nextSibling,++l)r[e.options.gutters[l]]=o.offsetLeft+o.clientLeft+i,n[e.options.gutters[l]]=o.clientWidth;return{fixedPos:K(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function J(e,t,r,n){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?re(e,t):"gutter"==o?ie(e,t,r,n):"class"==o?ne(t):"widget"==o&&oe(t,n)}t.changes=null}function ee(e){return e.node==e.text&&(e.node=fo("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),n&&i<8&&(e.node.style.zIndex=2)),e.node}function te(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):Kn(e,t)}function re(e,t){var r=t.text.className,n=te(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,ne(t)):r&&(t.text.className=r)}function ne(e){!function(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var r=ee(e);e.background=r.insertBefore(fo("div",null,t),r.firstChild)}}(e),e.line.wrapClass?ee(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function ie(e,t,r,n){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var i=t.line.gutterMarkers;if(e.options.lineNumbers||i){var o=ee(t),l=t.gutter=o.insertBefore(fo("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),t.text);if(t.line.gutterClass&&(l.className+=" "+t.line.gutterClass),!e.options.lineNumbers||i&&i["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(fo("div",V(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),i)for(var s=0;s<e.options.gutters.length;++s){var a=e.options.gutters[s],u=i.hasOwnProperty(a)&&i[a];u&&l.appendChild(fo("div",[u],"CodeMirror-gutter-elt","left: "+n.gutterLeft[a]+"px; width: "+n.gutterWidth[a]+"px"))}}}function oe(e,t){e.alignable&&(e.alignable=null);for(var r=e.node.firstChild;r;r=n){var n=r.nextSibling;"CodeMirror-linewidget"==r.className&&e.node.removeChild(r)}se(e,t)}function le(e,t,r,n){var i=te(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),ne(t),ie(e,t,r,n),se(t,n),t.node}function se(e,t){if(ae(e.line,e,t,!0),e.rest)for(var r=0;r<e.rest.length;r++)ae(e.rest[r],e,t,!1)}function ae(e,t,r,n){if(e.widgets)for(var i=ee(t),o=0,l=e.widgets;o<l.length;++o){var s=l[o],a=fo("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||a.setAttribute("cm-ignore-events","true"),ue(s,a,t,r),n&&s.above?i.insertBefore(a,t.gutter||t.text):i.appendChild(a),Ii(s,"redraw")}}function ue(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var i=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(i-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}I.prototype=ro({update:function(e){var t=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=t?n+"px":"0";var i=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=r?n+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(r?n:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+o+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedOverlay&&e.clientHeight>0&&(0==n&&this.overlayHack(),this.checkedOverlay=!0),{right:r?n:0,bottom:t?n:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e)},overlayHack:function(){var e=g&&!f?"12px":"18px";this.horiz.style.minHeight=this.vert.style.minWidth=e;var t=this,r=function(e){Wi(e)!=t.vert&&Wi(e)!=t.horiz&&kt(t.cm,$t)(e)};Hi(this.vert,"mousedown",r),Hi(this.horiz,"mousedown",r)},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},I.prototype),E.prototype=ro({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},E.prototype),C.scrollbarModel={native:I,null:E};var ce=C.Pos=function(e,t){if(!(this instanceof ce))return new ce(e,t);this.line=e,this.ch=t},fe=C.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};function he(e){return ce(e.line,e.ch)}function de(e,t){return fe(e,t)<0?t:e}function pe(e,t){return fe(e,t)<0?e:t}function ge(e,t){this.ranges=e,this.primIndex=t}function ve(e,t){this.anchor=e,this.head=t}function me(e,t){var r=e[t];e.sort(function(e,t){return fe(e.from(),t.from())}),t=Ji(e,r);for(var n=1;n<e.length;n++){var i=e[n],o=e[n-1];if(fe(o.to(),i.from())>=0){var l=pe(o.from(),i.from()),s=de(o.to(),i.to()),a=o.empty()?i.from()==i.head:o.from()==o.head;n<=t&&--t,e.splice(--n,2,new ve(a?s:l,a?l:s))}}return new ge(e,t)}function ye(e,t){return new ge([new ve(e,t||e)],0)}function be(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function we(e,t){if(t.line<e.first)return ce(e.first,0);var r,n,i,o=e.first+e.size-1;return t.line>o?ce(o,li(e,o).text.length):(r=t,n=li(e,t.line).text.length,null==(i=r.ch)||i>n?ce(r.line,n):i<0?ce(r.line,0):r)}function xe(e,t){return t>=e.first&&t<e.first+e.size}function Ce(e,t,r,n){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(n){var o=fe(r,i)<0;o!=fe(n,i)<0?(i=r,r=n):o!=fe(r,n)<0&&(r=n)}return new ve(i,r)}return new ve(n||r,r)}function Le(e,t,r,n){Ne(e,new ge([Ce(e,e.sel.primary(),t,r)],0),n)}function Se(e,t,r){for(var n=[],i=0;i<e.sel.ranges.length;i++)n[i]=Ce(e,e.sel.ranges[i],t[i],null);Ne(e,me(n,e.sel.primIndex),r)}function ke(e,t,r,n){var i=e.sel.ranges.slice(0);i[t]=r,Ne(e,me(i,e.sel.primIndex),n)}function Me(e,t,r,n){Ne(e,ye(t,r),n)}function Te(e,t,r){var n=e.history.done,i=Zi(n);i&&i.ranges?(n[n.length-1]=t,We(e,t,r)):Ne(e,t,r)}function Ne(e,t,r){We(e,t,r),function(e,t,r,n){var i=e.history,o=n&&n.origin;r==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||(l=e,s=o,a=Zi(i.done),u=t,c=s.charAt(0),"*"==c||"+"==c&&a.ranges.length==u.ranges.length&&a.somethingSelected()==u.somethingSelected()&&new Date-l.history.lastSelTime<=(l.cm?l.cm.options.historyEventDelay:500)))?i.done[i.done.length-1]=t:yi(t,i.done);var l,s,a,u,c;i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=r,n&&!1!==n.clearRedo&&vi(i.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function We(e,t,r){var n,i,o;(Fi(e,"beforeSelectionChange")||e.cm&&Fi(e.cm,"beforeSelectionChange"))&&(n=e,o={ranges:(i=t).ranges,update:function(e){this.ranges=[];for(var t=0;t<e.length;t++)this.ranges[t]=new ve(we(n,e[t].anchor),we(n,e[t].head))}},Di(n,"beforeSelectionChange",n,o),n.cm&&Di(n.cm,"beforeSelectionChange",n.cm,o),t=o.ranges!=i.ranges?me(o.ranges,o.ranges.length-1):i),Ae(e,Oe(e,t,r&&r.bias||(fe(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),r&&!1===r.scroll||!e.cm||Ar(e.cm)}function Ae(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,Ri(e.cm)),Ii(e,"cursorActivity",e))}function He(e){Ae(e,Oe(e,e.sel,null,!1))}function Oe(e,t,r,n){for(var i,o=0;o<t.ranges.length;o++){var l=t.ranges[o],s=De(e,l.anchor,r,n),a=De(e,l.head,r,n);(i||s!=l.anchor||a!=l.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new ve(s,a))}return i?me(i,t.primIndex):t}function De(e,t,r,n){var i=!1,o=t,l=r||1;e.cantEdit=!1;e:for(;;){var s=li(e,o.line);if(s.markedSpans)for(var a=0;a<s.markedSpans.length;++a){var u=s.markedSpans[a],c=u.marker;if((null==u.from||(c.inclusiveLeft?u.from<=o.ch:u.from<o.ch))&&(null==u.to||(c.inclusiveRight?u.to>=o.ch:u.to>o.ch))){if(n&&(Di(c,"beforeCursorEnter"),c.explicitlyCleared)){if(s.markedSpans){--a;continue}break}if(!c.atomic)continue;var f=c.find(l<0?-1:1);if(0==fe(f,o)&&(f.ch+=l,f.ch<0?f=f.line>e.first?we(e,ce(f.line-1)):null:f.ch>s.text.length&&(f=f.line<e.first+e.size-1?ce(f.line+1,0):null),!f)){if(i)return n?(e.cantEdit=!0,ce(e.first,0)):De(e,t,r,!0);i=!0,f=t,l=-l}o=f;continue e}}return o}}function ze(e){for(var t=e.display,r=e.doc,n={},i=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),l=0;l<r.sel.ranges.length;l++){var s=r.sel.ranges[l],a=s.empty();(a||e.options.showCursorWhenSelecting)&&Pe(e,s,i),a||Re(e,s,o)}if(e.options.moveInputWithCursor){var u=ut(e,r.sel.primary().head,"div"),c=t.wrapper.getBoundingClientRect(),f=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,u.top+f.top-c.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,u.left+f.left-c.left))}return n}function Ie(e,t){po(e.display.cursorDiv,t.cursors),po(e.display.selectionDiv,t.selection),null!=t.teTop&&(e.display.inputDiv.style.top=t.teTop+"px",e.display.inputDiv.style.left=t.teLeft+"px")}function Ee(e){Ie(e,ze(e))}function Pe(e,t,r){var n=ut(e,t.head,"div",null,null,!e.options.singleCursorHeightPerLine),i=r.appendChild(fo("div"," ","CodeMirror-cursor"));if(i.style.left=n.left+"px",i.style.top=n.top+"px",i.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other){var o=r.appendChild(fo("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=n.other.left+"px",o.style.top=n.other.top+"px",o.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function Re(e,t,r){var n=e.display,i=e.doc,o=document.createDocumentFragment(),l=Xe(e.display),s=l.left,a=Math.max(n.sizerWidth,_e(e)-n.sizer.offsetLeft)-l.right;function u(e,t,r,n){t<0&&(t=0),t=Math.round(t),n=Math.round(n),o.appendChild(fo("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==r?a-e:r)+"px; height: "+(n-t)+"px"))}function c(t,r,n){var o,l,c=li(i,t),f=c.text.length;function h(r,n){return at(e,ce(t,r),"div",c,n)}return function(e,t,r,n){if(!e)return n(t,r,"ltr");for(var i=!1,o=0;o<e.length;++o){var l=e[o];(l.from<r&&l.to>t||t==r&&l.to==t)&&(n(Math.max(l.from,t),Math.min(l.to,r),1==l.level?"rtl":"ltr"),i=!0)}i||n(t,r,"ltr")}(di(c),r||0,null==n?f:n,function(e,t,i){var c,d,p,g=h(e,"left");if(e==t)c=g,d=p=g.left;else{if(c=h(t-1,"right"),"rtl"==i){var v=g;g=c,c=v}d=g.left,p=c.right}null==r&&0==e&&(d=s),c.top-g.top>3&&(u(d,g.top,null,g.bottom),d=s,g.bottom<c.top&&u(d,g.bottom,null,c.top)),null==n&&t==f&&(p=a),(!o||g.top<o.top||g.top==o.top&&g.left<o.left)&&(o=g),(!l||c.bottom>l.bottom||c.bottom==l.bottom&&c.right>l.right)&&(l=c),d<s+1&&(d=s),u(d,c.top,p-d,c.bottom)}),{start:o,end:l}}var f=t.from(),h=t.to();if(f.line==h.line)c(f.line,f.ch,h.ch);else{var d=li(i,f.line),p=li(i,h.line),g=Sn(d)==Sn(p),v=c(f.line,f.ch,g?d.text.length+1:null).end,m=c(h.line,g?0:null,h.ch).start;g&&(v.top<m.top-2?(u(v.right,v.top,null,v.bottom),u(s,m.top,m.left,m.bottom)):u(v.right,v.top,m.left-v.right,v.bottom)),v.bottom<m.top&&u(s,v.bottom,null,m.top)}r.appendChild(o)}function Fe(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(r=!r)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Be(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,no(Ge,e))}function Ge(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,n=jr(t.mode,Ue(e,t.frontier)),i=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(t.frontier>=e.display.viewFrom){var l=o.styles,s=Rn(e,o,n,!0);o.styles=s.styles;var a=o.styleClasses,u=s.classes;u?o.styleClasses=u:a&&(o.styleClasses=null);for(var c=!l||l.length!=o.styles.length||a!=u&&(!a||!u||a.bgClass!=u.bgClass||a.textClass!=u.textClass),f=0;!c&&f<l.length;++f)c=l[f]!=o.styles[f];c&&i.push(t.frontier),o.stateAfter=jr(t.mode,n)}else Bn(e,o.text,n),o.stateAfter=t.frontier%5==0?jr(t.mode,n):null;if(++t.frontier,+new Date>r)return Be(e,e.options.workDelay),!0}),i.length&&St(e,function(){for(var t=0;t<i.length;t++)Ht(e,i[t],"text")})}}function Ue(e,t,r){var n=e.doc,i=e.display;if(!n.mode.startState)return!0;var o=function(e,t,r){for(var n,i,o=e.doc,l=r?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>l;--s){if(s<=o.first)return o.first;var a=li(o,s-1);if(a.stateAfter&&(!r||s<=o.frontier))return s;var u=_i(a.text,null,e.options.tabSize);(null==i||n>u)&&(i=s-1,n=u)}return i}(e,t,r),l=o>n.first&&li(n,o-1).stateAfter;return l=l?jr(n.mode,l):_r(n.mode),n.iter(o,t,function(r){Bn(e,r.text,l);var s=o==t-1||o%5==0||o>=i.viewFrom&&o<i.viewTo;r.stateAfter=s?jr(n.mode,l):null,++o}),r&&(n.frontier=o),l}function Ve(e){return e.lineSpace.offsetTop}function Ke(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Xe(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=po(e.measure,fo("pre","x")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function je(e){return Gi-e.display.nativeBarWidth}function _e(e){return e.display.scroller.clientWidth-je(e)-e.display.barWidth}function Ye(e){return e.display.scroller.clientHeight-je(e)-e.display.barHeight}function $e(e,t,r,n){return Qe(e,Ze(e,t),r,n)}function qe(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Dt(e,t)];var r=e.display.externalMeasured;return r&&t>=r.lineN&&t<r.lineN+r.size?r:void 0}function Ze(e,t){var r=ci(t),n=qe(e,r);n&&!n.text?n=null:n&&n.changes&&J(e,n,r,Q(e)),n||(n=function(e,t){var r=ci(t=Sn(t)),n=e.display.externalMeasured=new Nt(e.doc,t,r);n.lineN=r;var i=n.built=Kn(e,n);return n.text=i.pre,po(e.display.lineMeasure,i.pre),n}(e,t));var i=function(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(n=0;n<e.rest.length;n++)if(ci(e.rest[n])>r)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}(n,t,r);return{line:t,view:n,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Qe(e,t,r,o,l){t.before&&(r=-1);var s,a=r+(o||"");return t.cache.hasOwnProperty(a)?s=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(!function(e,t,r){var n=e.options.lineWrapping,i=n&&_e(e);if(!t.measure.heights||n&&t.measure.width!=i){var o=t.measure.heights=[];if(n){t.measure.width=i;for(var l=t.text.firstChild.getClientRects(),s=0;s<l.length-1;s++){var a=l[s],u=l[s+1];Math.abs(a.bottom-u.bottom)>2&&o.push((a.bottom+u.top)/2-r.top)}}o.push(r.bottom-r.top)}}(e,t.view,t.rect),t.hasHeights=!0),(s=function(e,t,r,o){for(var l,s,a,u,c,f=t.map,h=0;h<f.length;h+=3){var d=f[h],p=f[h+1];if(r<d?(s=0,a=1,u="left"):r<p?a=(s=r-d)+1:(h==f.length-3||r==p&&f[h+3]>r)&&(s=(a=p-d)-1,r>=p&&(u="right")),null!=s){if(l=f[h+2],d==p&&o==(l.insertLeft?"left":"right")&&(u=o),"left"==o&&0==s)for(;h&&f[h-2]==f[h-3]&&f[h-1].insertLeft;)l=f[2+(h-=3)],u="left";if("right"==o&&s==p-d)for(;h<f.length-3&&f[h+3]==f[h+4]&&!f[h+5].insertLeft;)l=f[(h+=3)+2],u="right";break}}if(3==l.nodeType){for(var h=0;h<4;h++){for(;s&&co(t.line.text.charAt(d+s));)--s;for(;d+a<p&&co(t.line.text.charAt(d+a));)++a;if(n&&i<9&&0==s&&a==p-d)c=l.parentNode.getBoundingClientRect();else if(n&&e.options.lineWrapping){var g=ao(l,s,a).getClientRects();c=g.length?g["right"==o?g.length-1:0]:et}else c=ao(l,s,a).getBoundingClientRect()||et;if(c.left||c.right||0==s)break;a=s,s-=1,u="right"}n&&i<11&&(c=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Ho)return Ho;var t=po(e,fo("span","x")),r=t.getBoundingClientRect(),n=ao(t,0,1).getBoundingClientRect();return Ho=Math.abs(r.left-n.left)>1}(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}(e.display.measure,c))}else{s>0&&(u=o="right"),c=e.options.lineWrapping&&(g=l.getClientRects()).length>1?g["right"==o?g.length-1:0]:l.getBoundingClientRect()}if(n&&i<9&&!s&&(!c||!c.left&&!c.right)){var v=l.parentNode.getClientRects()[0];c=v?{left:v.left,right:v.left+gt(e.display),top:v.top,bottom:v.bottom}:et}for(var m=c.top-t.rect.top,y=c.bottom-t.rect.top,b=(m+y)/2,w=t.view.measure.heights,h=0;h<w.length-1&&!(b<w[h]);h++);var x=h?w[h-1]:0,C=w[h],L={left:("right"==u?c.right:c.left)-t.rect.left,right:("left"==u?c.left:c.right)-t.rect.left,top:x,bottom:C};c.left||c.right||(L.bogus=!0);e.options.singleCursorHeightPerLine||(L.rtop=m,L.rbottom=y);return L}(e,t,r,o)).bogus||(t.cache[a]=s)),{left:s.left,right:s.right,top:l?s.rtop:s.top,bottom:l?s.rbottom:s.bottom}}ge.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],n=e.ranges[t];if(0!=fe(r.anchor,n.anchor)||0!=fe(r.head,n.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new ve(he(this.ranges[t].anchor),he(this.ranges[t].head));return new ge(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var n=this.ranges[r];if(fe(t,n.from())>=0&&fe(e,n.to())<=0)return r}return-1}},ve.prototype={from:function(){return pe(this.anchor,this.head)},to:function(){return de(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var Je,et={left:0,right:0,top:0,bottom:0};function tt(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function rt(e){e.display.externalMeasure=null,ho(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)tt(e.display.view[t])}function nt(e){rt(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function it(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function ot(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function lt(e,t,r,n){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var o=Hn(t.widgets[i]);r.top+=o,r.bottom+=o}if("line"==n)return r;n||(n="local");var l=hi(t);if("local"==n?l+=Ve(e.display):l-=e.display.viewOffset,"page"==n||"window"==n){var s=e.display.lineSpace.getBoundingClientRect();l+=s.top+("window"==n?0:ot());var a=s.left+("window"==n?0:it());r.left+=a,r.right+=a}return r.top+=l,r.bottom+=l,r}function st(e,t,r){if("div"==r)return t;var n=t.left,i=t.top;if("page"==r)n-=it(),i-=ot();else if("local"==r||!r){var o=e.display.sizer.getBoundingClientRect();n+=o.left,i+=o.top}var l=e.display.lineSpace.getBoundingClientRect();return{left:n-l.left,top:i-l.top}}function at(e,t,r,n,i){return n||(n=li(e.doc,t.line)),lt(e,n,$e(e,n,t.ch,i),r)}function ut(e,t,r,n,i,o){function l(t,l){var s=Qe(e,i,t,l?"right":"left",o);return l?s.left=s.right:s.right=s.left,lt(e,n,s,r)}function s(e,t){var r=a[t],n=r.level%2;return e==zo(r)&&t&&r.level<a[t-1].level?(e=Io(r=a[--t])-(r.level%2?0:1),n=!0):e==Io(r)&&t<a.length-1&&r.level<a[t+1].level&&(e=zo(r=a[++t])-r.level%2,n=!1),n&&e==r.to&&e>r.from?l(e-1):l(e,n)}n=n||li(e.doc,t.line),i||(i=Ze(e,n));var a=di(n),u=t.ch;if(!a)return l(u);var c=s(u,Bo(a,u));return null!=Oo&&(c.other=s(u,Oo)),c}function ct(e,t){var r=0;t=we(e.doc,t);e.options.lineWrapping||(r=gt(e.display)*t.ch);var n=li(e.doc,t.line),i=hi(n)+Ve(e.display);return{left:r,right:r,top:i,bottom:i+n.height}}function ft(e,t,r,n){var i=ce(e,t);return i.xRel=n,r&&(i.outside=!0),i}function ht(e,t,r){var n=e.doc;if((r+=e.display.viewOffset)<0)return ft(n.first,0,!0,-1);var i=fi(n,r),o=n.first+n.size-1;if(i>o)return ft(n.first+n.size-1,li(n,o).text.length,!0,1);t<0&&(t=0);for(var l=li(n,i);;){var s=dt(e,l,i,t,r),a=Cn(l),u=a&&a.find(0,!0);if(!a||!(s.ch>u.from.ch||s.ch==u.from.ch&&s.xRel>0))return s;i=ci(l=u.to.line)}}function dt(e,t,r,n,i){var o=i-hi(t),l=!1,s=2*e.display.wrapper.clientWidth,a=Ze(e,t);function u(n){var i=ut(e,ce(r,n),"line",t,a);return l=!0,o>i.bottom?i.left-s:o<i.top?i.left+s:(l=!1,i.left)}var c=di(t),f=t.text.length,h=Eo(t),d=Po(t),p=u(h),g=l,v=u(d),m=l;if(n>v)return ft(r,d,m,1);for(;;){if(c?d==h||d==Uo(t,h,1):d-h<=1){for(var y=n<p||n-p<=v-n?h:d,b=n-(y==h?p:v);co(t.text.charAt(y));)++y;return ft(r,y,y==h?g:m,b<-1?-1:b>1?1:0)}var w=Math.ceil(f/2),x=h+w;if(c){x=h;for(var C=0;C<w;++C)x=Uo(t,x,1)}var L=u(x);L>n?(d=x,v=L,(m=l)&&(v+=1e3),f=w):(h=x,p=L,g=l,f-=w)}}function pt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Je){Je=fo("pre");for(var t=0;t<49;++t)Je.appendChild(document.createTextNode("x")),Je.appendChild(fo("br"));Je.appendChild(document.createTextNode("x"))}po(e.measure,Je);var r=Je.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),ho(e.measure),r||1}function gt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=fo("span","xxxxxxxxxx"),r=fo("pre",[t]);po(e.measure,r);var n=t.getBoundingClientRect(),i=(n.right-n.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}var vt=null,mt=0;function yt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++mt},vt?vt.ops.push(e.curOp):e.curOp.ownsGroup=vt={ops:[e.curOp],delayedCallbacks:[]}}function bt(e){var t=e.curOp.ownsGroup;if(t)try{!function(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r]();for(var n=0;n<e.ops.length;n++){var i=e.ops[n];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++](i.cm)}}while(r<t.length)}(t)}finally{vt=null;for(var r=0;r<t.ops.length;r++)t.ops[r].cm.curOp=null;!function(e){for(var t=e.ops,r=0;r<t.length;r++)wt(t[r]);for(var r=0;r<t.length;r++)n=t[r],n.updatedDisplay=n.mustUpdate&&j(n.cm,n.update);var n;for(var r=0;r<t.length;r++)xt(t[r]);for(var r=0;r<t.length;r++)Ct(t[r]);for(var r=0;r<t.length;r++)Lt(t[r])}(t)}}function wt(e){var t,r,n=e.cm,i=n.display;!(r=(t=n).display).scrollbarsClipped&&r.scroller.offsetWidth&&(r.nativeBarWidth=r.scroller.offsetWidth-r.scroller.clientWidth,r.heightForcer.style.height=je(t)+"px",r.sizer.style.marginBottom=-r.nativeBarWidth+"px",r.sizer.style.borderRightWidth=je(t)+"px",r.scrollbarsClipped=!0),e.updateMaxLine&&O(n),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&n.options.lineWrapping,e.update=e.mustUpdate&&new X(n,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function xt(e){var t=e.cm,r=t.display;e.updatedDisplay&&q(t),e.barMeasure=z(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=$e(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+je(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-_e(t))),(e.updatedDisplay||e.selectionChanged)&&(e.newSelectionNodes=ze(t))}function Ct(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&tr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.newSelectionNodes&&Ie(t,e.newSelectionNodes),e.updatedDisplay&&$(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&R(t,e.barMeasure),e.selectionChanged&&Fe(t),t.state.focused&&e.updateInput&&Ut(t,e.typing)}function Lt(e){var t=e.cm,r=t.display,n=t.doc;if(e.updatedDisplay&&_(t,e.update),null==r.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null==e.scrollTop||r.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(n.scrollTop=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,e.scrollTop)),r.scrollbars.setScrollTop(n.scrollTop),r.scroller.scrollTop=n.scrollTop),null==e.scrollLeft||r.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(n.scrollLeft=Math.max(0,Math.min(r.scroller.scrollWidth-_e(t),e.scrollLeft)),r.scrollbars.setScrollLeft(n.scrollLeft),r.scroller.scrollLeft=n.scrollLeft,G(t)),e.scrollToPos){var i=function(e,t,r,n){null==n&&(n=0);for(var i=0;i<5;i++){var o=!1,l=ut(e,t),s=r&&r!=t?ut(e,r):l,a=Nr(e,Math.min(l.left,s.left),Math.min(l.top,s.top)-n,Math.max(l.left,s.left),Math.max(l.bottom,s.bottom)+n),u=e.doc.scrollTop,c=e.doc.scrollLeft;if(null!=a.scrollTop&&(er(e,a.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(o=!0)),null!=a.scrollLeft&&(tr(e,a.scrollLeft),Math.abs(e.doc.scrollLeft-c)>1&&(o=!0)),!o)break}return l}(t,we(n,e.scrollToPos.from),we(n,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&function(e,t){if(Pi(e,"scrollCursorIntoView"))return;var r=e.display,n=r.sizer.getBoundingClientRect(),i=null;t.top+n.top<0?i=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1);if(null!=i&&!h){var o=fo("div","?",null,"position: absolute; top: "+(t.top-r.viewOffset-Ve(e.display))+"px; height: "+(t.bottom-t.top+je(e)+r.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}(t,i)}var o=e.maybeHiddenMarkers,l=e.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||Di(o[s],"hide");if(l)for(s=0;s<l.length;++s)l[s].lines.length&&Di(l[s],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Di(t,"changes",t,e.changeObjs)}function St(e,t){if(e.curOp)return t();yt(e);try{return t()}finally{bt(e)}}function kt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);yt(e);try{return t.apply(e,arguments)}finally{bt(e)}}}function Mt(e){return function(){if(this.curOp)return e.apply(this,arguments);yt(this);try{return e.apply(this,arguments)}finally{bt(this)}}}function Tt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);yt(t);try{return e.apply(this,arguments)}finally{bt(t)}}}function Nt(e,t,r){this.line=t,this.rest=function(e){var t,r;for(;t=Cn(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}(t),this.size=this.rest?ci(Zi(this.rest))-r+1:1,this.node=this.text=null,this.hidden=Tn(e,t)}function Wt(e,t,r){for(var n,i=[],o=t;o<r;o=n){var l=new Nt(e.doc,li(e.doc,o),o);n=o+l.size,i.push(l)}return i}function At(e,t,r,n){null==t&&(t=e.doc.first),null==r&&(r=e.doc.first+e.doc.size),n||(n=0);var i=e.display;if(n&&r<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)x&&kn(e.doc,t)<i.viewTo&&Ot(e);else if(r<=i.viewFrom)x&&Mn(e.doc,r+n)>i.viewFrom?Ot(e):(i.viewFrom+=n,i.viewTo+=n);else if(t<=i.viewFrom&&r>=i.viewTo)Ot(e);else if(t<=i.viewFrom){(o=zt(e,r,r+n,1))?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=n):Ot(e)}else if(r>=i.viewTo){var o;(o=zt(e,t,t,-1))?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):Ot(e)}else{var l=zt(e,t,t,-1),s=zt(e,r,r+n,1);l&&s?(i.view=i.view.slice(0,l.index).concat(Wt(e,l.lineN,s.lineN)).concat(i.view.slice(s.index)),i.viewTo+=n):Ot(e)}var a=i.externalMeasured;a&&(r<a.lineN?a.lineN+=n:t<a.lineN+a.size&&(i.externalMeasured=null))}function Ht(e,t,r){e.curOp.viewChanged=!0;var n=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var o=n.view[Dt(e,t)];if(null!=o.node){var l=o.changes||(o.changes=[]);-1==Ji(l,r)&&l.push(r)}}}function Ot(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Dt(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var r=e.display.view,n=0;n<r.length;n++)if((t-=r[n].size)<0)return n}function zt(e,t,r,n){var i,o=Dt(e,t),l=e.display.view;if(!x||r==e.doc.first+e.doc.size)return{index:o,lineN:r};for(var s=0,a=e.display.viewFrom;s<o;s++)a+=l[s].size;if(a!=t){if(n>0){if(o==l.length-1)return null;i=a+l[o].size-t,o++}else i=a-t;t+=i,r+=i}for(;kn(e.doc,r)!=r;){if(o==(n<0?0:l.length-1))return null;r+=n*l[o-(n<0?1:0)].size,o+=n}return{index:o,lineN:r}}function It(e){for(var t=e.display.view,r=0,n=0;n<t.length;n++){var i=t[n];i.hidden||i.node&&!i.changes||++r}return r}function Et(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){Gt(e),e.state.focused&&Et(e)})}function Pt(e){var t=!1;e.display.pollingFast=!0,e.display.poll.set(20,function r(){Gt(e)||t?(e.display.pollingFast=!1,Et(e)):(t=!0,e.display.poll.set(60,r))})}var Rt,Ft,Bt=null;function Gt(e){var t=e.display.input,r=e.display.prevInput,o=e.doc;if(!e.state.focused||Wo(t)&&!r||Xt(e)||e.options.disableInput||e.state.keySeq)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var l=t.value;if(l==r&&!e.somethingSelected())return!1;if(n&&i>=9&&e.display.inputHasSelection===l||g&&/[\uf700-\uf7ff]/.test(l))return Ut(e),!1;var s=!e.curOp;s&&yt(e),e.display.shift=!1,8203!=l.charCodeAt(0)||o.sel!=e.display.selForContextMenu||r||(r="?");for(var a=0,u=Math.min(r.length,l.length);a<u&&r.charCodeAt(a)==l.charCodeAt(a);)++a;var c=l.slice(a),f=No(c),h=null;e.state.pasteIncoming&&o.sel.ranges.length>1&&(Bt&&Bt.join("\n")==c?h=o.sel.ranges.length%Bt.length==0&&eo(Bt,No):f.length==o.sel.ranges.length&&(h=eo(f,function(e){return[e]})));for(var d=o.sel.ranges.length-1;d>=0;d--){var p=o.sel.ranges[d],v=p.from(),m=p.to();a<r.length?v=ce(v.line,v.ch-(r.length-a)):e.state.overwrite&&p.empty()&&!e.state.pasteIncoming&&(m=ce(m.line,Math.min(li(o,m.line).text.length,m.ch+Zi(f).length)));var y=e.curOp.updateInput,b={from:v,to:m,text:h?h[d%h.length]:f,origin:e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input"};if(Cr(e.doc,b),Ii(e,"inputRead",e,b),c&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&p.head.ch<100&&(!d||o.sel.ranges[d-1].head.line!=p.head.line)){var w=e.getModeAt(p.head),x=mr(b);if(w.electricChars){for(var C=0;C<w.electricChars.length;C++)if(c.indexOf(w.electricChars.charAt(C))>-1){Or(e,x.line,"smart");break}}else w.electricInput&&w.electricInput.test(li(o,x.line).text.slice(0,x.ch))&&Or(e,x.line,"smart")}}return Ar(e),e.curOp.updateInput=y,e.curOp.typing=!0,l.length>1e3||l.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=l,s&&bt(e),e.state.pasteIncoming=e.state.cutIncoming=!1,!0}function Ut(e,t){if(!e.display.contextMenuPending){var r,o,l=e.doc;if(e.somethingSelected()){e.display.prevInput="";var s=l.sel.primary(),a=(r=Ao&&(s.to().line-s.from().line>100||(o=e.getSelection()).length>1e3))?"-":o||e.getSelection();e.display.input.value=a,e.state.focused&&Qi(e.display.input),n&&i>=9&&(e.display.inputHasSelection=a)}else t||(e.display.prevInput=e.display.input.value="",n&&i>=9&&(e.display.inputHasSelection=null));e.display.inaccurateSelection=r}}function Vt(e){"nocursor"==e.options.readOnly||p&&go()==e.display.input||e.display.input.focus()}function Kt(e){e.state.focused||(Vt(e),pr(e))}function Xt(e){return e.options.readOnly||e.doc.cantEdit}function jt(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function _t(e,t){for(var r=Wi(t);r!=e.wrapper;r=r.parentNode)if(!r||"true"==r.getAttribute("cm-ignore-events")||r.parentNode==e.sizer&&r!=e.mover)return!0}function Yt(e,t,r,n){var i=e.display;if(!r&&"true"==Wi(t).getAttribute("not-content"))return null;var o,l,s=i.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,l=t.clientY-s.top}catch(t){return null}var a,u=ht(e,o,l);if(n&&1==u.xRel&&(a=li(e.doc,u.line).text).length==u.ch){var c=_i(a,a.length,e.options.tabSize)-a.length;u=ce(u.line,Math.max(0,Math.round((o-Xe(e.display).left)/gt(e.display))-c))}return u}function $t(e){if(!Pi(this,e)){var t=this,r=t.display;if(r.shift=e.shiftKey,_t(r,e))o||(r.scroller.draggable=!1,setTimeout(function(){r.scroller.draggable=!0},100));else if(!Zt(t,e)){var l=Yt(t,e);switch(window.focus(),Ai(e)){case 1:l?function(e,t,r){setTimeout(no(Kt,e),0);var l,s=+new Date;Ft&&Ft.time>s-400&&0==fe(Ft.pos,r)?l="triple":Rt&&Rt.time>s-400&&0==fe(Rt.pos,r)?(l="double",Ft={time:s,pos:r}):(l="single",Rt={time:s,pos:r});var a,u=e.doc.sel,c=g?t.metaKey:t.ctrlKey;e.options.dragDrop&&So&&!Xt(e)&&"single"==l&&(a=u.contains(r))>-1&&!u.ranges[a].empty()?function(e,t,r,l){var s=e.display,a=kt(e,function(u){o&&(s.scroller.draggable=!1),e.state.draggingText=!1,Oi(document,"mouseup",a),Oi(s.scroller,"drop",a),Math.abs(t.clientX-u.clientX)+Math.abs(t.clientY-u.clientY)<10&&(ki(u),l||Le(e.doc,r),Vt(e),n&&9==i&&setTimeout(function(){document.body.focus(),Vt(e)},20))});o&&(s.scroller.draggable=!0);e.state.draggingText=a,s.scroller.dragDrop&&s.scroller.dragDrop();Hi(document,"mouseup",a),Hi(s.scroller,"drop",a)}(e,t,r,c):function(e,t,r,n,i){var o=e.display,l=e.doc;ki(t);var s,a,u=l.sel,c=u.ranges;i&&!t.shiftKey?(a=l.sel.contains(r),s=a>-1?c[a]:new ve(r,r)):s=l.sel.primary();if(t.altKey)n="rect",i||(s=new ve(r,r)),r=Yt(e,t,!0,!0),a=-1;else if("double"==n){var f=e.findWordAt(r);s=e.display.shift||l.extend?Ce(l,s,f.anchor,f.head):f}else if("triple"==n){var h=new ve(ce(r.line,0),we(l,ce(r.line+1,0)));s=e.display.shift||l.extend?Ce(l,s,h.anchor,h.head):h}else s=Ce(l,s,r);i?-1==a?(a=c.length,Ne(l,me(c.concat([s]),a),{scroll:!1,origin:"*mouse"})):c.length>1&&c[a].empty()&&"single"==n?(Ne(l,me(c.slice(0,a).concat(c.slice(a+1)),0)),u=l.sel):ke(l,a,s,Ki):(a=0,Ne(l,new ge([s],0),Ki),u=l.sel);var d=r;var p=o.wrapper.getBoundingClientRect(),g=0;function v(t){var i=++g,c=Yt(e,t,!0,"rect"==n);if(c)if(0!=fe(c,d)){Kt(e),function(t){if(0==fe(d,t))return;if(d=t,"rect"==n){for(var i=[],o=e.options.tabSize,c=_i(li(l,r.line).text,r.ch,o),f=_i(li(l,t.line).text,t.ch,o),h=Math.min(c,f),p=Math.max(c,f),g=Math.min(r.line,t.line),v=Math.min(e.lastLine(),Math.max(r.line,t.line));g<=v;g++){var m=li(l,g).text,y=Yi(m,h,o);h==p?i.push(new ve(ce(g,y),ce(g,y))):m.length>y&&i.push(new ve(ce(g,y),ce(g,Yi(m,p,o))))}i.length||i.push(new ve(r,r)),Ne(l,me(u.ranges.slice(0,a).concat(i),a),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b=s,w=b.anchor,x=t;if("single"!=n){if("double"==n)var C=e.findWordAt(t);else var C=new ve(ce(t.line,0),we(l,ce(t.line+1,0)));fe(C.anchor,w)>0?(x=C.head,w=pe(b.from(),C.anchor)):(x=C.anchor,w=de(b.to(),C.head))}var i=u.ranges.slice(0);i[a]=new ve(we(l,w),x),Ne(l,me(i,a),Ki)}}(c);var f=B(o,l);(c.line>=f.to||c.line<f.from)&&setTimeout(kt(e,function(){g==i&&v(t)}),150)}else{var h=t.clientY<p.top?-20:t.clientY>p.bottom?20:0;h&&setTimeout(kt(e,function(){g==i&&(o.scroller.scrollTop+=h,v(t))}),50)}}function m(t){g=1/0,ki(t),Vt(e),Oi(document,"mousemove",y),Oi(document,"mouseup",b),l.history.lastSelOrigin=null}var y=kt(e,function(e){Ai(e)?v(e):m(e)}),b=kt(e,m);Hi(document,"mousemove",y),Hi(document,"mouseup",b)}(e,t,r,l,c)}(t,e,l):Wi(e)==r.scroller&&ki(e);break;case 2:o&&(t.state.lastMiddleDown=+new Date),l&&Le(t.doc,l),setTimeout(no(Vt,t),20),ki(e);break;case 3:b&&vr(t,e)}}}}function qt(e,t,r,n,i){try{var o=t.clientX,l=t.clientY}catch(t){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&ki(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(l>a.bottom||!Fi(e,r))return Ti(t);l-=a.top-s.viewOffset;for(var u=0;u<e.options.gutters.length;++u){var c=s.gutters.childNodes[u];if(c&&c.getBoundingClientRect().right>=o)return i(e,r,e,fi(e.doc,l),e.options.gutters[u],t),Ti(t)}}function Zt(e,t){return qt(e,t,"gutterClick",!0,Ii)}var Qt=0;function Jt(e){var t=this;if(!Pi(t,e)&&!_t(t.display,e)){ki(e),n&&(Qt=+new Date);var r=Yt(t,e,!0),i=e.dataTransfer.files;if(r&&!Xt(t))if(i&&i.length&&window.FileReader&&window.File)for(var o=i.length,l=Array(o),s=0,a=function(e,n){var i=new FileReader;i.onload=kt(t,function(){if(l[n]=i.result,++s==o){var e={from:r=we(t.doc,r),to:r,text:No(l.join("\n")),origin:"paste"};Cr(t.doc,e),Te(t.doc,ye(r,mr(e)))}}),i.readAsText(e)},u=0;u<o;++u)a(i[u],u);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1)return t.state.draggingText(e),void setTimeout(no(Vt,t),20);try{if(l=e.dataTransfer.getData("Text")){if(t.state.draggingText&&!(g?e.metaKey:e.ctrlKey))var c=t.listSelections();if(We(t.doc,ye(r,r)),c)for(u=0;u<c.length;++u)Tr(t.doc,"",c[u].anchor,c[u].head,"drag");t.replaceSelection(l,"around","paste"),Vt(t)}}catch(e){}}}}function er(t,r){Math.abs(t.doc.scrollTop-r)<2||(t.doc.scrollTop=r,e||Y(t,{top:r}),t.display.scroller.scrollTop!=r&&(t.display.scroller.scrollTop=r),t.display.scrollbars.setScrollTop(r),e&&Y(t),Be(t,100))}function tr(e,t,r){(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,G(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}var rr=0,nr=null;n?nr=-.53:e?nr=15:s?nr=-.7:u&&(nr=-1/3);var ir=function(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==r&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:null==r&&(r=e.wheelDelta),{x:t,y:r}};function or(t,r){var n=ir(r),i=n.x,l=n.y,s=t.display,u=s.scroller;if(i&&u.scrollWidth>u.clientWidth||l&&u.scrollHeight>u.clientHeight){if(l&&g&&o)e:for(var c=r.target,f=s.view;c!=u;c=c.parentNode)for(var h=0;h<f.length;h++)if(f[h].node==c){t.display.currentWheelTarget=c;break e}if(i&&!e&&!a&&null!=nr)return l&&er(t,Math.max(0,Math.min(u.scrollTop+l*nr,u.scrollHeight-u.clientHeight))),tr(t,Math.max(0,Math.min(u.scrollLeft+i*nr,u.scrollWidth-u.clientWidth))),ki(r),void(s.wheelStartX=null);if(l&&null!=nr){var d=l*nr,p=t.doc.scrollTop,v=p+s.wrapper.clientHeight;d<0?p=Math.max(0,p+d-50):v=Math.min(t.doc.height,v+d+50),Y(t,{top:p,bottom:v})}rr<20&&(null==s.wheelStartX?(s.wheelStartX=u.scrollLeft,s.wheelStartY=u.scrollTop,s.wheelDX=i,s.wheelDY=l,setTimeout(function(){if(null!=s.wheelStartX){var e=u.scrollLeft-s.wheelStartX,t=u.scrollTop-s.wheelStartY,r=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,r&&(nr=(nr*rr+r)/(rr+1),++rr)}},200)):(s.wheelDX+=i,s.wheelDY+=l))}}function lr(e,t,r){if("string"==typeof t&&!(t=Yr[t]))return!1;e.display.pollingFast&&Gt(e)&&(e.display.pollingFast=!1);var n=e.display.shift,i=!1;try{Xt(e)&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),i=t(e)!=Ui}finally{e.display.shift=n,e.state.suppressEdits=!1}return i}C.wheelEventPixels=function(e){var t=ir(e);return t.x*=nr,t.y*=nr,t};var sr=new ji;function ar(e,t,r,n){var i=e.state.keySeq;if(i){if(Qr(t))return"handled";sr.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,Ut(e))}),t=i+" "+t}var o=function(e,t,r){for(var n=0;n<e.state.keyMaps.length;n++){var i=Zr(t,e.state.keyMaps[n],r,e);if(i)return i}return e.options.extraKeys&&Zr(t,e.options.extraKeys,r,e)||Zr(t,e.options.keyMap,r,e)}(e,t,n);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&Ii(e,"keyHandled",e,t,r),"handled"!=o&&"multi"!=o||(ki(r),Fe(e)),i&&!o&&/\'$/.test(t)?(ki(r),!0):!!o}function ur(e,t){var r=Jr(t,!0);return!!r&&(t.shiftKey&&!e.state.keySeq?ar(e,"Shift-"+r,t,function(t){return lr(e,t,!0)})||ar(e,r,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return lr(e,t)}):ar(e,r,t,function(t){return lr(e,t)}))}var cr=null;function fr(e){var t=this;if(Kt(t),!Pi(t,e)){n&&i<11&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var o=ur(t,e);a&&(cr=o?r:null,!o&&88==r&&!Ao&&(g?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=r||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function r(e){18!=e.keyCode&&e.altKey||(mo(t,"CodeMirror-crosshair"),Oi(document,"keyup",r),Oi(document,"mouseover",r))}yo(t,"CodeMirror-crosshair"),Hi(document,"keyup",r),Hi(document,"mouseover",r)}(t)}}function hr(e){16==e.keyCode&&(this.doc.sel.shift=!1),Pi(this,e)}function dr(e){var t=this;if(!(Pi(t,e)||e.ctrlKey&&!e.altKey||g&&e.metaKey)){var r=e.keyCode,o=e.charCode;if(a&&r==cr)return cr=null,void ki(e);if(!(a&&(!e.which||e.which<10)||c)||!ur(t,e)){var l,s=String.fromCharCode(null==o?r:o);if(!ar(l=t,"'"+s+"'",e,function(e){return lr(l,e,!0)}))n&&i>=9&&(t.display.inputHasSelection=null),Pt(t)}}}function pr(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(Di(e,"focus",e),e.state.focused=!0,yo(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(Ut(e),o&&setTimeout(no(Ut,e,!0),0))),Et(e),Fe(e))}function gr(e){e.state.focused&&(Di(e,"blur",e),e.state.focused=!1,mo(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150)}function vr(e,t){if(!Pi(e,t,"contextmenu")){var r=e.display;if(!(_t(r,t)||(l=e,s=t,Fi(l,"gutterContextMenu")&&qt(l,s,"gutterContextMenu",!1,Di)))){var l,s,u=Yt(e,t),c=r.scroller.scrollTop;if(u&&!a){e.options.resetSelectionOnContextMenu&&-1==e.doc.sel.contains(u)&&kt(e,Ne)(e.doc,ye(u),Vi);var f=r.input.style.cssText;if(r.inputDiv.style.position="absolute",r.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: "+(n?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",o)var h=window.scrollY;if(Vt(e),o&&window.scrollTo(null,h),Ut(e),e.somethingSelected()||(r.input.value=r.prevInput=" "),r.contextMenuPending=!0,r.selForContextMenu=e.doc.sel,clearTimeout(r.detectingSelectAll),n&&i>=9&&p(),b){Ni(t);var d=function(){Oi(window,"mouseup",d),setTimeout(g,20)};Hi(window,"mouseup",d)}else setTimeout(g,50)}}}function p(){if(null!=r.input.selectionStart){var t=e.somethingSelected(),n=r.input.value="?"+(t?r.input.value:"");r.prevInput=t?"":"?",r.input.selectionStart=1,r.input.selectionEnd=n.length,r.selForContextMenu=e.doc.sel}}function g(){if(r.contextMenuPending=!1,r.inputDiv.style.position="relative",r.input.style.cssText=f,n&&i<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=c),Et(e),null!=r.input.selectionStart){(!n||n&&i<9)&&p();var t=0,o=function(){r.selForContextMenu==e.doc.sel&&0==r.input.selectionStart?kt(e,Yr.selectAll)(e):t++<10?r.detectingSelectAll=setTimeout(o,500):Ut(e)};r.detectingSelectAll=setTimeout(o,200)}}}var mr=C.changeEnd=function(e){return e.text?ce(e.from.line+e.text.length-1,Zi(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};function yr(e,t){if(fe(e,t.from)<0)return e;if(fe(e,t.to)<=0)return mr(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=mr(t).ch-t.to.ch),ce(r,n)}function br(e,t){for(var r=[],n=0;n<e.sel.ranges.length;n++){var i=e.sel.ranges[n];r.push(new ve(yr(i.anchor,t),yr(i.head,t)))}return me(r,e.sel.primIndex)}function wr(e,t,r){return e.line==t.line?ce(r.line,e.ch-t.ch+r.ch):ce(r.line+(e.line-t.line),e.ch)}function xr(e,t,r){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return r&&(n.update=function(t,r,n,i){t&&(this.from=we(e,t)),r&&(this.to=we(e,r)),n&&(this.text=n),void 0!==i&&(this.origin=i)}),Di(e,"beforeChange",e,n),e.cm&&Di(e.cm,"beforeChange",e.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function Cr(e,t,r){if(e.cm){if(!e.cm.curOp)return kt(e.cm,Cr)(e,t,r);if(e.cm.state.suppressEdits)return}if(!(Fi(e,"beforeChange")||e.cm&&Fi(e.cm,"beforeChange"))||(t=xr(e,t,!0))){var n=w&&!r&&function(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&-1!=Ji(n,r)||(n||(n=[])).push(r)}}),!n)return null;for(var i=[{from:t,to:r}],o=0;o<n.length;++o)for(var l=n[o],s=l.find(0),a=0;a<i.length;++a){var u=i[a];if(!(fe(u.to,s.from)<0||fe(u.from,s.to)>0)){var c=[a,1],f=fe(u.from,s.from),h=fe(u.to,s.to);(f<0||!l.inclusiveLeft&&!f)&&c.push({from:u.from,to:s.from}),(h>0||!l.inclusiveRight&&!h)&&c.push({from:s.to,to:u.to}),i.splice.apply(i,c),a+=c.length-1}}return i}(e,t.from,t.to);if(n)for(var i=n.length-1;i>=0;--i)Lr(e,{from:n[i].from,to:n[i].to,text:i?[""]:t.text});else Lr(e,t)}}function Lr(e,t){if(1!=t.text.length||""!=t.text[0]||0!=fe(t.from,t.to)){var r=br(e,t);mi(e,t,r,e.cm?e.cm.curOp.id:NaN),Mr(e,t,r,hn(e,t));var n=[];ii(e,function(e,r){r||-1!=Ji(n,e.history)||(Si(e.history,t),n.push(e.history)),Mr(e,t,null,hn(e,t))})}}function Sr(e,t,r){if(!e.cm||!e.cm.state.suppressEdits){for(var n,i=e.history,o=e.sel,l="undo"==t?i.done:i.undone,s="undo"==t?i.undone:i.done,a=0;a<l.length&&(n=l[a],r?!n.ranges||n.equals(e.sel):n.ranges);a++);if(a!=l.length){for(i.lastOrigin=i.lastSelOrigin=null;(n=l.pop()).ranges;){if(yi(n,s),r&&!n.equals(e.sel))return void Ne(e,n,{clearRedo:!1});o=n}var u=[];yi(o,s),s.push({changes:u,generation:i.generation}),i.generation=n.generation||++i.maxGeneration;var c=Fi(e,"beforeChange")||e.cm&&Fi(e.cm,"beforeChange");for(a=n.changes.length-1;a>=0;--a){var f=n.changes[a];if(f.origin=t,c&&!xr(e,f,!1))return void(l.length=0);u.push(gi(e,f));var h=a?br(e,f):Zi(l);Mr(e,f,h,pn(e,f)),!a&&e.cm&&e.cm.scrollIntoView({from:f.from,to:mr(f)});var d=[];ii(e,function(e,t){t||-1!=Ji(d,e.history)||(Si(e.history,f),d.push(e.history)),Mr(e,f,null,pn(e,f))})}}}}function kr(e,t){if(0!=t&&(e.first+=t,e.sel=new ge(eo(e.sel.ranges,function(e){return new ve(ce(e.anchor.line+t,e.anchor.ch),ce(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){At(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)Ht(e.cm,n,"gutter")}}function Mr(e,t,r,n){if(e.cm&&!e.cm.curOp)return kt(e.cm,Mr)(e,t,r,n);if(t.to.line<e.first)kr(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);kr(e,i),t={from:ce(e.first,0),to:ce(t.to.line+i,t.to.ch),text:[Zi(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:ce(o,li(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=si(e,t.from,t.to),r||(r=br(e,t)),e.cm?function(e,t,r){var n=e.doc,i=e.display,o=t.from,l=t.to,s=!1,a=o.line;e.options.lineWrapping||(a=ci(Sn(li(n,o.line))),n.iter(a,l.line+1,function(e){if(e==i.maxLine)return s=!0,!0}));n.sel.contains(t.from,t.to)>-1&&Ri(e);Zn(n,t,r,k(e)),e.options.lineWrapping||(n.iter(a,o.line+t.text.length,function(e){var t=H(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0));n.frontier=Math.min(n.frontier,o.line),Be(e,400);var u=t.text.length-(l.line-o.line)-1;o.line!=l.line||1!=t.text.length||qn(e.doc,t)?At(e,o.line,l.line+1,u):Ht(e,o.line,"text");var c=Fi(e,"changes"),f=Fi(e,"change");if(f||c){var h={from:o,to:l,text:t.text,removed:t.removed,origin:t.origin};f&&Ii(e,"change",e,h),c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}(e.cm,t,n):Zn(e,t,n),We(e,r,Vi)}}function Tr(e,t,r,n,i){if(n||(n=r),fe(n,r)<0){var o=n;n=r,r=o}"string"==typeof t&&(t=No(t)),Cr(e,{from:r,to:n,text:t,origin:i})}function Nr(e,t,r,n,i){var o=e.display,l=pt(e.display);r<0&&(r=0);var s=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,a=Ye(e),u={};i-r>a&&(i=r+a);var c=e.doc.height+Ke(o),f=r<l,h=i>c-l;if(r<s)u.scrollTop=f?0:r;else if(i>s+a){var d=Math.min(r,(h?c:i)-a);d!=s&&(u.scrollTop=d)}var p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,g=_e(e)-(e.options.fixedGutter?o.gutters.offsetWidth:0),v=n-t>g;return v&&(n=t+g),t<10?u.scrollLeft=0:t<p?u.scrollLeft=Math.max(0,t-(v?0:10)):n>g+p-3&&(u.scrollLeft=n+(v?0:10)-g),u}function Wr(e,t,r){null==t&&null==r||Hr(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=r&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+r)}function Ar(e){Hr(e);var t=e.getCursor(),r=t,n=t;e.options.lineWrapping||(r=t.ch?ce(t.line,t.ch-1):t,n=ce(t.line,t.ch+1)),e.curOp.scrollToPos={from:r,to:n,margin:e.options.cursorScrollMargin,isCursor:!0}}function Hr(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var r=ct(e,t.from),n=ct(e,t.to),i=Nr(e,Math.min(r.left,n.left),Math.min(r.top,n.top)-t.margin,Math.max(r.right,n.right),Math.max(r.bottom,n.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function Or(e,t,r,n){var i,o=e.doc;null==r&&(r="add"),"smart"==r&&(o.mode.indent?i=Ue(e,t):r="prev");var l=e.options.tabSize,s=li(o,t),a=_i(s.text,null,l);s.stateAfter&&(s.stateAfter=null);var u,c=s.text.match(/^\s*/)[0];if(n||/\S/.test(s.text)){if("smart"==r&&((u=o.mode.indent(i,s.text.slice(c.length),s.text))==Ui||u>150)){if(!n)return;r="prev"}}else u=0,r="not";"prev"==r?u=t>o.first?_i(li(o,t-1).text,null,l):0:"add"==r?u=a+e.options.indentUnit:"subtract"==r?u=a-e.options.indentUnit:"number"==typeof r&&(u=a+r),u=Math.max(0,u);var f="",h=0;if(e.options.indentWithTabs)for(var d=Math.floor(u/l);d;--d)h+=l,f+="\t";if(h<u&&(f+=qi(u-h)),f!=c)Tr(o,f,ce(t,0),ce(t,c.length),"+input");else for(d=0;d<o.sel.ranges.length;d++){var p=o.sel.ranges[d];if(p.head.line==t&&p.head.ch<c.length){ke(o,d,new ve(h=ce(t,c.length),h));break}}s.stateAfter=null}function Dr(e,t,r,n){var i=t,o=t;return"number"==typeof t?o=li(e,be(e,t)):i=ci(t),null==i?null:(n(o,i)&&e.cm&&Ht(e.cm,i,r),o)}function zr(e,t){for(var r=e.doc.sel.ranges,n=[],i=0;i<r.length;i++){for(var o=t(r[i]);n.length&&fe(o.from,Zi(n).to)<=0;){var l=n.pop();if(fe(l.from,o.from)<0){o.from=l.from;break}}n.push(o)}St(e,function(){for(var t=n.length-1;t>=0;t--)Tr(e.doc,"",n[t].from,n[t].to,"+delete");Ar(e)})}function Ir(e,t,r,n,i){var o=t.line,l=t.ch,s=r,a=li(e,o),u=!0;function c(t){var n,s=(i?Uo:Vo)(a,l,r,!0);if(null==s){if(t||!((n=o+r)<e.first||n>=e.first+e.size?u=!1:(o=n,a=li(e,n))))return u=!1;l=i?(r<0?Po:Eo)(a):r<0?a.text.length:0}else l=s;return!0}if("char"==n)c();else if("column"==n)c(!0);else if("word"==n||"group"==n)for(var f=null,h="group"==n,d=e.cm&&e.cm.getHelper(t,"wordChars"),p=!0;!(r<0)||c(!p);p=!1){var g=a.text.charAt(l)||"\n",v=lo(g,d)?"w":h&&"\n"==g?"n":!h||/\s/.test(g)?null:"p";if(!h||p||v||(v="s"),f&&f!=v){r<0&&(r=1,c());break}if(v&&(f=v),r>0&&!c(!p))break}var m=De(e,ce(o,l),s,!0);return u||(m.hitSide=!0),m}function Er(e,t,r,n){var i,o=e.doc,l=t.left;if("page"==n){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);i=t.top+r*(s-(r<0?1.5:.5)*pt(e.display))}else"line"==n&&(i=r>0?t.bottom+3:t.top-3);for(;;){var a=ht(e,l,i);if(!a.outside)break;if(r<0?i<=0:i>=o.height){a.hitSide=!0;break}i+=5*r}return a}C.prototype={constructor:C,focus:function(){window.focus(),Vt(this),Pt(this)},setOption:function(e,t){var r=this.options,n=r[e];r[e]==t&&"mode"!=e||(r[e]=t,Rr.hasOwnProperty(e)&&kt(this,Rr[e])(this,t,n))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](en(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||t[r].name==e)return t.splice(r,1),!0},addOverlay:Mt(function(e,t){var r=e.token?e:C.getMode(this.options,e);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:e,opaque:t&&t.opaque}),this.state.modeGen++,At(this)}),removeOverlay:Mt(function(e){for(var t=this.state.overlays,r=0;r<t.length;++r){var n=t[r].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(r,1),this.state.modeGen++,void At(this)}}),indentLine:Mt(function(e,t,r){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),xe(this.doc,e)&&Or(this,e,t,r)}),indentSelection:Mt(function(e){for(var t=this.doc.sel.ranges,r=-1,n=0;n<t.length;n++){var i=t[n];if(i.empty())i.head.line>r&&(Or(this,i.head.line,e,!0),r=i.head.line,n==this.doc.sel.primIndex&&Ar(this));else{var o=i.from(),l=i.to(),s=Math.max(r,o.line);r=Math.min(this.lastLine(),l.line-(l.ch?0:1))+1;for(var a=s;a<r;++a)Or(this,a,e);var u=this.doc.sel.ranges;0==o.ch&&t.length==u.length&&u[n].from().ch>0&&ke(this.doc,n,new ve(o,u[n].to()),Vi)}}}),getTokenAt:function(e,t){return En(this,e,t)},getLineTokens:function(e,t){return En(this,ce(e),t,!0)},getTokenTypeAt:function(e){e=we(this.doc,e);var t,r=Fn(this,li(this.doc,e.line)),n=0,i=(r.length-1)/2,o=e.ch;if(0==o)t=r[2];else for(;;){var l=n+i>>1;if((l?r[2*l-1]:0)>=o)i=l;else{if(!(r[2*l+1]<o)){t=r[2*l+2];break}n=l+1}}var s=t?t.indexOf("cm-overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?C.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!Xr.hasOwnProperty(t))return Xr;var n=Xr[t],i=this.getModeAt(e);if("string"==typeof i[t])n[i[t]]&&r.push(n[i[t]]);else if(i[t])for(var o=0;o<i[t].length;o++){var l=n[i[t][o]];l&&r.push(l)}else i.helperType&&n[i.helperType]?r.push(n[i.helperType]):n[i.name]&&r.push(n[i.name]);for(o=0;o<n._global.length;o++){var s=n._global[o];s.pred(i,this)&&-1==Ji(r,s.val)&&r.push(s.val)}return r},getStateAfter:function(e,t){var r=this.doc;return Ue(this,(e=be(r,null==e?r.first+r.size-1:e))+1,t)},cursorCoords:function(e,t){var r=this.doc.sel.primary();return ut(this,null==e?r.head:"object"==typeof e?we(this.doc,e):e?r.from():r.to(),t||"page")},charCoords:function(e,t){return at(this,we(this.doc,e),t||"page")},coordsChar:function(e,t){return ht(this,(e=st(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=st(this,{top:e,left:0},t||"page").top,fi(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var r=!1,n=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>n&&(e=n,r=!0);var i=li(this.doc,e);return lt(this,i,{top:0,left:0},t||"page").top+(r?this.doc.height-hi(i):0)},defaultTextHeight:function(){return pt(this.display)},defaultCharWidth:function(){return gt(this.display)},setGutterMarker:Mt(function(e,t,r){return Dr(this.doc,e,"gutter",function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=r,!r&&so(n)&&(e.gutterMarkers=null),!0})}),clearGutter:Mt(function(e){var t=this,r=t.doc,n=r.first;r.iter(function(r){r.gutterMarkers&&r.gutterMarkers[e]&&(r.gutterMarkers[e]=null,Ht(t,n,"gutter"),so(r.gutterMarkers)&&(r.gutterMarkers=null)),++n})}),addLineWidget:Mt(function(e,t,r){return function(e,t,r,n){var i=new Wn(e,r,n);i.noHScroll&&(e.display.alignWidgets=!0);return Dr(e.doc,t,"widget",function(t){var r=t.widgets||(t.widgets=[]);if(null==i.insertAt?r.push(i):r.splice(Math.min(r.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,!Tn(e.doc,t)){var n=hi(t)<e.doc.scrollTop;ui(t,t.height+Hn(i)),n&&Wr(e,null,i.height),e.curOp.forceUpdate=!0}return!0}),i}(this,e,t,r)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!xe(this.doc,e))return null;var t=e;if(!(e=li(this.doc,e)))return null}else{if(null==(t=ci(e)))return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,n,i){var o,l,s,a,u,c,f=this.display,h=(e=ut(this,we(this.doc,e))).bottom,d=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),f.sizer.appendChild(t),"over"==n)h=e.top;else if("above"==n||"near"==n){var p=Math.max(f.wrapper.clientHeight,this.doc.height),g=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>p)&&e.top>t.offsetHeight?h=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=p&&(h=e.bottom),d+t.offsetWidth>g&&(d=g-t.offsetWidth)}t.style.top=h+"px",t.style.left=t.style.right="","right"==i?(d=f.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?d=0:"middle"==i&&(d=(f.sizer.clientWidth-t.offsetWidth)/2),t.style.left=d+"px"),r&&(o=this,l=d,s=h,a=d+t.offsetWidth,u=h+t.offsetHeight,null!=(c=Nr(o,l,s,a,u)).scrollTop&&er(o,c.scrollTop),null!=c.scrollLeft&&tr(o,c.scrollLeft))},triggerOnKeyDown:Mt(fr),triggerOnKeyPress:Mt(dr),triggerOnKeyUp:hr,execCommand:function(e){if(Yr.hasOwnProperty(e))return Yr[e](this)},findPosH:function(e,t,r,n){var i=1;t<0&&(i=-1,t=-t);for(var o=0,l=we(this.doc,e);o<t&&!(l=Ir(this.doc,l,i,r,n)).hitSide;++o);return l},moveH:Mt(function(e,t){var r=this;r.extendSelectionsBy(function(n){return r.display.shift||r.doc.extend||n.empty()?Ir(r.doc,n.head,e,t,r.options.rtlMoveVisually):e<0?n.from():n.to()},Xi)}),deleteH:Mt(function(e,t){var r=this.doc.sel,n=this.doc;r.somethingSelected()?n.replaceSelection("",null,"+delete"):zr(this,function(r){var i=Ir(n,r.head,e,t,!1);return e<0?{from:i,to:r.head}:{from:r.head,to:i}})}),findPosV:function(e,t,r,n){var i=1,o=n;t<0&&(i=-1,t=-t);for(var l=0,s=we(this.doc,e);l<t;++l){var a=ut(this,s,"div");if(null==o?o=a.left:a.left=o,(s=Er(this,a,i,r)).hitSide)break}return s},moveV:Mt(function(e,t){var r=this,n=this.doc,i=[],o=!r.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(l){if(o)return e<0?l.from():l.to();var s=ut(r,l.head,"div");null!=l.goalColumn&&(s.left=l.goalColumn),i.push(s.left);var a=Er(r,s,e,t);return"page"==t&&l==n.sel.primary()&&Wr(r,null,at(r,a,"div").top-s.top),a},Xi),i.length)for(var l=0;l<n.sel.ranges.length;l++)n.sel.ranges[l].goalColumn=i[l]}),findWordAt:function(e){var t=li(this.doc,e.line).text,r=e.ch,n=e.ch;if(t){var i=this.getHelper(e,"wordChars");(e.xRel<0||n==t.length)&&r?--r:++n;for(var o=t.charAt(r),l=lo(o,i)?function(e){return lo(e,i)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!lo(e)};r>0&&l(t.charAt(r-1));)--r;for(;n<t.length&&l(t.charAt(n));)++n}return new ve(ce(e.line,r),ce(e.line,n))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?yo(this.display.cursorDiv,"CodeMirror-overwrite"):mo(this.display.cursorDiv,"CodeMirror-overwrite"),Di(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return go()==this.display.input},scrollTo:Mt(function(e,t){null==e&&null==t||Hr(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-je(this)-this.display.barHeight,width:e.scrollWidth-je(this)-this.display.barWidth,clientHeight:Ye(this),clientWidth:_e(this)}},scrollIntoView:Mt(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ce(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)Hr(this),this.curOp.scrollToPos=e;else{var r=Nr(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(r.scrollLeft,r.scrollTop)}}),setSize:Mt(function(e,t){var r=this;function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}null!=e&&(r.display.wrapper.style.width=n(e)),null!=t&&(r.display.wrapper.style.height=n(t)),r.options.lineWrapping&&rt(this);var i=r.display.viewFrom;r.doc.iter(i,r.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Ht(r,i,"widget");break}++i}),r.curOp.forceUpdate=!0,Di(r,"refresh",this)}),operation:function(e){return St(this,e)},refresh:Mt(function(){var e=this.display.cachedTextHeight;At(this),this.curOp.forceUpdate=!0,nt(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),A(this),(null==e||Math.abs(e-pt(this.display))>.5)&&M(this),Di(this,"refresh",this)}),swapDoc:Mt(function(e){var t=this.doc;return t.cm=null,oi(this,e),nt(this),Ut(this),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Ii(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Bi(C);var Pr=C.defaults={},Rr=C.optionHandlers={};function Fr(e,t,r,n){C.defaults[e]=t,r&&(Rr[e]=n?function(e,t,n){n!=Br&&r(e,t,n)}:r)}var Br=C.Init={toString:function(){return"CodeMirror.Init"}};Fr("value","",function(e,t){e.setValue(t)},!0),Fr("mode",null,function(e,t){e.doc.modeOption=t,L(e)},!0),Fr("indentUnit",2,L,!0),Fr("indentWithTabs",!1),Fr("smartIndent",!0),Fr("tabSize",4,function(e){S(e),nt(e),At(e)},!0),Fr("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t){e.options.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),e.refresh()},!0),Fr("specialCharPlaceholder",function(e){var t=fo("span","","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t},function(e){e.refresh()},!0),Fr("electricChars",!0),Fr("rtlMoveVisually",!v),Fr("wholeLineUpdateBefore",!0),Fr("theme","default",function(e){T(e),N(e)},!0),Fr("keyMap","default",function(e,t,r){var n=en(t),i=r!=C.Init&&en(r);i&&i.detach&&i.detach(e,n),n.attach&&n.attach(e,i||null)}),Fr("extraKeys",null),Fr("lineWrapping",!1,function(e){e.options.lineWrapping?(yo(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(mo(e.display.wrapper,"CodeMirror-wrap"),O(e)),M(e),At(e),nt(e),setTimeout(function(){R(e)},100)},!0),Fr("gutters",[],function(e){D(e.options),N(e)},!0),Fr("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?K(e.display)+"px":"0",e.refresh()},!0),Fr("coverGutterNextToScrollbar",!1,function(e){R(e)},!0),Fr("scrollbarStyle","native",function(e){P(e),R(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),Fr("lineNumbers",!1,function(e){D(e.options),N(e)},!0),Fr("firstLineNumber",1,N,!0),Fr("lineNumberFormatter",function(e){return e},N,!0),Fr("showCursorWhenSelecting",!1,Ee,!0),Fr("resetSelectionOnContextMenu",!0),Fr("readOnly",!1,function(e,t){"nocursor"==t?(gr(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||Ut(e))}),Fr("disableInput",!1,function(e,t){t||Ut(e)},!0),Fr("dragDrop",!0),Fr("cursorBlinkRate",530),Fr("cursorScrollMargin",0),Fr("cursorHeight",1,Ee,!0),Fr("singleCursorHeightPerLine",!0,Ee,!0),Fr("workTime",100),Fr("workDelay",100),Fr("flattenSpans",!0,S,!0),Fr("addModeClass",!1,S,!0),Fr("pollInterval",100),Fr("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),Fr("historyEventDelay",1250),Fr("viewportMargin",10,function(e){e.refresh()},!0),Fr("maxHighlightLength",1e4,S,!0),Fr("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),Fr("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),Fr("autofocus",null);var Gr=C.modes={},Ur=C.mimeModes={};C.defineMode=function(e,t){C.defaults.mode||"null"==e||(C.defaults.mode=e),arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Gr[e]=t},C.defineMIME=function(e,t){Ur[e]=t},C.resolveMode=function(e){if("string"==typeof e&&Ur.hasOwnProperty(e))e=Ur[e];else if(e&&"string"==typeof e.name&&Ur.hasOwnProperty(e.name)){var t=Ur[e.name];"string"==typeof t&&(t={name:t}),(e=to(t,e)).name=t.name}else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return C.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},C.getMode=function(e,t){t=C.resolveMode(t);var r=Gr[t.name];if(!r)return C.getMode(e,"text/plain");var n=r(e,t);if(Vr.hasOwnProperty(t.name)){var i=Vr[t.name];for(var o in i)i.hasOwnProperty(o)&&(n.hasOwnProperty(o)&&(n["_"+o]=n[o]),n[o]=i[o])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var o in t.modeProps)n[o]=t.modeProps[o];return n},C.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),C.defineMIME("text/plain","null");var Vr=C.modeExtensions={};C.extendMode=function(e,t){ro(t,Vr.hasOwnProperty(e)?Vr[e]:Vr[e]={})},C.defineExtension=function(e,t){C.prototype[e]=t},C.defineDocExtension=function(e,t){ti.prototype[e]=t},C.defineOption=Fr;var Kr=[];C.defineInitHook=function(e){Kr.push(e)};var Xr=C.helpers={};C.registerHelper=function(e,t,r){Xr.hasOwnProperty(e)||(Xr[e]=C[e]={_global:[]}),Xr[e][t]=r},C.registerGlobalHelper=function(e,t,r,n){C.registerHelper(e,t,n),Xr[e]._global.push({pred:r,val:n})};var jr=C.copyState=function(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r},_r=C.startState=function(e,t,r){return!e.startState||e.startState(t,r)};C.innerMode=function(e,t){for(;e.innerMode;){var r=e.innerMode(t);if(!r||r.mode==e)break;t=r.state,e=r.mode}return r||{mode:e,state:t}};var Yr=C.commands={selectAll:function(e){e.setSelection(ce(e.firstLine(),0),ce(e.lastLine()),Vi)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Vi)},killLine:function(e){zr(e,function(t){if(t.empty()){var r=li(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:ce(t.head.line+1,0)}:{from:t.head,to:ce(t.head.line,r)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){zr(e,function(t){return{from:ce(t.from().line,0),to:we(e.doc,ce(t.to().line+1,0))}})},delLineLeft:function(e){zr(e,function(e){return{from:ce(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){zr(e,function(t){var r=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:r},"div"),to:t.from()}})},delWrappedLineRight:function(e){zr(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:n}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(ce(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(ce(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return Ro(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return Fo(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return function(e,t){var r,n=li(e.doc,t);for(;r=Cn(n);)n=r.find(1,!0).line,t=null;var i=di(n),o=i?i[0].level%2?Eo(n):Po(n):n.text.length;return ce(null==t?ci(n):t,o)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")},Xi)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")},Xi)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return n.ch<e.getLine(n.line).search(/\S/)?Fo(e,t.head):n},Xi)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),n=e.options.tabSize,i=0;i<r.length;i++){var o=r[i].from(),l=_i(e.getLine(o.line),o.ch,n);t.push(new Array(n-l%n+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){St(e,function(){for(var t=e.listSelections(),r=[],n=0;n<t.length;n++){var i=t[n].head,o=li(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new ce(i.line,i.ch-1)),i.ch>0)i=new ce(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),ce(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var l=li(e.doc,i.line-1).text;l&&e.replaceRange(o.charAt(0)+"\n"+l.charAt(l.length-1),ce(i.line-1,l.length-1),ce(i.line,1),"+transpose")}r.push(new ve(i,i))}e.setSelections(r)})},newlineAndIndent:function(e){St(e,function(){for(var t=e.listSelections().length,r=0;r<t;r++){var n=e.listSelections()[r];e.replaceRange("\n",n.anchor,n.head,"+input"),e.indentLine(n.from().line+1,null,!0),Ar(e)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},$r=C.keyMap={};function qr(e){for(var t,r,n,i,o=e.split(/-(?!$)/),l=(e=o[o.length-1],0);l<o.length-1;l++){var s=o[l];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))r=!0;else{if(!/^s(hift)$/i.test(s))throw new Error("Unrecognized modifier name: "+s);n=!0}}return t&&(e="Alt-"+e),r&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}$r.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},$r.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},$r.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},$r.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},$r.default=g?$r.macDefault:$r.pcDefault,C.normalizeKeyMap=function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if("..."==n){delete e[r];continue}for(var i=eo(r.split(" "),qr),o=0;o<i.length;o++){var l,s;o==i.length-1?(s=r,l=n):(s=i.slice(0,o+1).join(" "),l="...");var a=t[s];if(a){if(a!=l)throw new Error("Inconsistent bindings for "+s)}else t[s]=l}delete e[r]}for(var u in t)e[u]=t[u];return e};var Zr=C.lookupKey=function(e,t,r,n){var i=(t=en(t)).call?t.call(e,n):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&r(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Zr(e,t.fallthrough,r,n);for(var o=0;o<t.fallthrough.length;o++){var l=Zr(e,t.fallthrough[o],r,n);if(l)return l}}},Qr=C.isModifierKey=function(e){var t="string"==typeof e?e:Do[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},Jr=C.keyName=function(e,t){if(a&&34==e.keyCode&&e.char)return!1;var r=Do[e.keyCode],n=r;return null!=n&&!e.altGraphKey&&(e.altKey&&"Alt"!=r&&(n="Alt-"+n),(y?e.metaKey:e.ctrlKey)&&"Ctrl"!=r&&(n="Ctrl-"+n),(y?e.ctrlKey:e.metaKey)&&"Cmd"!=r&&(n="Cmd-"+n),!t&&e.shiftKey&&"Shift"!=r&&(n="Shift-"+n),n)};function en(e){return"string"==typeof e?$r[e]:e}C.fromTextArea=function(e,t){if(t||(t={}),t.value=e.value,!t.tabindex&&e.tabindex&&(t.tabindex=e.tabindex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var r=go();t.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}function n(){e.value=s.getValue()}if(e.form&&(Hi(e.form,"submit",n),!t.leaveSubmitMethodAlone)){var i=e.form,o=i.submit;try{var l=i.submit=function(){n(),i.submit=o,i.submit(),i.submit=l}}catch(e){}}e.style.display="none";var s=C(function(t){e.parentNode.insertBefore(t,e.nextSibling)},t);return s.save=n,s.getTextArea=function(){return e},s.toTextArea=function(){s.toTextArea=isNaN,n(),e.parentNode.removeChild(s.getWrapperElement()),e.style.display="",e.form&&(Oi(e.form,"submit",n),"function"==typeof e.form.submit&&(e.form.submit=o))},s};var tn=C.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};tn.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var r=t==e;else r=t&&(e.test?e.test(t):e(t));if(r)return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=_i(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?_i(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return _i(this.string,null,this.tabSize)-(this.lineStart?_i(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}var i=function(e){return r?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var rn=C.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e};Bi(rn),rn.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&yt(e),Fi(this,"clear")){var r=this.find();r&&Ii(this,"clear",r.from,r.to)}for(var n=null,i=null,o=0;o<this.lines.length;++o){var l=this.lines[o],s=cn(l.markedSpans,this);e&&!this.collapsed?Ht(e,ci(l),"text"):e&&(null!=s.to&&(i=ci(l)),null!=s.from&&(n=ci(l))),l.markedSpans=fn(l.markedSpans,s),null==s.from&&this.collapsed&&!Tn(this.doc,l)&&e&&ui(l,pt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(o=0;o<this.lines.length;++o){var a=Sn(this.lines[o]),u=H(a);u>e.display.maxLineLength&&(e.display.maxLine=a,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&At(e,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&He(e.doc)),e&&Ii(e,"markerCleared",e,this),t&&bt(e),this.parent&&this.parent.clear()}},rn.prototype.find=function(e,t){var r,n;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],l=cn(o.markedSpans,this);if(null!=l.from&&(r=ce(t?o:ci(o),l.from),-1==e))return r;if(null!=l.to&&(n=ce(t?o:ci(o),l.to),1==e))return n}return r&&{from:r,to:n}},rn.prototype.changed=function(){var e=this.find(-1,!0),t=this,r=this.doc.cm;e&&r&&St(r,function(){var n=e.line,i=ci(e.line),o=qe(r,i);if(o&&(tt(o),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Tn(t.doc,n)&&null!=t.height){var l=t.height;t.height=null;var s=Hn(t)-l;s&&ui(n,n.height+s)}})},rn.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=Ji(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},rn.prototype.detachLine=function(e){if(this.lines.splice(Ji(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var nn=0;function on(e,t,r,n,i){if(n&&n.shared)return function(e,t,r,n,i){(n=ro(n)).shared=!1;var o=[on(e,t,r,n,i)],l=o[0],s=n.widgetNode;return ii(e,function(e){s&&(n.widgetNode=s.cloneNode(!0)),o.push(on(e,we(e,t),we(e,r),n,i));for(var a=0;a<e.linked.length;++a)if(e.linked[a].isParent)return;l=Zi(o)}),new ln(o,l)}(e,t,r,n,i);if(e.cm&&!e.cm.curOp)return kt(e.cm,on)(e,t,r,n,i);var o=new rn(e,i),l=fe(t,r);if(n&&ro(n,o,!1),l>0||0==l&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=fo("span",[o.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Ln(e,t.line,t,r,o)||t.line!=r.line&&Ln(e,r.line,t,r,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");x=!0}o.addToHistory&&mi(e,{from:t,to:r,origin:"markText"},e.sel,NaN);var s,a=t.line,u=e.cm;if(e.iter(a,r.line+1,function(e){var n,i;u&&o.collapsed&&!u.options.lineWrapping&&Sn(e)==u.display.maxLine&&(s=!0),o.collapsed&&a!=t.line&&ui(e,0),n=e,i=new un(o,a==t.line?t.ch:null,a==r.line?r.ch:null),n.markedSpans=n.markedSpans?n.markedSpans.concat([i]):[i],i.marker.attachLine(n),++a}),o.collapsed&&e.iter(t.line,r.line+1,function(t){Tn(e,t)&&ui(t,0)}),o.clearOnEnter&&Hi(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(w=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++nn,o.atomic=!0),u){if(s&&(u.curOp.updateMaxLine=!0),o.collapsed)At(u,t.line,r.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var c=t.line;c<=r.line;c++)Ht(u,c,"text");o.atomic&&He(u.doc),Ii(u,"markerAdded",u,o)}return o}var ln=C.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};function sn(e){return e.findMarks(ce(e.first,0),e.clipPos(ce(e.lastLine())),function(e){return e.parent})}function an(e){for(var t=0;t<e.length;t++){var r=e[t],n=[r.primary.doc];ii(r.primary.doc,function(e){n.push(e)});for(var i=0;i<r.markers.length;i++){var o=r.markers[i];-1==Ji(n,o.doc)&&(o.parent=null,r.markers.splice(i--,1))}}}function un(e,t,r){this.marker=e,this.from=t,this.to=r}function cn(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function fn(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function hn(e,t){var r=xe(e,t.from.line)&&li(e,t.from.line).markedSpans,n=xe(e,t.to.line)&&li(e,t.to.line).markedSpans;if(!r&&!n)return null;var i=t.from.ch,o=t.to.ch,l=0==fe(t.from,t.to),s=function(e,t,r){if(e)for(var n,i=0;i<e.length;++i){var o=e[i],l=o.marker;if(null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==l.type&&(!r||!o.marker.insertLeft)){var s=null==o.to||(l.inclusiveRight?o.to>=t:o.to>t);(n||(n=[])).push(new un(l,o.from,s?null:o.to))}}return n}(r,i,l),a=function(e,t,r){if(e)for(var n,i=0;i<e.length;++i){var o=e[i],l=o.marker;if(null==o.to||(l.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==l.type&&(!r||o.marker.insertLeft)){var s=null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t);(n||(n=[])).push(new un(l,s?null:o.from-t,null==o.to?null:o.to-t))}}return n}(n,o,l),u=1==t.text.length,c=Zi(t.text).length+(u?i:0);if(s)for(var f=0;f<s.length;++f){if(null==(h=s[f]).to)(d=cn(a,h.marker))?u&&(h.to=null==d.to?null:d.to+c):h.to=i}if(a)for(f=0;f<a.length;++f){var h,d;if(null!=(h=a[f]).to&&(h.to+=c),null==h.from)(d=cn(s,h.marker))||(h.from=c,u&&(s||(s=[])).push(h));else h.from+=c,u&&(s||(s=[])).push(h)}s&&(s=dn(s)),a&&a!=s&&(a=dn(a));var p=[s];if(!u){var g,v=t.text.length-2;if(v>0&&s)for(f=0;f<s.length;++f)null==s[f].to&&(g||(g=[])).push(new un(s[f].marker,null,null));for(f=0;f<v;++f)p.push(g);p.push(a)}return p}function dn(e){for(var t=0;t<e.length;++t){var r=e[t];null!=r.from&&r.from==r.to&&!1!==r.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function pn(e,t){var r=function(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var n=0,i=[];n<t.text.length;++n)i.push(wi(r[n]));return i}(e,t),n=hn(e,t);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var o=r[i],l=n[i];if(o&&l)e:for(var s=0;s<l.length;++s){for(var a=l[s],u=0;u<o.length;++u)if(o[u].marker==a.marker)continue e;o.push(a)}else l&&(r[i]=l)}return r}function gn(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function vn(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function mn(e){return e.inclusiveLeft?-1:0}function yn(e){return e.inclusiveRight?1:0}function bn(e,t){var r=e.lines.length-t.lines.length;if(0!=r)return r;var n=e.find(),i=t.find(),o=fe(n.from,i.from)||mn(e)-mn(t);if(o)return-o;var l=fe(n.to,i.to)||yn(e)-yn(t);return l||t.id-e.id}function wn(e,t){var r,n=x&&e.markedSpans;if(n)for(var i,o=0;o<n.length;++o)(i=n[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!r||bn(r,i.marker)<0)&&(r=i.marker);return r}function xn(e){return wn(e,!0)}function Cn(e){return wn(e,!1)}function Ln(e,t,r,n,i){var o=li(e,t),l=x&&o.markedSpans;if(l)for(var s=0;s<l.length;++s){var a=l[s];if(a.marker.collapsed){var u=a.marker.find(0),c=fe(u.from,r)||mn(a.marker)-mn(i),f=fe(u.to,n)||yn(a.marker)-yn(i);if(!(c>=0&&f<=0||c<=0&&f>=0)&&(c<=0&&(fe(u.to,r)>0||a.marker.inclusiveRight&&i.inclusiveLeft)||c>=0&&(fe(u.from,n)<0||a.marker.inclusiveLeft&&i.inclusiveRight)))return!0}}}function Sn(e){for(var t;t=xn(e);)e=t.find(-1,!0).line;return e}function kn(e,t){var r=li(e,t),n=Sn(r);return r==n?t:ci(n)}function Mn(e,t){if(t>e.lastLine())return t;var r,n=li(e,t);if(!Tn(e,n))return t;for(;r=Cn(n);)n=r.find(1,!0).line;return ci(n)+1}function Tn(e,t){var r=x&&t.markedSpans;if(r)for(var n,i=0;i<r.length;++i)if((n=r[i]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&Nn(e,t,n))return!0}}function Nn(e,t,r){if(null==r.to){var n=r.marker.find(1,!0);return Nn(e,n.line,cn(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var i,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==r.to&&(null==i.to||i.to!=r.from)&&(i.marker.inclusiveLeft||r.marker.inclusiveRight)&&Nn(e,t,i))return!0}Bi(ln),ln.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Ii(this,"clear")}},ln.prototype.find=function(e,t){return this.primary.find(e,t)};var Wn=C.LineWidget=function(e,t,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.cm=e,this.node=t};function An(e,t,r){hi(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Wr(e,null,r)}function Hn(e){if(null!=e.height)return e.height;if(!function(e,t){if(e.contains)return e.contains(t);for(;t=t.parentNode;)if(t==e)return!0}(document.body,e.node)){var t="position: relative;";e.coverGutter&&(t+="margin-left: -"+e.cm.getGutterElement().offsetWidth+"px;"),po(e.cm.display.measure,fo("div",[e.node],null,t))}return e.height=e.node.offsetHeight}Bi(Wn),Wn.prototype.clear=function(){var e=this.cm,t=this.line.widgets,r=this.line,n=ci(r);if(null!=n&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(r.widgets=null);var o=Hn(this);St(e,function(){An(e,r,-o),Ht(e,n,"widget"),ui(r,Math.max(0,r.height-o))})}},Wn.prototype.changed=function(){var e=this.height,t=this.cm,r=this.line;this.height=null;var n=Hn(this)-e;n&&St(t,function(){t.curOp.forceUpdate=!0,An(t,r,n),ui(r,r.height+n)})};var On=C.Line=function(e,t,r){this.text=e,vn(this,t),this.height=r?r(this):1};function Dn(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";null==t[n]?t[n]=r[2]:new RegExp("(?:^|s)"+r[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+r[2])}return e}function zn(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var r=C.innerMode(e,t);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function In(e,t,r,n){for(var i=0;i<10;i++){n&&(n[0]=C.innerMode(e,r).mode);var o=e.token(t,r);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}function En(e,t,r,n){function i(e){return{start:f.start,end:f.pos,string:f.current(),type:o||null,state:e?jr(l.mode,c):c}}var o,l=e.doc,s=l.mode;t=we(l,t);var a,u=li(l,t.line),c=Ue(e,t.line,r),f=new tn(u.text,e.options.tabSize);for(n&&(a=[]);(n||f.pos<t.ch)&&!f.eol();)f.start=f.pos,o=In(s,f,c),n&&a.push(i(!0));return n?a:i()}function Pn(e,t,r,n,i,o,l){var s=r.flattenSpans;null==s&&(s=e.options.flattenSpans);var a,u=0,c=null,f=new tn(t,e.options.tabSize),h=e.options.addModeClass&&[null];for(""==t&&Dn(zn(r,n),o);!f.eol();){if(f.pos>e.options.maxHighlightLength?(s=!1,l&&Bn(e,t,n,f.pos),f.pos=t.length,a=null):a=Dn(In(r,f,n,h),o),h){var d=h[0].name;d&&(a="m-"+(a?d+" "+a:d))}if(!s||c!=a){for(;u<f.start;)i(u=Math.min(f.start,u+5e4),c);c=a}f.start=f.pos}for(;u<f.pos;){var p=Math.min(f.pos,u+5e4);i(p,c),u=p}}function Rn(e,t,r,n){var i=[e.state.modeGen],o={};Pn(e,t.text,e.doc.mode,r,function(e,t){i.push(e,t)},o,n);for(var l=0;l<e.state.overlays.length;++l){var s=e.state.overlays[l],a=1,u=0;Pn(e,t.text,s.mode,!0,function(e,t){for(var r=a;u<e;){var n=i[a];n>e&&i.splice(a,1,e,i[a+1],n),a+=2,u=Math.min(e,n)}if(t)if(s.opaque)i.splice(r,a-r,e,"cm-overlay "+t),a=r+2;else for(;r<a;r+=2){var o=i[r+1];i[r+1]=(o?o+" ":"")+"cm-overlay "+t}},o)}return{styles:i,classes:o.bgClass||o.textClass?o:null}}function Fn(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=Rn(e,t,t.stateAfter=Ue(e,ci(t)));t.styles=n.styles,n.classes?t.styleClasses=n.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.frontier&&e.doc.frontier++}return t.styles}function Bn(e,t,r,n){var i=e.doc.mode,o=new tn(t,e.options.tabSize);for(o.start=o.pos=n||0,""==t&&zn(i,r);!o.eol()&&o.pos<=e.options.maxHighlightLength;)In(i,o,r),o.start=o.pos}Bi(On),On.prototype.lineNo=function(){return ci(this)};var Gn={},Un={};function Vn(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?Un:Gn;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function Kn(e,t){var r=fo("span",null,null,o?"padding-right: .1px":null),i={pre:fo("pre",[r]),content:r,col:0,pos:0,cm:e};t.measure={};for(var l=0;l<=(t.rest?t.rest.length:0);l++){var s,a=l?t.rest[l-1]:t.line;i.pos=0,i.addToken=Xn,(n||o)&&e.getOption("lineWrapping")&&(i.addToken=jn(i.addToken)),Mo(e.display.measure)&&(s=di(a))&&(i.addToken=_n(i.addToken,s)),i.map=[],$n(a,i,Fn(e,a,t!=e.display.externalMeasured&&ci(a))),a.styleClasses&&(a.styleClasses.bgClass&&(i.bgClass=bo(a.styleClasses.bgClass,i.bgClass||"")),a.styleClasses.textClass&&(i.textClass=bo(a.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(ko(e.display.measure))),0==l?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return o&&/\bcm-tab\b/.test(i.content.lastChild.className)&&(i.content.className="cm-tab-wrap-hack"),Di(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=bo(i.pre.className,i.textClass||"")),i}function Xn(e,t,r,o,l,s,a){if(t){var u=e.cm.options.specialChars,c=!1;if(u.test(t)){m=document.createDocumentFragment();for(var f=0;;){u.lastIndex=f;var h=u.exec(t),d=h?h.index-f:t.length-f;if(d){var p=document.createTextNode(t.slice(f,f+d));n&&i<9?m.appendChild(fo("span",[p])):m.appendChild(p),e.map.push(e.pos,e.pos+d,p),e.col+=d,e.pos+=d}if(!h)break;if(f+=d+1,"\t"==h[0]){var g=e.cm.options.tabSize,v=g-e.col%g;p=m.appendChild(fo("span",qi(v),"cm-tab"));e.col+=v}else{p=e.cm.options.specialCharPlaceholder(h[0]);n&&i<9?m.appendChild(fo("span",[p])):m.appendChild(p),e.col+=1}e.map.push(e.pos,e.pos+1,p),e.pos++}}else{e.col+=t.length;var m=document.createTextNode(t);e.map.push(e.pos,e.pos+t.length,m),n&&i<9&&(c=!0),e.pos+=t.length}if(r||o||l||c||a){var y=r||"";o&&(y+=o),l&&(y+=l);var b=fo("span",[m],y,a);return s&&(b.title=s),e.content.appendChild(b)}e.content.appendChild(m)}}function jn(e){function t(e){for(var t=" ",r=0;r<e.length-2;++r)t+=r%2?" ":" ";return t+=" "}return function(r,n,i,o,l,s){e(r,n.replace(/ {3,}/g,t),i,o,l,s)}}function _n(e,t){return function(r,n,i,o,l,s){i=i?i+" cm-force-border":"cm-force-border";for(var a=r.pos,u=a+n.length;;){for(var c=0;c<t.length;c++){var f=t[c];if(f.to>a&&f.from<=a)break}if(f.to>=u)return e(r,n,i,o,l,s);e(r,n.slice(0,f.to-a),i,o,null,s),o=null,n=n.slice(f.to-a),a=f.to}}}function Yn(e,t,r,n){var i=!n&&r.widgetNode;i&&(e.map.push(e.pos,e.pos+t,i),e.content.appendChild(i)),e.pos+=t}function $n(e,t,r){var n=e.markedSpans,i=e.text,o=0;if(n)for(var l,s,a,u,c,f,h,d=i.length,p=0,g=(S=1,""),v=0;;){if(v==p){a=u=c=f=s="",h=null,v=1/0;for(var m=[],y=0;y<n.length;++y){var b=n[y],w=b.marker;b.from<=p&&(null==b.to||b.to>p)?(null!=b.to&&v>b.to&&(v=b.to,u=""),w.className&&(a+=" "+w.className),w.css&&(s=w.css),w.startStyle&&b.from==p&&(c+=" "+w.startStyle),w.endStyle&&b.to==v&&(u+=" "+w.endStyle),w.title&&!f&&(f=w.title),w.collapsed&&(!h||bn(h.marker,w)<0)&&(h=b)):b.from>p&&v>b.from&&(v=b.from),"bookmark"==w.type&&b.from==p&&w.widgetNode&&m.push(w)}if(h&&(h.from||0)==p&&(Yn(t,(null==h.to?d+1:h.to)-p,h.marker,null==h.from),null==h.to))return;if(!h&&m.length)for(y=0;y<m.length;++y)Yn(t,0,m[y])}if(p>=d)break;for(var x=Math.min(d,v);;){if(g){var C=p+g.length;if(!h){var L=C>x?g.slice(0,x-p):g;t.addToken(t,L,l?l+a:a,c,p+L.length==v?u:"",f,s)}if(C>=x){g=g.slice(x-p),p=x;break}p=C,c=""}g=i.slice(o,o=r[S++]),l=Vn(r[S++],t.cm.options)}}else for(var S=1;S<r.length;S+=2)t.addToken(t,i.slice(o,o=r[S]),Vn(r[S+1],t.cm.options))}function qn(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Zi(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Zn(e,t,r,n){function i(e){return r?r[e]:null}function o(e,r,i){!function(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),gn(e),vn(e,r);var i=n?n(e):1;i!=e.height&&ui(e,i)}(e,r,i,n),Ii(e,"change",e,t)}var l=t.from,s=t.to,a=t.text,u=li(e,l.line),c=li(e,s.line),f=Zi(a),h=i(a.length-1),d=s.line-l.line;if(qn(e,t)){for(var p=0,g=[];p<a.length-1;++p)g.push(new On(a[p],i(p),n));o(c,c.text,h),d&&e.remove(l.line,d),g.length&&e.insert(l.line,g)}else if(u==c)if(1==a.length)o(u,u.text.slice(0,l.ch)+f+u.text.slice(s.ch),h);else{for(g=[],p=1;p<a.length-1;++p)g.push(new On(a[p],i(p),n));g.push(new On(f+u.text.slice(s.ch),h,n)),o(u,u.text.slice(0,l.ch)+a[0],i(0)),e.insert(l.line+1,g)}else if(1==a.length)o(u,u.text.slice(0,l.ch)+a[0]+c.text.slice(s.ch),i(0)),e.remove(l.line+1,d);else{o(u,u.text.slice(0,l.ch)+a[0],i(0)),o(c,f+c.text.slice(s.ch),h);for(p=1,g=[];p<a.length-1;++p)g.push(new On(a[p],i(p),n));d>1&&e.remove(l.line+1,d-1),e.insert(l.line+1,g)}Ii(e,"change",e,t)}function Qn(e){this.lines=e,this.parent=null;for(var t=0,r=0;t<e.length;++t)e[t].parent=this,r+=e[t].height;this.height=r}function Jn(e){this.children=e;for(var t=0,r=0,n=0;n<e.length;++n){var i=e[n];t+=i.chunkSize(),r+=i.height,i.parent=this}this.size=t,this.height=r,this.parent=null}Qn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,n=e+t;r<n;++r){var i=this.lines[r];this.height-=i.height,(o=i).parent=null,gn(o),Ii(i,"delete")}var o;this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;e<n;++e)if(r(this.lines[e]))return!0}},Jn.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var n=this.children[r],i=n.chunkSize();if(e<i){var o=Math.min(t,i-e),l=n.height;if(n.removeInner(e,o),this.height-=l-n.height,i==o&&(this.children.splice(r--,1),n.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Qn))){var s=[];this.collapse(s),this.children=[new Qn(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,r),i.lines&&i.lines.length>50){for(;i.lines.length>50;){var l=new Qn(i.lines.splice(i.lines.length-25,25));i.height-=l.height,this.children.splice(n+1,0,l),l.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new Jn(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var r=Ji(e.parent.children,e);e.parent.children.splice(r+1,0,t)}else{var n=new Jn(e.children);n.parent=e,e.children=[n,t],e=n}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(e<o){var l=Math.min(t,o-e);if(i.iterN(e,l,r))return!0;if(0==(t-=l))break;e=0}else e-=o}}};var ei=0,ti=C.Doc=function(e,t,r){if(!(this instanceof ti))return new ti(e,t,r);null==r&&(r=0),Jn.call(this,[new Qn([new On("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=r;var n=ce(r,0);this.sel=ye(n),this.history=new pi(null),this.id=++ei,this.modeOption=t,"string"==typeof e&&(e=No(e)),Zn(this,{from:n,to:n,text:e}),Ne(this,ye(n),Vi)};ti.prototype=to(Jn.prototype,{constructor:ti,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ai(this,this.first,this.first+this.size);return!1===e?t:t.join(e||"\n")},setValue:Tt(function(e){var t=ce(this.first,0),r=this.first+this.size-1;Cr(this,{from:t,to:ce(r,li(this,r).text.length),text:No(e),origin:"setValue"},!0),Ne(this,ye(t))}),replaceRange:function(e,t,r,n){Tr(this,e,t=we(this,t),r=r?we(this,r):t,n)},getRange:function(e,t,r){var n=si(this,we(this,e),we(this,t));return!1===r?n:n.join(r||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(xe(this,e))return li(this,e)},getLineNumber:function(e){return ci(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=li(this,e)),Sn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return we(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Tt(function(e,t,r){Me(this,we(this,"number"==typeof e?ce(e,t||0):e),null,r)}),setSelection:Tt(function(e,t,r){Me(this,we(this,e),we(this,t||e),r)}),extendSelection:Tt(function(e,t,r){Le(this,we(this,e),t&&we(this,t),r)}),extendSelections:Tt(function(e,t){Se(this,function(e,t){for(var r=[],n=0;n<t.length;n++)r[n]=we(e,t[n]);return r}(this,e))}),extendSelectionsBy:Tt(function(e,t){Se(this,eo(this.sel.ranges,e),t)}),setSelections:Tt(function(e,t,r){if(e.length){for(var n=0,i=[];n<e.length;n++)i[n]=new ve(we(this,e[n].anchor),we(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Ne(this,me(i,t),r)}}),addSelection:Tt(function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new ve(we(this,e),we(this,t||e))),Ne(this,me(n,n.length-1),r)}),getSelection:function(e){for(var t,r=this.sel.ranges,n=0;n<r.length;n++){var i=si(this,r[n].from(),r[n].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||"\n")},getSelections:function(e){for(var t=[],r=this.sel.ranges,n=0;n<r.length;n++){var i=si(this,r[n].from(),r[n].to());!1!==e&&(i=i.join(e||"\n")),t[n]=i}return t},replaceSelection:function(e,t,r){for(var n=[],i=0;i<this.sel.ranges.length;i++)n[i]=e;this.replaceSelections(n,t,r||"+input")},replaceSelections:Tt(function(e,t,r){for(var n=[],i=this.sel,o=0;o<i.ranges.length;o++){var l=i.ranges[o];n[o]={from:l.from(),to:l.to(),text:No(e[o]),origin:r}}var s=t&&"end"!=t&&function(e,t,r){for(var n=[],i=ce(e.first,0),o=i,l=0;l<t.length;l++){var s=t[l],a=wr(s.from,i,o),u=wr(mr(s),i,o);if(i=s.to,o=u,"around"==r){var c=e.sel.ranges[l],f=fe(c.head,c.anchor)<0;n[l]=new ve(f?u:a,f?a:u)}else n[l]=new ve(a,a)}return new ge(n,e.sel.primIndex)}(this,n,t);for(o=n.length-1;o>=0;o--)Cr(this,n[o]);s?Te(this,s):this.cm&&Ar(this.cm)}),undo:Tt(function(){Sr(this,"undo")}),redo:Tt(function(){Sr(this,"redo")}),undoSelection:Tt(function(){Sr(this,"undo",!0)}),redoSelection:Tt(function(){Sr(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(n=0;n<e.undone.length;n++)e.undone[n].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){this.history=new pi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:xi(this.history.done),undone:xi(this.history.undone)}},setHistory:function(e){var t=this.history=new pi(this.history.maxGeneration);t.done=xi(e.done.slice(0),null,!0),t.undone=xi(e.undone.slice(0),null,!0)},addLineClass:Tt(function(e,t,r){return Dr(this,e,"gutter"==t?"gutter":"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[n]){if(vo(r).test(e[n]))return!1;e[n]+=" "+r}else e[n]=r;return!0})}),removeLineClass:Tt(function(e,t,r){return Dr(this,e,"gutter"==t?"gutter":"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[n];if(!i)return!1;if(null==r)e[n]=null;else{var o=i.match(vo(r));if(!o)return!1;var l=o.index+o[0].length;e[n]=i.slice(0,o.index)+(o.index&&l!=i.length?" ":"")+i.slice(l)||null}return!0})}),markText:function(e,t,r){return on(this,we(this,e),we(this,t),r,"range")},setBookmark:function(e,t){var r={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared};return on(this,e=we(this,e),e,r,"bookmark")},findMarksAt:function(e){var t=[],r=li(this,(e=we(this,e)).line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,r){e=we(this,e),t=we(this,t);var n=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var l=o.markedSpans;if(l)for(var s=0;s<l.length;s++){var a=l[s];i==e.line&&e.ch>a.to||null==a.from&&i!=e.line||i==t.line&&a.from>t.ch||r&&!r(a.marker)||n.push(a.marker.parent||a.marker)}++i}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var r=t.markedSpans;if(r)for(var n=0;n<r.length;++n)null!=r[n].from&&e.push(r[n].marker)}),e},posFromIndex:function(e){var t,r=this.first;return this.iter(function(n){var i=n.text.length+1;if(i>e)return t=e,!0;e-=i,++r}),we(this,ce(r,t))},indexFromPos:function(e){var t=(e=we(this,e)).ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new ti(ai(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<r&&(r=e.to);var n=new ti(ai(this,t,r),e.mode||this.modeOption,t);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.find(),o=e.clipPos(i.from),l=e.clipPos(i.to);if(fe(o,l)){var s=on(e,o,l,n.primary,n.primary.type);n.markers.push(s),s.parent=n}}}(n,sn(this)),n},unlinkDoc:function(e){if(e instanceof C&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),an(sn(this));break}}if(e.history==this.history){var r=[e.id];ii(e,function(e){r.push(e.id)},!0),e.history=new pi(null),e.history.done=xi(this.history.done,r),e.history.undone=xi(this.history.undone,r)}},iterLinkedDocs:function(e){ii(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),ti.prototype.eachLine=ti.prototype.iter;var ri="iter insert remove copy getEditor".split(" ");for(var ni in ti.prototype)ti.prototype.hasOwnProperty(ni)&&Ji(ri,ni)<0&&(C.prototype[ni]=function(e){return function(){return e.apply(this.doc,arguments)}}(ti.prototype[ni]));function ii(e,t,r){!function e(n,i,o){if(n.linked)for(var l=0;l<n.linked.length;++l){var s=n.linked[l];if(s.doc!=i){var a=o&&s.sharedHist;r&&!a||(t(s.doc,a),e(s.doc,n,a))}}}(e,null,!0)}function oi(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,M(e),L(e),e.options.lineWrapping||O(e),e.options.mode=t.modeOption,At(e)}function li(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var n=0;;++n){var i=r.children[n],o=i.chunkSize();if(t<o){r=i;break}t-=o}return r.lines[t]}function si(e,t,r){var n=[],i=t.line;return e.iter(t.line,r.line+1,function(e){var o=e.text;i==r.line&&(o=o.slice(0,r.ch)),i==t.line&&(o=o.slice(t.ch)),n.push(o),++i}),n}function ai(e,t,r){var n=[];return e.iter(t,r,function(e){n.push(e.text)}),n}function ui(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function ci(e){if(null==e.parent)return null;for(var t=e.parent,r=Ji(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var i=0;n.children[i]!=t;++i)r+=n.children[i].chunkSize();return r+t.first}function fi(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var i=e.children[n],o=i.height;if(t<o){e=i;continue e}t-=o,r+=i.chunkSize()}return r}while(!e.lines);for(n=0;n<e.lines.length;++n){var l=e.lines[n].height;if(t<l)break;t-=l}return r+n}function hi(e){for(var t=0,r=(e=Sn(e)).parent,n=0;n<r.lines.length;++n){var i=r.lines[n];if(i==e)break;t+=i.height}for(var o=r.parent;o;o=(r=o).parent)for(n=0;n<o.children.length;++n){var l=o.children[n];if(l==r)break;t+=l.height}return t}function di(e){var t=e.order;return null==t&&(t=e.order=Ko(e.text)),t}function pi(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function gi(e,t){var r={from:he(t.from),to:mr(t),text:si(e,t.from,t.to)};return bi(e,r,t.from.line,t.to.line+1),ii(e,function(e){bi(e,r,t.from.line,t.to.line+1)},!0),r}function vi(e){for(;e.length;){if(!Zi(e).ranges)break;e.pop()}}function mi(e,t,r,n){var i=e.history;i.undone.length=0;var o,l,s=+new Date;if((i.lastOp==n||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>s-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(l=i,o=i.lastOp==n?(vi(l.done),Zi(l.done)):l.done.length&&!Zi(l.done).ranges?Zi(l.done):l.done.length>1&&!l.done[l.done.length-2].ranges?(l.done.pop(),Zi(l.done)):void 0)){var a=Zi(o.changes);0==fe(t.from,t.to)&&0==fe(t.from,a.to)?a.to=mr(t):o.changes.push(gi(e,t))}else{var u=Zi(i.done);for(u&&u.ranges||yi(e.sel,i.done),o={changes:[gi(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(r),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=n,i.lastOrigin=i.lastSelOrigin=t.origin,a||Di(e,"historyAdded")}function yi(e,t){var r=Zi(t);r&&r.ranges&&r.equals(e)||t.push(e)}function bi(e,t,r,n){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,n),function(r){r.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=r.markedSpans),++o})}function wi(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function xi(e,t,r){for(var n=0,i=[];n<e.length;++n){var o=e[n];if(o.ranges)i.push(r?ge.prototype.deepCopy.call(o):o);else{var l=o.changes,s=[];i.push({changes:s});for(var a=0;a<l.length;++a){var u,c=l[a];if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var f in c)(u=f.match(/^spans_(\d+)$/))&&Ji(t,Number(u[1]))>-1&&(Zi(s)[f]=c[f],delete c[f])}}}return i}function Ci(e,t,r,n){r<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function Li(e,t,r,n){for(var i=0;i<e.length;++i){var o=e[i],l=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)Ci(o.ranges[s].anchor,t,r,n),Ci(o.ranges[s].head,t,r,n)}else{for(s=0;s<o.changes.length;++s){var a=o.changes[s];if(r<a.from.line)a.from=ce(a.from.line+n,a.from.ch),a.to=ce(a.to.line+n,a.to.ch);else if(t<=a.to.line){l=!1;break}}l||(e.splice(0,i+1),i=0)}}}function Si(e,t){var r=t.from.line,n=t.to.line,i=t.text.length-(n-r)-1;Li(e.done,r,n,i),Li(e.undone,r,n,i)}Bi(ti);var ki=C.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Mi=C.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0};function Ti(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}var Ni=C.e_stop=function(e){ki(e),Mi(e)};function Wi(e){return e.target||e.srcElement}function Ai(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),g&&e.ctrlKey&&1==t&&(t=3),t}var Hi=C.on=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={});(n[t]||(n[t]=[])).push(r)}},Oi=C.off=function(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else{var n=e._handlers&&e._handlers[t];if(!n)return;for(var i=0;i<n.length;++i)if(n[i]==r){n.splice(i,1);break}}},Di=C.signal=function(e,t){var r=e._handlers&&e._handlers[t];if(r)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)},zi=null;function Ii(e,t){var r=e._handlers&&e._handlers[t];if(r){var n,i=Array.prototype.slice.call(arguments,2);vt?n=vt.delayedCallbacks:zi?n=zi:(n=zi=[],setTimeout(Ei,0));for(var o=0;o<r.length;++o)n.push(l(r[o]))}function l(e){return function(){e.apply(null,i)}}}function Ei(){var e=zi;zi=null;for(var t=0;t<e.length;++t)e[t]()}function Pi(e,t,r){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Di(e,r||t.type,e,t),Ti(t)||t.codemirrorIgnore}function Ri(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==Ji(r,t[n])&&r.push(t[n])}function Fi(e,t){var r=e._handlers&&e._handlers[t];return r&&r.length>0}function Bi(e){e.prototype.on=function(e,t){Hi(this,e,t)},e.prototype.off=function(e,t){Oi(this,e,t)}}var Gi=30,Ui=C.Pass={toString:function(){return"CodeMirror.Pass"}},Vi={scroll:!1},Ki={origin:"*mouse"},Xi={origin:"+move"};function ji(){this.id=null}ji.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var _i=C.countColumn=function(e,t,r,n,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=n||0,l=i||0;;){var s=e.indexOf("\t",o);if(s<0||s>=t)return l+(t-o);l+=s-o,l+=r-l%r,o=s+1}};function Yi(e,t,r){for(var n=0,i=0;;){var o=e.indexOf("\t",n);-1==o&&(o=e.length);var l=o-n;if(o==e.length||i+l>=t)return n+Math.min(l,t-i);if(i+=o-n,n=o+1,(i+=r-i%r)>=t)return n}}var $i=[""];function qi(e){for(;$i.length<=e;)$i.push(Zi($i)+" ");return $i[e]}function Zi(e){return e[e.length-1]}var Qi=function(e){e.select()};function Ji(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}function eo(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function to(e,t){var r;if(Object.create)r=Object.create(e);else{var n=function(){};n.prototype=e,r=new n}return t&&ro(t,r),r}function ro(e,t,r){t||(t={});for(var n in e)!e.hasOwnProperty(n)||!1===r&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function no(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}d?Qi=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:n&&(Qi=function(e){try{e.select()}catch(e){}}),[].indexOf&&(Ji=function(e,t){return e.indexOf(t)}),[].map&&(eo=function(e,t){return e.map(t)});var io=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,oo=C.isWordChar=function(e){return/\w/.test(e)||e>"?"&&(e.toUpperCase()!=e.toLowerCase()||io.test(e))};function lo(e,t){return t?!!(t.source.indexOf("\\w")>-1&&oo(e))||t.test(e):oo(e)}function so(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ao,uo=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function co(e){return e.charCodeAt(0)>=768&&uo.test(e)}function fo(e,t,r,n){var i=document.createElement(e);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function ho(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function po(e,t){return ho(e).appendChild(t)}function go(){return document.activeElement}function vo(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}ao=document.createRange?function(e,t,r){var n=document.createRange();return n.setEnd(e,r),n.setStart(e,t),n}:function(e,t,r){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(e){return n}return n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",t),n},n&&i<11&&(go=function(){try{return document.activeElement}catch(e){return document.body}});var mo=C.rmClass=function(e,t){var r=e.className,n=vo(t).exec(r);if(n){var i=r.slice(n.index+n[0].length);e.className=r.slice(0,n.index)+(i?n[1]+i:"")}},yo=C.addClass=function(e,t){var r=e.className;vo(t).test(r)||(e.className+=(r?" ":"")+t)};function bo(e,t){for(var r=e.split(" "),n=0;n<r.length;n++)r[n]&&!vo(r[n]).test(t)&&(t+=" "+r[n]);return t}function wo(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),r=0;r<t.length;r++){var n=t[r].CodeMirror;n&&e(n)}}var xo=!1;var Co,Lo,So=function(){if(n&&i<9)return!1;var e=fo("div");return"draggable"in e||"dragDrop"in e}();function ko(e){if(null==Co){var t=fo("span","?");po(e,fo("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Co=t.offsetWidth<=1&&t.offsetHeight>2&&!(n&&i<8))}return Co?fo("span","?"):fo("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function Mo(e){if(null!=Lo)return Lo;var t=po(e,document.createTextNode("A?A")),r=ao(t,0,1).getBoundingClientRect();if(!r||r.left==r.right)return!1;var n=ao(t,1,2).getBoundingClientRect();return Lo=n.right-r.right<3}var To,No=C.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],n=e.length;t<=n;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),l=o.indexOf("\r");-1!=l?(r.push(o.slice(0,l)),t+=l+1):(r.push(o),t=i+1)}return r}:function(e){return e.split(/\r\n?|\n/)},Wo=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Ao="oncopy"in(To=fo("div"))||(To.setAttribute("oncopy","return;"),"function"==typeof To.oncopy),Ho=null;var Oo,Do={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};function zo(e){return e.level%2?e.to:e.from}function Io(e){return e.level%2?e.from:e.to}function Eo(e){var t=di(e);return t?zo(t[0]):0}function Po(e){var t=di(e);return t?Io(Zi(t)):e.text.length}function Ro(e,t){var r=li(e.doc,t),n=Sn(r);n!=r&&(t=ci(n));var i=di(n),o=i?i[0].level%2?Po(n):Eo(n):0;return ce(t,o)}function Fo(e,t){var r=Ro(e,t.line),n=li(e.doc,r.line),i=di(n);if(!i||0==i[0].level){var o=Math.max(0,n.text.search(/\S/)),l=t.line==r.line&&t.ch<=o&&t.ch;return ce(r.line,l?0:o)}return r}function Bo(e,t){Oo=null;for(var r,n=0;n<e.length;++n){var i=e[n];if(i.from<t&&i.to>t)return n;if(i.from==t||i.to==t){if(null!=r)return o=e,l=i.level,s=e[r].level,void 0,a=o[0].level,l==a||s!=a&&l<s?(i.from!=i.to&&(Oo=r),n):(i.from!=i.to&&(Oo=n),r);r=n}}var o,l,s,a;return r}function Go(e,t,r,n){if(!n)return t+r;do{t+=r}while(t>0&&co(e.text.charAt(t)));return t}function Uo(e,t,r,n){var i=di(e);if(!i)return Vo(e,t,r,n);for(var o=Bo(i,t),l=i[o],s=Go(e,t,l.level%2?-r:r,n);;){if(s>l.from&&s<l.to)return s;if(s==l.from||s==l.to)return Bo(i,s)==o?s:r>0==(l=i[o+=r]).level%2?l.to:l.from;if(!(l=i[o+=r]))return null;s=r>0==l.level%2?Go(e,l.to,-1,n):Go(e,l.from,1,n)}}function Vo(e,t,r,n){var i=t+r;if(n)for(;i>0&&co(e.text.charAt(i));)i+=r;return i<0||i>e.text.length?null:i}C.keyNames=Do,function(){for(var e=0;e<10;e++)Do[e+48]=Do[e+96]=String(e);for(e=65;e<=90;e++)Do[e]=String.fromCharCode(e);for(e=1;e<=12;e++)Do[e+111]=Do[e+63235]="F"+e}();var Ko=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,i=/[LRr]/,o=/[Lb1n]/,l=/[1n]/;function s(e,t,r){this.level=e,this.from=t,this.to=r}return function(a){if(!r.test(a))return!1;for(var u,c=a.length,f=[],h=0;h<c;++h)f.push((u=a.charCodeAt(h),y=u<=247?e.charAt(u):1424<=u&&u<=1524?"R":1536<=u&&u<=1773?t.charAt(u-1536):1774<=u&&u<=2220?"r":8192<=u&&u<=8203?"w":8204==u?"b":"L"));h=0;for(var d="L";h<c;++h){"m"==(y=f[h])?f[h]=d:d=y}h=0;for(var p="L";h<c;++h){"1"==(y=f[h])&&"r"==p?f[h]="n":i.test(y)&&(p=y,"r"==y&&(f[h]="R"))}for(h=1,d=f[0];h<c-1;++h){"+"==(y=f[h])&&"1"==d&&"1"==f[h+1]?f[h]="1":","!=y||d!=f[h+1]||"1"!=d&&"n"!=d||(f[h]=d),d=y}for(h=0;h<c;++h){if(","==(y=f[h]))f[h]="N";else if("%"==y){for(var g=h+1;g<c&&"%"==f[g];++g);for(var v=h&&"!"==f[h-1]||g<c&&"1"==f[g]?"1":"N",m=h;m<g;++m)f[m]=v;h=g-1}}for(h=0,p="L";h<c;++h){var y=f[h];"L"==p&&"1"==y?f[h]="L":i.test(y)&&(p=y)}for(h=0;h<c;++h)if(n.test(f[h])){for(g=h+1;g<c&&n.test(f[g]);++g);var b="L"==(h?f[h-1]:"L"),w="L"==(g<c?f[g]:"L");for(v=b||w?"L":"R",m=h;m<g;++m)f[m]=v;h=g-1}var x,C=[];for(h=0;h<c;)if(o.test(f[h])){var L=h;for(++h;h<c&&o.test(f[h]);++h);C.push(new s(0,L,h))}else{var S=h,k=C.length;for(++h;h<c&&"L"!=f[h];++h);for(m=S;m<h;)if(l.test(f[m])){S<m&&C.splice(k,0,new s(1,S,m));var M=m;for(++m;m<h&&l.test(f[m]);++m);C.splice(k,0,new s(2,M,m)),S=m}else++m;S<h&&C.splice(k,0,new s(1,S,h))}return 1==C[0].level&&(x=a.match(/^\s+/))&&(C[0].from=x[0].length,C.unshift(new s(0,0,x[0].length))),1==Zi(C).level&&(x=a.match(/\s+$/))&&(Zi(C).to-=x[0].length,C.push(new s(0,c-x[0].length,c))),C[0].level!=Zi(C).level&&C.push(new s(C[0].level,c,c)),C}}();return C.version="4.10.0",C});

!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),"cjs"):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],function(r){e(r,"amd")}):e(CodeMirror,"plain")}(function(e,r){e.modeURL||(e.modeURL="../mode/%N/%N.js");var o={};function n(r,o){var n=e.modes[r].dependencies;if(!n)return o();for(var t=[],i=0;i<n.length;++i)e.modes.hasOwnProperty(n[i])||t.push(n[i]);if(!t.length)return o();var d,f,u,a=(d=o,f=t.length,u=f,function(){0==--u&&d()});for(i=0;i<t.length;++i)e.requireMode(t[i],a)}e.requireMode=function(t,i){if("string"!=typeof t&&(t=t.name),e.modes.hasOwnProperty(t))return n(t,i);if(o.hasOwnProperty(t))return o[t].push(i);var d=e.modeURL.replace(/%N/g,t);if("plain"==r){var f=document.createElement("script");f.src=d;var u=document.getElementsByTagName("script")[0],a=o[t]=[i];e.on(f,"load",function(){n(t,function(){for(var e=0;e<a.length;++e)a[e]()})}),u.parentNode.insertBefore(f,u)}else"cjs"==r?(require(d),i()):"amd"==r&&requirejs([d],i)},e.autoLoadMode=function(r,o){e.modes.hasOwnProperty(o)||e.requireMode(o,function(){r.setOption("mode",r.getOption("mode"))})}});

!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("javascript",function(t,r){var n,a,i=t.indentUnit,o=r.statementIndent,c=r.jsonld,l=r.json||c,u=r.typescript,f=r.wordCharacters||/[\w$\xa1-\uffff]/,s=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),n=e("keyword c"),a=e("operator"),i={type:"atom",style:"atom"},o={if:e("if"),while:t,with:t,else:r,do:r,try:r,finally:r,return:n,break:n,continue:n,new:n,delete:n,throw:n,debugger:n,var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:a,typeof:a,instanceof:a,true:i,false:i,null:i,undefined:i,NaN:i,Infinity:i,this:e("this"),module:e("module"),class:e("class"),super:e("atom"),yield:n,export:e("export"),import:e("import"),extends:n};if(u){var c={type:"variable",style:"variable-3"},l={interface:e("interface"),extends:e("extends"),constructor:e("constructor"),public:e("public"),private:e("private"),protected:e("protected"),static:e("static"),string:c,number:c,bool:c,any:c};for(var f in l)o[f]=l[f]}return o}(),d=/[+\-*&%=<>!?|~^]/,p=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function v(e,t,r){return n=e,a=r,t}function m(e,t){var r,n=e.next();if('"'==n||"'"==n)return t.tokenize=(r=n,function(e,t){var n,a=!1;if(c&&"@"==e.peek()&&e.match(p))return t.tokenize=m,v("jsonld-keyword","meta");for(;null!=(n=e.next())&&(n!=r||a);)a=!a&&"\\"==n;return a||(t.tokenize=m),v("string","string")}),t.tokenize(e,t);if("."==n&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return v("number","number");if("."==n&&e.match(".."))return v("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return v(n);if("="==n&&e.eat(">"))return v("=>","operator");if("0"==n&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),v("number","number");if(/\d/.test(n))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),v("number","number");if("/"==n)return e.eat("*")?(t.tokenize=y,y(e,t)):e.eat("/")?(e.skipToEnd(),v("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||"sof"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(function(e){for(var t,r=!1,n=!1;null!=(t=e.next());){if(!r){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}r=!r&&"\\"==t}}(e),e.eatWhile(/[gimy]/),v("regexp","string-2")):(e.eatWhile(d),v("operator","operator",e.current()));if("`"==n)return t.tokenize=b,b(e,t);if("#"==n)return e.skipToEnd(),v("error","error");if(d.test(n))return e.eatWhile(d),v("operator","operator",e.current());if(f.test(n)){e.eatWhile(f);var a=e.current(),i=s.propertyIsEnumerable(a)&&s[a];return i&&"."!=t.lastType?v(i.type,i.style,a):v("variable","variable",a)}}function y(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=m;break}n="*"==r}return v("comment","comment")}function b(e,t){for(var r,n=!1;null!=(r=e.next());){if(!n&&("`"==r||"$"==r&&e.eat("{"))){t.tokenize=m;break}n=!n&&"\\"==r}return v("quasi","string-2",e.current())}var k="([{}])";function x(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(r<0)){for(var n=0,a=!1,i=r-1;i>=0;--i){var o=e.string.charAt(i),c=k.indexOf(o);if(c>=0&&c<3){if(!n){++i;break}if(0==--n)break}else if(c>=3&&c<6)++n;else if(f.test(o))a=!0;else{if(/["'\/]/.test(o))return;if(a&&!n){++i;break}}}a&&!n&&(t.fatArrowAt=i)}}var h={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function g(e,t,r,n,a,i){this.indented=e,this.column=t,this.type=r,this.prev=a,this.info=i,null!=n&&(this.align=n)}function w(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0;for(var n=e.context;n;n=n.prev)for(r=n.vars;r;r=r.next)if(r.name==t)return!0}var j={state:null,column:null,marked:null,cc:null};function M(){for(var e=arguments.length-1;e>=0;e--)j.cc.push(arguments[e])}function V(){return M.apply(null,arguments),!0}function E(e){function t(t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}var n=j.state;if(n.context){if(j.marked="def",t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;r.globalVars&&(n.globalVars={name:e,next:n.globalVars})}}var I={name:"this",next:{name:"arguments"}};function z(){j.state.context={prev:j.state.context,vars:j.state.localVars},j.state.localVars=I}function T(){j.state.localVars=j.state.context.vars,j.state.context=j.state.context.prev}function A(e,t){var r=function(){var r=j.state,n=r.indented;if("stat"==r.lexical.type)n=r.lexical.indented;else for(var a=r.lexical;a&&")"==a.type&&a.align;a=a.prev)n=a.indented;r.lexical=new g(n,j.stream.column(),e,null,r.lexical,t)};return r.lex=!0,r}function C(){var e=j.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function $(e){return function t(r){return r==e?V():";"==e?M():V(t)}}function q(e,t){return"var"==e?V(A("vardef",t.length),te,$(";"),C):"keyword a"==e?V(A("form"),O,q,C):"keyword b"==e?V(A("form"),q,C):"{"==e?V(A("}"),Z,C):";"==e?V():"if"==e?("else"==j.state.lexical.info&&j.state.cc[j.state.cc.length-1]==C&&j.state.cc.pop()(),V(A("form"),O,q,C,oe)):"function"==e?V(de):"for"==e?V(A("form"),ce,q,C):"variable"==e?V(A("stat"),J):"switch"==e?V(A("form"),O,A("}","switch"),$("{"),Z,C,C):"case"==e?V(O,$(":")):"default"==e?V($(":")):"catch"==e?V(A("form"),z,$("("),pe,$(")"),q,C,T):"module"==e?V(A("form"),z,ke,T,C):"class"==e?V(A("form"),ve,C):"export"==e?V(A("form"),xe,C):"import"==e?V(A("form"),he,C):M(A("stat"),O,$(";"),C)}function O(e){return P(e,!1)}function W(e){return P(e,!0)}function P(e,t){if(j.state.fatArrowAt==j.stream.start){var r=t?G:F;if("("==e)return V(z,A(")"),X(re,")"),C,$("=>"),r,T);if("variable"==e)return M(z,re,$("=>"),r,T)}var n=t?U:H;return h.hasOwnProperty(e)?V(n):"function"==e?V(de,n):"keyword c"==e?V(t?N:S):"("==e?V(A(")"),S,Ve,$(")"),C,n):"operator"==e||"spread"==e?V(t?W:O):"["==e?V(A("]"),je,C,n):"{"==e?Y(L,"}",null,n):"quasi"==e?M(B,n):V()}function S(e){return e.match(/[;\}\)\],]/)?M():M(O)}function N(e){return e.match(/[;\}\)\],]/)?M():M(W)}function H(e,t){return","==e?V(O):U(e,t,!1)}function U(e,t,r){var n=0==r?H:U,a=0==r?O:W;return"=>"==e?V(z,r?G:F,T):"operator"==e?/\+\+|--/.test(t)?V(n):"?"==t?V(O,$(":"),a):V(a):"quasi"==e?M(B,n):";"!=e?"("==e?Y(W,")","call",n):"."==e?V(K,n):"["==e?V(A("]"),S,$("]"),C,n):void 0:void 0}function B(e,t){return"quasi"!=e?M():"${"!=t.slice(t.length-2)?V(B):V(O,D)}function D(e){if("}"==e)return j.marked="string-2",j.state.tokenize=b,V(B)}function F(e){return x(j.stream,j.state),M("{"==e?q:O)}function G(e){return x(j.stream,j.state),M("{"==e?q:W)}function J(e){return":"==e?V(C,q):M(H,$(";"),C)}function K(e){if("variable"==e)return j.marked="property",V()}function L(e,t){return"variable"==e||"keyword"==j.style?(j.marked="property",V("get"==t||"set"==t?Q:R)):"number"==e||"string"==e?(j.marked=c?"property":j.style+" property",V(R)):"jsonld-keyword"==e?V(R):"["==e?V(O,$("]"),R):void 0}function Q(e){return"variable"!=e?M(R):(j.marked="property",V(de))}function R(e){return":"==e?V(W):"("==e?M(de):void 0}function X(e,t){function r(n){if(","==n){var a=j.state.lexical;return"call"==a.info&&(a.pos=(a.pos||0)+1),V(e,r)}return n==t?V():V($(t))}return function(n){return n==t?V():M(e,r)}}function Y(e,t,r){for(var n=3;n<arguments.length;n++)j.cc.push(arguments[n]);return V(A(t,r),X(e,t),C)}function Z(e){return"}"==e?V():M(q,Z)}function _(e){if(u&&":"==e)return V(ee)}function ee(e){if("variable"==e)return j.marked="variable-3",V()}function te(){return M(re,_,ae,ie)}function re(e,t){return"variable"==e?(E(t),V()):"["==e?Y(re,"]"):"{"==e?Y(ne,"}"):void 0}function ne(e,t){return"variable"!=e||j.stream.match(/^\s*:/,!1)?("variable"==e&&(j.marked="property"),V($(":"),re,ae)):(E(t),V(ae))}function ae(e,t){if("="==t)return V(W)}function ie(e){if(","==e)return V(te)}function oe(e,t){if("keyword b"==e&&"else"==t)return V(A("form","else"),q,C)}function ce(e){if("("==e)return V(A(")"),le,$(")"),C)}function le(e){return"var"==e?V(te,$(";"),fe):";"==e?V(fe):"variable"==e?V(ue):M(O,$(";"),fe)}function ue(e,t){return"in"==t||"of"==t?(j.marked="keyword",V(O)):V(H,fe)}function fe(e,t){return";"==e?V(se):"in"==t||"of"==t?(j.marked="keyword",V(O)):M(O,$(";"),se)}function se(e){")"!=e&&V(O)}function de(e,t){return"*"==t?(j.marked="keyword",V(de)):"variable"==e?(E(t),V(de)):"("==e?V(z,A(")"),X(pe,")"),C,q,T):void 0}function pe(e){return"spread"==e?V(pe):M(re,_)}function ve(e,t){if("variable"==e)return E(t),V(me)}function me(e,t){return"extends"==t?V(O,me):"{"==e?V(A("}"),ye,C):void 0}function ye(e,t){return"variable"==e||"keyword"==j.style?(j.marked="property","get"==t||"set"==t?V(be,de,ye):V(de,ye)):"*"==t?(j.marked="keyword",V(ye)):";"==e?V(ye):"}"==e?V():void 0}function be(e){return"variable"!=e?M():(j.marked="property",V())}function ke(e,t){return"string"==e?V(q):"variable"==e?(E(t),V(we)):void 0}function xe(e,t){return"*"==t?(j.marked="keyword",V(we,$(";"))):"default"==t?(j.marked="keyword",V(O,$(";"))):M(q)}function he(e){return"string"==e?V():M(ge,we)}function ge(e,t){return"{"==e?Y(ge,"}"):("variable"==e&&E(t),V())}function we(e,t){if("from"==t)return j.marked="keyword",V(O)}function je(e){return"]"==e?V():M(W,Me)}function Me(e){return"for"==e?M(Ve,$("]")):","==e?V(X(N,"]")):M(X(W,"]"))}function Ve(e){return"for"==e?V(ce,Ve):"if"==e?V(O,Ve):void 0}return C.lex=!0,{startState:function(e){var t={tokenize:m,lastType:"sof",cc:[],lexical:new g((e||0)-i,0,"block",!1),localVars:r.localVars,context:r.localVars&&{vars:r.localVars},indented:0};return r.globalVars&&"object"==typeof r.globalVars&&(t.globalVars=r.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),x(e,t)),t.tokenize!=y&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==n?r:(t.lastType="operator"!=n||"++"!=a&&"--"!=a?n:"incdec",function(e,t,r,n,a){var i=e.cc;for(j.state=e,j.stream=a,j.marked=null,j.cc=i,j.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((i.length?i.pop():l?O:q)(r,n)){for(;i.length&&i[i.length-1].lex;)i.pop()();return j.marked?j.marked:"variable"==r&&w(e,n)?"variable-2":t}}(t,r,n,a,e))},indent:function(t,n){if(t.tokenize==y)return e.Pass;if(t.tokenize!=m)return 0;var a=n&&n.charAt(0),c=t.lexical;if(!/^\s*else\b/.test(n))for(var l=t.cc.length-1;l>=0;--l){var u=t.cc[l];if(u==C)c=c.prev;else if(u!=oe)break}"stat"==c.type&&"}"==a&&(c=c.prev),o&&")"==c.type&&"stat"==c.prev.type&&(c=c.prev);var f=c.type,s=a==f;return"vardef"==f?c.indented+("operator"==t.lastType||","==t.lastType?c.info+1:0):"form"==f&&"{"==a?c.indented:"form"==f?c.indented+i:"stat"==f?c.indented+("operator"==t.lastType||","==t.lastType?o||i:0):"switch"!=c.info||s||0==r.doubleIndentSwitch?c.align?c.column+(s?0:1):c.indented+(s?0:i):c.indented+(/^(?:case|default)\b/.test(n)?i:2*i)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",lineComment:l?null:"//",fold:"brace",helperType:l?"json":"javascript",jsonldMode:c,jsonMode:l}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})});

!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("sql",function(e,t){var r=t.client||{},a=t.atoms||{false:!0,true:!0,null:!0},n=t.builtin||{},i=t.keywords||{},o=t.operatorChars||/^[*+\-%<>!=&|~^]/,s=t.support||{},l=t.hooks||{},c=t.dateSQL||{date:!0,time:!0,timestamp:!0};function u(e,t){var m,p=e.next();if(l[p]){var b=l[p](e,t);if(!1!==b)return b}if(1==s.hexNumber&&("0"==p&&e.match(/^[xX][0-9a-fA-F]+/)||("x"==p||"X"==p)&&e.match(/^'[0-9a-fA-F]+'/)))return"number";if(1==s.binaryNumber&&(("b"==p||"B"==p)&&e.match(/^'[01]+'/)||"0"==p&&e.match(/^b[01]+/)))return"number";if(p.charCodeAt(0)>47&&p.charCodeAt(0)<58)return e.match(/^[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/),1==s.decimallessFloat&&e.eat("."),"number";if("?"==p&&(e.eatSpace()||e.eol()||e.eat(";")))return"variable-3";if("'"==p||'"'==p&&s.doubleQuote)return t.tokenize=(m=p,function(e,t){for(var r,a=!1;null!=(r=e.next());){if(r==m&&!a){t.tokenize=u;break}a=!a&&"\\"==r}return"string"}),t.tokenize(e,t);if((1==s.nCharCast&&("n"==p||"N"==p)||1==s.charsetCast&&"_"==p&&e.match(/[a-z][a-z0-9]*/i))&&("'"==e.peek()||'"'==e.peek()))return"keyword";if(/^[\(\),\;\[\]]/.test(p))return null;if(s.commentSlashSlash&&"/"==p&&e.eat("/"))return e.skipToEnd(),"comment";if(s.commentHash&&"#"==p||"-"==p&&e.eat("-")&&(!s.commentSpaceRequired||e.eat(" ")))return e.skipToEnd(),"comment";if("/"==p&&e.eat("*"))return t.tokenize=d,t.tokenize(e,t);if("."!=p){if(o.test(p))return e.eatWhile(o),null;if("{"==p&&(e.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||e.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/)))return"number";e.eatWhile(/^[_\w\d]/);var h=e.current().toLowerCase();return c.hasOwnProperty(h)&&(e.match(/^( )+'[^']*'/)||e.match(/^( )+"[^"]*"/))?"number":a.hasOwnProperty(h)?"atom":n.hasOwnProperty(h)?"builtin":i.hasOwnProperty(h)?"keyword":r.hasOwnProperty(h)?"string-2":null}return 1==s.zerolessFloat&&e.match(/^(?:\d+(?:e[+-]?\d+)?)/i)?"number":1==s.ODBCdotTable&&e.match(/^[a-zA-Z_]+/)?"variable-2":void 0}function d(e,t){for(;;){if(!e.skipTo("*")){e.skipToEnd();break}if(e.next(),e.eat("/")){t.tokenize=u;break}}return"comment"}function m(e,t,r){t.context={prev:t.context,indent:e.indentation(),col:e.column(),type:r}}return{startState:function(){return{tokenize:u,context:null}},token:function(e,t){if(e.sol()&&t.context&&null==t.context.align&&(t.context.align=!1),e.eatSpace())return null;var r=t.tokenize(e,t);if("comment"==r)return r;t.context&&null==t.context.align&&(t.context.align=!0);var a,n=e.current();return"("==n?m(e,t,")"):"["==n?m(e,t,"]"):t.context&&t.context.type==n&&((a=t).indent=a.context.indent,a.context=a.context.prev),r},indent:function(t,r){var a=t.context;if(!a)return 0;var n=r.charAt(0)==a.type;return a.align?a.col+(n?0:1):a.indent+(n?0:e.indentUnit)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:s.commentSlashSlash?"//":s.commentHash?"#":null}}),function(){function t(e){for(var t;null!=(t=e.next());)if("`"==t&&!e.eat("`"))return"variable-2";return e.backUp(e.current().length-1),e.eatWhile(/\w/)?"variable-2":null}function r(e){return e.eat("@")&&(e.match(/^session\./),e.match(/^local\./),e.match(/^global\./)),e.eat("'")?(e.match(/^.*'/),"variable-2"):e.eat('"')?(e.match(/^.*"/),"variable-2"):e.eat("`")?(e.match(/^.*`/),"variable-2"):e.match(/^[0-9a-zA-Z$\.\_]+/)?"variable-2":null}function a(e){return e.eat("N")?"atom":e.match(/^[a-zA-Z.#!?]/)?"variable-2":null}var n="alter and as asc between by count create delete desc distinct drop from having in insert into is join like not on or order select set table union update values where ";function i(e){for(var t={},r=e.split(" "),a=0;a<r.length;++a)t[r[a]]=!0;return t}e.defineMIME("text/x-sql",{name:"sql",keywords:i(n+"begin"),builtin:i("bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric"),atoms:i("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:i("date time timestamp"),support:i("ODBCdotTable doubleQuote binaryNumber hexNumber")}),e.defineMIME("text/x-mssql",{name:"sql",client:i("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:i(n+"begin trigger proc view index for add constraint key primary foreign collate clustered nonclustered"),builtin:i("bigint numeric bit smallint decimal smallmoney int tinyint money float real char varchar text nchar nvarchar ntext binary varbinary image cursor timestamp hierarchyid uniqueidentifier sql_variant xml table "),atoms:i("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:i("date datetimeoffset datetime2 smalldatetime datetime time"),hooks:{"@":r}}),e.defineMIME("text/x-mysql",{name:"sql",client:i("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:i(n+"accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general get global grant grants group groupby_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:i("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:i("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:i("date time timestamp"),support:i("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":r,"`":t,"\\":a}}),e.defineMIME("text/x-mariadb",{name:"sql",client:i("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:i(n+"accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated get global grant grants group groupby_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show shutdown signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:i("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:i("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:i("date time timestamp"),support:i("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":r,"`":t,"\\":a}}),e.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:i("use select from using consistency where limit first reversed first and in insert into values using consistency ttl update set delete truncate begin batch apply create keyspace with columnfamily primary key index on drop alter type add any one quorum all local_quorum each_quorum"),builtin:i("ascii bigint blob boolean counter decimal double float int text timestamp uuid varchar varint"),atoms:i("false true"),operatorChars:/^[<>=]/,dateSQL:{},support:i("commentSlashSlash decimallessFloat"),hooks:{}}),e.defineMIME("text/x-plsql",{name:"sql",client:i("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),keywords:i("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elseif elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning returns reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),builtin:i("abs acos add_months ascii asin atan atan2 average bfile bfilename bigserial bit blob ceil character chartorowid chr clob concat convert cos cosh count dec decode deref dual dump dup_val_on_index empty error exp false float floor found glb greatest hextoraw initcap instr instrb int integer isopen last_day least lenght lenghtb ln lower lpad ltrim lub make_ref max min mlslabel mod months_between natural naturaln nchar nclob new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null number numeric nvarchar2 nvl others power rawtohex real reftohex round rowcount rowidtochar rowtype rpad rtrim serial sign signtype sin sinh smallint soundex sqlcode sqlerrm sqrt stddev string substr substrb sum sysdate tan tanh to_char text to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid unlogged upper user userenv varchar varchar2 variance varying vsize xml"),operatorChars:/^[*+\-%<>!=~]/,dateSQL:i("date time timestamp"),support:i("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")}),e.defineMIME("text/x-hive",{name:"sql",keywords:i("select alter $elem$ $key$ $value$ add after all analyze and archive as asc before between binary both bucket buckets by cascade case cast change cluster clustered clusterstatus collection column columns comment compute concatenate continue create cross cursor data database databases dbproperties deferred delete delimited desc describe directory disable distinct distribute drop else enable end escaped exclusive exists explain export extended external false fetch fields fileformat first format formatted from full function functions grant group having hold_ddltime idxproperties if import in index indexes inpath inputdriver inputformat insert intersect into is items join keys lateral left like limit lines load local location lock locks mapjoin materialized minus msck no_drop nocompress not of offline on option or order out outer outputdriver outputformat overwrite partition partitioned partitions percent plus preserve procedure purge range rcfile read readonly reads rebuild recordreader recordwriter recover reduce regexp rename repair replace restrict revoke right rlike row schema schemas semi sequencefile serde serdeproperties set shared show show_database sort sorted ssl statistics stored streamtable table tables tablesample tblproperties temporary terminated textfile then tmp to touch transform trigger true unarchive undo union uniquejoin unlock update use using utc utc_tmestamp view when where while with"),builtin:i("bool boolean long timestamp tinyint smallint bigint int float double date datetime unsigned string array struct map uniontype"),atoms:i("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:i("date timestamp"),support:i("ODBCdotTable doubleQuote binaryNumber hexNumber")})}()});

!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){var t=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),n=e.Pos,i={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function r(e,t,r,a){var c=e.getLineHandle(t.line),l=t.ch-1,f=l>=0&&i[c.text.charAt(l)]||i[c.text.charAt(++l)];if(!f)return null;var u=">"==f.charAt(1)?1:-1;if(r&&u>0!=(l==t.ch))return null;var h=e.getTokenTypeAt(n(t.line,l+1)),s=o(e,n(t.line,l+(u>0?1:0)),u,h||null,a);return null==s?null:{from:n(t.line,l),to:s&&s.pos,match:s&&s.ch==f.charAt(0),forward:u>0}}function o(e,t,r,o,a){for(var c=a&&a.maxScanLineLength||1e4,l=a&&a.maxScanLines||1e3,f=[],u=a&&a.bracketRegex?a.bracketRegex:/[(){}[\]]/,h=r>0?Math.min(t.line+l,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-l),s=t.line;s!=h;s+=r){var m=e.getLine(s);if(m){var d=r>0?0:m.length-1,g=r>0?m.length:-1;if(!(m.length>c))for(s==t.line&&(d=t.ch-(r<0?1:0));d!=g;d+=r){var p=m.charAt(d);if(u.test(p)&&(void 0===o||e.getTokenTypeAt(n(s,d+1))==o))if(">"==i[p].charAt(1)==r>0)f.push(p);else{if(!f.length)return{pos:n(s,d),ch:p};f.pop()}}}}return s-r!=(r>0?e.lastLine():e.firstLine())&&null}function a(e,i,o){for(var a=e.state.matchBrackets.maxHighlightLineLength||1e3,c=[],l=e.listSelections(),f=0;f<l.length;f++){var u=l[f].empty()&&r(e,l[f].head,!1,o);if(u&&e.getLine(u.from.line).length<=a){var h=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";c.push(e.markText(u.from,n(u.from.line,u.from.ch+1),{className:h})),u.to&&e.getLine(u.to.line).length<=a&&c.push(e.markText(u.to,n(u.to.line,u.to.ch+1),{className:h}))}}if(c.length){t&&e.state.focused&&e.display.input.focus();var s=function(){e.operation(function(){for(var e=0;e<c.length;e++)c[e].clear()})};if(!i)return s;setTimeout(s,800)}}var c=null;function l(e){e.operation(function(){c&&(c(),c=null),c=a(e,!1,e.state.matchBrackets)})}e.defineOption("matchBrackets",!1,function(t,n,i){i&&i!=e.Init&&t.off("cursorActivity",l),n&&(t.state.matchBrackets="object"==typeof n?n:{},t.on("cursorActivity",l))}),e.defineExtension("matchBrackets",function(){a(this,!0)}),e.defineExtension("findMatchingBracket",function(e,t,n){return r(this,e,t,n)}),e.defineExtension("scanForBracket",function(e,t,n,i){return o(this,e,t,n,i)})});

!function(n){"object"==typeof exports&&"object"==typeof module?n(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)}(function(n){"use strict";function o(o,e,i,t){if(i&&i.call){var l=i;i=null}else l=r(o,i,"rangeFinder");"number"==typeof e&&(e=n.Pos(e,0));var f=r(o,i,"minFoldSize");function d(n){var r=l(o,e);if(!r||r.to.line-r.from.line<f)return null;for(var i=o.findMarksAt(r.from),d=0;d<i.length;++d)if(i[d].__isFold&&"fold"!==t){if(!n)return null;r.cleared=!0,i[d].clear()}return r}var u=d(!0);if(r(o,i,"scanUp"))for(;!u&&e.line>o.firstLine();)e=n.Pos(e.line-1,0),u=d(!1);if(u&&!u.cleared&&"unfold"!==t){var a=function(n,o){var e=r(n,o,"widget");if("string"==typeof e){var i=document.createTextNode(e);(e=document.createElement("span")).appendChild(i),e.className="CodeMirror-foldmarker"}return e}(o,i);n.on(a,"mousedown",function(o){c.clear(),n.e_preventDefault(o)});var c=o.markText(u.from,u.to,{replacedWith:a,clearOnEnter:!0,__isFold:!0});c.on("clear",function(e,r){n.signal(o,"unfold",o,e,r)}),n.signal(o,"fold",o,u.from,u.to)}}n.newFoldFunction=function(n,e){return function(r,i){o(r,i,{rangeFinder:n,widget:e})}},n.defineExtension("foldCode",function(n,e,r){o(this,n,e,r)}),n.defineExtension("isFolded",function(n){for(var o=this.findMarksAt(n),e=0;e<o.length;++e)if(o[e].__isFold)return!0}),n.commands.toggleFold=function(n){n.foldCode(n.getCursor())},n.commands.fold=function(n){n.foldCode(n.getCursor(),null,"fold")},n.commands.unfold=function(n){n.foldCode(n.getCursor(),null,"unfold")},n.commands.foldAll=function(o){o.operation(function(){for(var e=o.firstLine(),r=o.lastLine();e<=r;e++)o.foldCode(n.Pos(e,0),null,"fold")})},n.commands.unfoldAll=function(o){o.operation(function(){for(var e=o.firstLine(),r=o.lastLine();e<=r;e++)o.foldCode(n.Pos(e,0),null,"unfold")})},n.registerHelper("fold","combine",function(){var n=Array.prototype.slice.call(arguments,0);return function(o,e){for(var r=0;r<n.length;++r){var i=n[r](o,e);if(i)return i}}}),n.registerHelper("fold","auto",function(n,o){for(var e=n.getHelpers(o,"fold"),r=0;r<e.length;r++){var i=e[r](n,o);if(i)return i}});var e={rangeFinder:n.fold.auto,widget:"-",minFoldSize:0,scanUp:!1};function r(n,o,r){if(o&&void 0!==o[r])return o[r];var i=n.options.foldOptions;return i&&void 0!==i[r]?i[r]:e[r]}n.defineOption("foldOptions",null)});

!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],t):t(CodeMirror)}(function(t){"use strict";t.defineOption("foldGutter",!1,function(o,e,r){r&&r!=t.Init&&(o.clearGutter(o.state.foldGutter.options.gutter),o.state.foldGutter=null,o.off("gutterClick",i),o.off("change",f),o.off("viewportChange",d),o.off("fold",u),o.off("unfold",u),o.off("swapDoc",n)),e&&(o.state.foldGutter=new function(t){this.options=t,this.from=this.to=0}(function(t){!0===t&&(t={});null==t.gutter&&(t.gutter="CodeMirror-foldgutter");null==t.indicatorOpen&&(t.indicatorOpen="CodeMirror-foldgutter-open");null==t.indicatorFolded&&(t.indicatorFolded="CodeMirror-foldgutter-folded");return t}(e)),n(o),o.on("gutterClick",i),o.on("change",f),o.on("viewportChange",d),o.on("fold",u),o.on("unfold",u),o.on("swapDoc",n))});var o=t.Pos;function e(t){if("string"==typeof t){var o=document.createElement("div");return o.className=t+" CodeMirror-guttermarker-subtle",o}return t.cloneNode(!0)}function r(r,n,i){var f=r.state.foldGutter.options,d=n;r.eachLine(n,i,function(n){var i=null;if(function(t,e){for(var r=t.findMarksAt(o(e)),n=0;n<r.length;++n)if(r[n].__isFold&&r[n].find().from.line==e)return!0}(r,d))i=e(f.indicatorFolded);else{var u=o(d,0),a=f.rangeFinder||t.fold.auto,l=a&&a(r,u);l&&l.from.line+1<l.to.line&&(i=e(f.indicatorOpen))}r.setGutterMarker(n,f.gutter,i),++d})}function n(t){var o=t.getViewport(),e=t.state.foldGutter;e&&(t.operation(function(){r(t,o.from,o.to)}),e.from=o.from,e.to=o.to)}function i(t,e,r){var n=t.state.foldGutter.options;r==n.gutter&&t.foldCode(o(e,0),n.rangeFinder)}function f(t){var o=t.state.foldGutter,e=t.state.foldGutter.options;o.from=o.to=0,clearTimeout(o.changeUpdate),o.changeUpdate=setTimeout(function(){n(t)},e.foldOnChangeTimeSpan||600)}function d(t){var o=t.state.foldGutter,e=t.state.foldGutter.options;clearTimeout(o.changeUpdate),o.changeUpdate=setTimeout(function(){var e=t.getViewport();o.from==o.to||e.from-o.to>20||o.from-e.to>20?n(t):t.operation(function(){e.from<o.from&&(r(t,e.from,o.from),o.from=e.from),e.to>o.to&&(r(t,o.to,e.to),o.to=e.to)})},e.updateViewportTimeSpan||400)}function u(t,o){var e=t.state.foldGutter,n=o.line;n>=e.from&&n<e.to&&r(t,n,n+1)}});

!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.registerHelper("fold","brace",function(r,n){var t,i=n.line,o=r.getLine(i);function l(l){for(var f=n.ch,s=0;;){var u=f<=0?-1:o.lastIndexOf(l,f-1);if(-1!=u){if(1==s&&u<n.ch)break;if(t=r.getTokenTypeAt(e.Pos(i,u+1)),!/^(comment|string)/.test(t))return u+1;f=u-1}else{if(1==s)break;s=1,f=o.length}}}var f,s="{",u="}";if(null==(f=l("{"))&&(s="[",u="]",f=l("[")),null!=f){var a,d,c=1,g=r.lastLine();e:for(var v=i;v<=g;++v)for(var p=r.getLine(v),m=v==i?f:0;;){var P=p.indexOf(s,m),k=p.indexOf(u,m);if(P<0&&(P=p.length),k<0&&(k=p.length),(m=Math.min(P,k))==p.length)break;if(r.getTokenTypeAt(e.Pos(v,m+1))==t)if(m==P)++c;else if(!--c){a=v,d=m;break e}++m}if(null!=a&&(i!=a||d!=f))return{from:e.Pos(i,f),to:e.Pos(a,d)}}}),e.registerHelper("fold","import",function(r,n){function t(n){if(n<r.firstLine()||n>r.lastLine())return null;var t=r.getTokenAt(e.Pos(n,1));if(/\S/.test(t.string)||(t=r.getTokenAt(e.Pos(n,t.end+1))),"keyword"!=t.type||"import"!=t.string)return null;for(var i=n,o=Math.min(r.lastLine(),n+10);i<=o;++i){var l=r.getLine(i).indexOf(";");if(-1!=l)return{startCh:t.end,end:e.Pos(i,l)}}}var i,o=t(n=n.line);if(!o||t(n-1)||(i=t(n-2))&&i.end.line==n-1)return null;for(var l=o.end;;){var f=t(l.line+1);if(null==f)break;l=f.end}return{from:r.clipPos(e.Pos(n,o.startCh+1)),to:l}}),e.registerHelper("fold","include",function(r,n){function t(n){if(n<r.firstLine()||n>r.lastLine())return null;var t=r.getTokenAt(e.Pos(n,1));return/\S/.test(t.string)||(t=r.getTokenAt(e.Pos(n,t.end+1))),"meta"==t.type&&"#include"==t.string.slice(0,8)?t.start+8:void 0}var i=t(n=n.line);if(null==i||null!=t(n-1))return null;for(var o=n;;){if(null==t(o+1))break;++o}return{from:e.Pos(n,i+1),to:r.clipPos(e.Pos(o))}})});

!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.registerHelper("fold","markdown",function(n,t){var r=100;function i(t){var r=n.getTokenTypeAt(e.Pos(t,0));return r&&/\bheader\b/.test(r)}function o(e,n,t){var o=n&&n.match(/^#+/);return o&&i(e)?o[0].length:(o=t&&t.match(/^[=\-]+\s*$/))&&i(e+1)?"="==t[0]?1:2:r}var f=n.getLine(t.line),l=n.getLine(t.line+1),c=o(t.line,f,l);if(c!==r){for(var u=n.lastLine(),a=t.line,d=n.getLine(a+2);a<u&&!(o(a+1,l,d)<=c);)++a,l=d,d=n.getLine(a+2);return{from:e.Pos(t.line,f.length),to:e.Pos(a,n.getLine(a).length)}}})});

!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.registerGlobalHelper("fold","comment",function(e){return e.blockCommentStart&&e.blockCommentEnd},function(t,n){var o=t.getModeAt(n),r=o.blockCommentStart,i=o.blockCommentEnd;if(r&&i){for(var f,l=n.line,c=t.getLine(l),m=n.ch,a=0;;){var d=m<=0?-1:c.lastIndexOf(r,m-1);if(-1!=d){if(1==a&&d<n.ch)return;if(/comment/.test(t.getTokenTypeAt(e.Pos(l,d+1)))){f=d+r.length;break}m=d-1}else{if(1==a)return;a=1,m=c.length}}var u,b,s=1,g=t.lastLine();e:for(var h=l;h<=g;++h)for(var k=t.getLine(h),v=h==l?f:0;;){var p=k.indexOf(r,v),C=k.indexOf(i,v);if(p<0&&(p=k.length),C<0&&(C=k.length),(v=Math.min(p,C))==k.length)break;if(v==p)++s;else if(!--s){u=h,b=v;break e}++v}if(null!=u&&(l!=u||b!=f))return{from:e.Pos(l,f),to:e.Pos(u,b)}}})});

!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineOption("fullScreen",!1,function(t,o,r){var l,i;(r==e.Init&&(r=!1),!r!=!o)&&(o?(i=(l=t).getWrapperElement(),l.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:i.style.width,height:i.style.height},i.style.width="",i.style.height="auto",i.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",l.refresh()):function(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var o=e.state.fullScreenRestore;t.style.width=o.width,t.style.height=o.height,window.scrollTo(o.scrollLeft,o.scrollTop),e.refresh()}(t))})});

var JSHINT=function(){"use strict";var e,t,n,a,i,r,s,o,l,c,u,d,f,p,h,b,m,v,g,y,x,w,k,E,T,A,M,S,L,H,j,U,O,I={"<":!0,"<=":!0,"==":!0,"===":!0,"!==":!0,"!=":!0,">":!0,">=":!0,"+":!0,"-":!0,"*":!0,"/":!0,"%":!0},C={asi:!0,bitwise:!0,boss:!0,browser:!0,couch:!0,curly:!0,debug:!0,devel:!0,dojo:!0,eqeqeq:!0,eqnull:!0,es5:!0,esnext:!0,evil:!0,expr:!0,forin:!0,funcscope:!0,globalstrict:!0,immed:!0,iterator:!0,jquery:!0,lastsemic:!0,latedef:!0,laxbreak:!0,laxcomma:!0,loopfunc:!0,mootools:!0,multistr:!0,newcap:!0,noarg:!0,node:!0,noempty:!0,nonew:!0,nonstandard:!0,nomen:!0,onevar:!0,onecase:!0,passfail:!0,plusplus:!0,proto:!0,prototypejs:!0,regexdash:!0,regexp:!0,rhino:!0,undef:!0,scripturl:!0,shadow:!0,smarttabs:!0,strict:!0,sub:!0,supernew:!0,trailing:!0,validthis:!0,withstmt:!0,white:!0,wsh:!0},N={maxlen:!1,indent:!1,maxerr:!1,predef:!1},B={bitwise:!0,forin:!0,newcap:!0,nomen:!0,plusplus:!0,regexp:!0,undef:!0,white:!0,eqeqeq:!0,onevar:!0},D={eqeq:"eqeqeq",vars:"onevar",windows:"wsh"},_={ArrayBuffer:!1,ArrayBufferView:!1,Audio:!1,addEventListener:!1,applicationCache:!1,atob:!1,blur:!1,btoa:!1,clearInterval:!1,clearTimeout:!1,close:!1,closed:!1,DataView:!1,DOMParser:!1,defaultStatus:!1,document:!1,event:!1,FileReader:!1,Float32Array:!1,Float64Array:!1,FormData:!1,focus:!1,frames:!1,getComputedStyle:!1,HTMLElement:!1,HTMLAnchorElement:!1,HTMLBaseElement:!1,HTMLBlockquoteElement:!1,HTMLBodyElement:!1,HTMLBRElement:!1,HTMLButtonElement:!1,HTMLCanvasElement:!1,HTMLDirectoryElement:!1,HTMLDivElement:!1,HTMLDListElement:!1,HTMLFieldSetElement:!1,HTMLFontElement:!1,HTMLFormElement:!1,HTMLFrameElement:!1,HTMLFrameSetElement:!1,HTMLHeadElement:!1,HTMLHeadingElement:!1,HTMLHRElement:!1,HTMLHtmlElement:!1,HTMLIFrameElement:!1,HTMLImageElement:!1,HTMLInputElement:!1,HTMLIsIndexElement:!1,HTMLLabelElement:!1,HTMLLayerElement:!1,HTMLLegendElement:!1,HTMLLIElement:!1,HTMLLinkElement:!1,HTMLMapElement:!1,HTMLMenuElement:!1,HTMLMetaElement:!1,HTMLModElement:!1,HTMLObjectElement:!1,HTMLOListElement:!1,HTMLOptGroupElement:!1,HTMLOptionElement:!1,HTMLParagraphElement:!1,HTMLParamElement:!1,HTMLPreElement:!1,HTMLQuoteElement:!1,HTMLScriptElement:!1,HTMLSelectElement:!1,HTMLStyleElement:!1,HTMLTableCaptionElement:!1,HTMLTableCellElement:!1,HTMLTableColElement:!1,HTMLTableElement:!1,HTMLTableRowElement:!1,HTMLTableSectionElement:!1,HTMLTextAreaElement:!1,HTMLTitleElement:!1,HTMLUListElement:!1,HTMLVideoElement:!1,history:!1,Int16Array:!1,Int32Array:!1,Int8Array:!1,Image:!1,length:!1,localStorage:!1,location:!1,MessageChannel:!1,MessageEvent:!1,MessagePort:!1,moveBy:!1,moveTo:!1,name:!1,navigator:!1,onbeforeunload:!0,onblur:!0,onerror:!0,onfocus:!0,onload:!0,onresize:!0,onunload:!0,open:!1,openDatabase:!1,opener:!1,Option:!1,parent:!1,print:!1,removeEventListener:!1,resizeBy:!1,resizeTo:!1,screen:!1,scroll:!1,scrollBy:!1,scrollTo:!1,sessionStorage:!1,setInterval:!1,setTimeout:!1,SharedWorker:!1,status:!1,top:!1,Uint16Array:!1,Uint32Array:!1,Uint8Array:!1,WebSocket:!1,window:!1,Worker:!1,XMLHttpRequest:!1,XMLSerializer:!1,XPathEvaluator:!1,XPathException:!1,XPathExpression:!1,XPathNamespace:!1,XPathNSResolver:!1,XPathResult:!1},q={require:!1,respond:!1,getRow:!1,emit:!1,send:!1,start:!1,sum:!1,log:!1,exports:!1,module:!1,provides:!1},R={alert:!1,confirm:!1,console:!1,Debug:!1,opera:!1,prompt:!1},F={dojo:!1,dijit:!1,dojox:!1,define:!1,require:!1},$={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"/":"\\/","\\":"\\\\"},P=["closure","exception","global","label","outer","unused","var"],J={$:!1,jQuery:!1},z={$:!1,$$:!1,Assets:!1,Browser:!1,Chain:!1,Class:!1,Color:!1,Cookie:!1,Core:!1,Document:!1,DomReady:!1,DOMReady:!1,Drag:!1,Element:!1,Elements:!1,Event:!1,Events:!1,Fx:!1,Group:!1,Hash:!1,HtmlTable:!1,Iframe:!1,IframeShim:!1,InputValidator:!1,instanceOf:!1,Keyboard:!1,Locale:!1,Mask:!1,MooTools:!1,Native:!1,Options:!1,OverText:!1,Request:!1,Scroller:!1,Slick:!1,Slider:!1,Sortables:!1,Spinner:!1,Swiff:!1,Tips:!1,Type:!1,typeOf:!1,URI:!1,Window:!1},X={__filename:!1,__dirname:!1,Buffer:!1,console:!1,exports:!1,GLOBAL:!1,global:!1,module:!1,process:!1,require:!1,setTimeout:!1,clearTimeout:!1,setInterval:!1,clearInterval:!1},V={$:!1,$$:!1,$A:!1,$F:!1,$H:!1,$R:!1,$break:!1,$continue:!1,$w:!1,Abstract:!1,Ajax:!1,Class:!1,Enumerable:!1,Element:!1,Event:!1,Field:!1,Form:!1,Hash:!1,Insertion:!1,ObjectRange:!1,PeriodicalExecuter:!1,Position:!1,Prototype:!1,Selector:!1,Template:!1,Toggle:!1,Try:!1,Autocompleter:!1,Builder:!1,Control:!1,Draggable:!1,Draggables:!1,Droppables:!1,Effect:!1,Sortable:!1,SortableObserver:!1,Sound:!1,Scriptaculous:!1},W={defineClass:!1,deserialize:!1,gc:!1,help:!1,importPackage:!1,java:!1,load:!1,loadClass:!1,print:!1,quit:!1,readFile:!1,readUrl:!1,runCommand:!1,seal:!1,serialize:!1,spawn:!1,sync:!1,toint32:!1,version:!1},Z={Array:!1,Boolean:!1,Date:!1,decodeURI:!1,decodeURIComponent:!1,encodeURI:!1,encodeURIComponent:!1,Error:!1,eval:!1,EvalError:!1,Function:!1,hasOwnProperty:!1,isFinite:!1,isNaN:!1,JSON:!1,Math:!1,Number:!1,Object:!1,parseInt:!1,parseFloat:!1,RangeError:!1,ReferenceError:!1,RegExp:!1,String:!1,SyntaxError:!1,TypeError:!1,URIError:!1},G={escape:!1,unescape:!1},Q={},K={ActiveXObject:!0,Enumerator:!0,GetObject:!0,ScriptEngine:!0,ScriptEngineBuildVersion:!0,ScriptEngineMajorVersion:!0,ScriptEngineMinorVersion:!0,VBArray:!0,WSH:!0,WScript:!0,XDomainRequest:!0};function Y(){}function ee(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function te(e,t){void 0===N[e]&&void 0===C[e]&&se("Bad option: '"+e+"'.",t)}function ne(e,t){var n;for(n in t)ee(t,n)&&(e[n]=t[n])}function ae(){h.couch&&ne(b,q),h.rhino&&ne(b,W),h.prototypejs&&ne(b,V),h.node&&(ne(b,X),h.globalstrict=!0),h.devel&&ne(b,R),h.dojo&&ne(b,F),h.browser&&ne(b,_),h.nonstandard&&ne(b,G),h.jquery&&ne(b,J),h.mootools&&ne(b,z),h.wsh&&ne(b,K),h.esnext&&E(),h.globalstrict&&!1!==h.strict&&(h.strict=!0)}function ie(e,t,n){throw{name:"JSHintError",line:t,character:n,message:e+" ("+Math.floor(t/l.length*100)+"% scanned).",raw:e}}function re(e,t,n,a){return JSHINT.undefs.push([e,t,n,a])}function se(e,t,n,a,i,r){var s,o,c;return"(end)"===(t=t||f).id&&(t=w),o=t.line||0,s=t.from||0,(c={id:"(error)",raw:e,evidence:l[o-1]||"",line:o,character:s,a:n,b:a,c:i,d:r}).reason=e.supplant(c),JSHINT.errors.push(c),h.passfail&&ie("Stopping. ",o,s),(T+=1)>=h.maxerr&&ie("Too many errors.",o,s),c}function oe(e,t,n,a,i,r,s){return se(e,{line:t,from:n},a,i,r,s)}function le(e,t,n,a,i,r){se(e,t,n,a,i,r)}function ce(e,t,n,a,i,r,s){return le(e,{line:t,from:n},a,i,r,s)}A=/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,M=/^\s*([(){}\[.,:;'"~\?\]#@]|==?=?|\/(\*(jshint|jslint|members?|global)?|=|\/)?|\*[\/=]?|\+(?:=|\++)?|-(?:=|-+)?|%=?|&[&=]?|\|[|=]?|>>?>?=?|<([\/=!]|\!(\[|--)?|<=?)?|\^=?|\!=?=?|[a-zA-Z_$][a-zA-Z0-9_$]*|[0-9]+([xX][0-9a-fA-F]+|\.[0-9]*)?([eE][+\-]?[0-9]+)?)/,S=/[\u0000-\u001f&<"\/\\\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,L=/[\u0000-\u001f&<"\/\\\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,H=/\*\/|\/\*/,j=/^([a-zA-Z_$][a-zA-Z0-9_$]*)$/,U=/^(?:javascript|jscript|ecmascript|vbscript|mocha|livescript)\s*:/i,O=/^\s*\/\*\s*falls\sthrough\s*\*\/\s*$/,"function"!=typeof Array.isArray&&(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.apply(e)}),"function"!=typeof Object.create&&(Object.create=function(e){return Y.prototype=e,new Y}),"function"!=typeof Object.keys&&(Object.keys=function(e){var t,n=[];for(t in e)ee(e,t)&&n.push(t);return n}),"function"!=typeof String.prototype.entityify&&(String.prototype.entityify=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}),"function"!=typeof String.prototype.isAlpha&&(String.prototype.isAlpha=function(){return this>="a"&&this<="z?"||this>="A"&&this<="Z?"}),"function"!=typeof String.prototype.isDigit&&(String.prototype.isDigit=function(){return this>="0"&&this<="9"}),"function"!=typeof String.prototype.supplant&&(String.prototype.supplant=function(e){return this.replace(/\{([^{}]*)\}/g,function(t,n){var a=e[n];return"string"==typeof a||"number"==typeof a?a:t})}),"function"!=typeof String.prototype.name&&(String.prototype.name=function(){return j.test(this)?this:S.test(this)?'"'+this.replace(L,function(e){var t=$[e];return t||"\\u"+("0000"+e.charCodeAt().toString(16)).slice(-4)})+'"':'"'+this+'"'});var ue,de=function(){var e,t,n,a;function i(){var t,i;return!(n>=l.length)&&(e=1,a=l[n],n+=1,(t=h.smarttabs?a.search(/ \t/):a.search(/ \t|\t /))>=0&&oe("Mixed spaces and tabs.",n,t+1),(t=(a=a.replace(/\t/g,x)).search(A))>=0&&oe("Unsafe character.",n,t),h.maxlen&&h.maxlen<a.length&&oe("Line too long.",n,a.length),(i=h.trailing&&a.match(/^(.*?)\s+$/))&&!/^\s+$/.test(a)&&oe("Trailing whitespace.",n,i[1].length+1),!0)}function r(a,i){var r,s;return s="(color)"===a||"(range)"===a?{type:a}:"(punctuator)"===a||"(identifier)"===a&&ee(Q,i)?Q[i]||Q["(error)"]:Q[a],s=Object.create(s),"(string)"!==a&&"(range)"!==a||!h.scripturl&&U.test(i)&&oe("Script URL.",n,t),"(identifier)"===a&&(s.identifier=!0,"__proto__"!==i||h.proto?"__iterator__"!==i||h.iterator?!h.nomen||"_"!==i.charAt(0)&&"_"!==i.charAt(i.length-1)||(!h.node||"."===w.id||"__dirname"!==i&&"__filename"!==i)&&oe("Unexpected {a} in '{b}'.",n,t,"dangling '_'",i):oe("'{a}' is only available in JavaScript 1.7.",n,t,i):oe("The '{a}' property is deprecated.",n,t,i)),s.value=i,s.line=n,s.character=e,s.from=t,"(endline)"!==(r=s.id)&&(m=r&&("(,=:[!&|?{};".indexOf(r.charAt(r.length-1))>=0||"return"===r||"case"===r)),s}return{init:function(e){(l="string"==typeof e?e.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n"):e)[0]&&"#!"===l[0].substr(0,2)&&(l[0]=""),n=0,i(),t=1},range:function(i,s){var o,l="";for(t=e,a.charAt(0)!==i&&ce("Expected '{a}' and instead saw '{b}'.",n,e,i,a.charAt(0));;){switch(a=a.slice(1),e+=1,o=a.charAt(0)){case"":ce("Missing '{a}'.",n,e,o);break;case s:return a=a.slice(1),e+=1,r("(range)",l);case"\\":oe("Unexpected '{a}'.",n,e,o)}l+=o}},token:function(){var s,l,c,u,d,f,p,b,v,g,x,k,E;function T(n){var i,r=n.exec(a);if(r)return p=r[0].length,i=r[1],l=i.charAt(0),a=a.substr(p),t=e+p-i.length,e+=p,i}function A(s){var l,c,u="",d=!1;function f(t){var i=parseInt(a.substr(c+1,t),16);c+=t,i>=32&&i<=126&&34!==i&&92!==i&&39!==i&&oe("Unnecessary escapement.",n,e),e+=t,l=String.fromCharCode(i)}o&&'"'!==s&&oe("Strings must use doublequote.",n,e),c=0;e:for(;;){for(;c>=a.length;){c=0;var p=n,b=t;if(!i()){ce("Unclosed string.",p,b);break e}d?d=!1:oe("Unclosed string.",p,b)}if((l=a.charAt(c))===s)return e+=1,a=a.substr(c+1),r("(string)",u);if(l<" "){if("\n"===l||"\r"===l)break;oe("Control character in string: {a}.",n,e+c,a.slice(0,c))}else if("\\"===l)switch(c+=1,e+=1,l=a.charAt(c),E=a.charAt(c+1),l){case"\\":case'"':case"/":break;case"'":o&&oe("Avoid \\'.",n,e);break;case"b":l="\b";break;case"f":l="\f";break;case"n":l="\n";break;case"r":l="\r";break;case"t":l="\t";break;case"0":l="\0",E>=0&&E<=7&&y["use strict"]&&oe("Octal literals are not allowed in strict mode.",n,e);break;case"u":f(4);break;case"v":o&&oe("Avoid \\v.",n,e),l="\v";break;case"x":o&&oe("Avoid \\x-.",n,e),f(2);break;case"":if(d=!0,h.multistr){o&&oe("Avoid EOL escapement.",n,e),l="",e-=1;break}oe("Bad escapement of EOL. Use option multistr if needed.",n,e);break;default:oe("Bad escapement.",n,e)}u+=l,e+=1,c+=1}}for(;;){if(!a)return r(i()?"(endline)":"(end)","");if(g=T(M)){if(l.isAlpha()||"_"===l||"$"===l)return r("(identifier)",g);if(l.isDigit())return isFinite(Number(g))||oe("Bad number '{a}'.",n,e,g),a.substr(0,1).isAlpha()&&oe("Missing space after '{a}'.",n,e,g),"0"===l&&((c=g.substr(1,1)).isDigit()?"."!==w.id&&oe("Don't use extra leading zeros '{a}'.",n,e,g):!o||"x"!==c&&"X"!==c||oe("Avoid 0x-. '{a}'.",n,e,g)),"."===g.substr(g.length-1)&&oe("A trailing decimal point can be confused with a dot '{a}'.",n,e,g),r("(number)",g);switch(g){case'"':case"'":return A(g);case"//":a="",w.comment=!0;break;case"/*":for(;!((f=a.search(H))>=0);)i()||ce("Unclosed comment.",n,e);e+=f+2,"/"===a.substr(f,1)&&ce("Nested comment.",n,e),a=a.substr(f+2),w.comment=!0;break;case"/*members":case"/*member":case"/*jshint":case"/*jslint":case"/*global":case"*/":return{value:g,type:"special",line:n,character:e,from:t};case"":break;case"/":if("/="===w.id&&ce("A regular expression literal can be confused with '/='.",n,t),m){for(u=0,0,p=0;;){switch(s=!0,l=a.charAt(p),p+=1,l){case"":return ce("Unclosed regular expression.",n,t),ie("Stopping.",n,t);case"/":for(u>0&&oe("{a} unterminated regular expression group(s).",n,t+p,u),l=a.substr(0,p-1),v={g:!0,i:!0,m:!0};!0===v[a.charAt(p)];)v[a.charAt(p)]=!1,p+=1;return e+=p,"/"!==(v=(a=a.substr(p)).charAt(0))&&"*"!==v||ce("Confusing regular expression.",n,t),r("(regexp)",l);case"\\":(l=a.charAt(p))<" "?oe("Unexpected control character in regular expression.",n,t+p):"<"===l&&oe("Unexpected escaped character '{a}' in regular expression.",n,t+p,l),p+=1;break;case"(":if(u+=1,s=!1,"?"===a.charAt(p))switch(p+=1,a.charAt(p)){case":":case"=":case"!":p+=1;break;default:oe("Expected '{a}' and instead saw '{b}'.",n,t+p,":",a.charAt(p))}else 1;break;case"|":s=!1;break;case")":0===u?oe("Unescaped '{a}'.",n,t+p,")"):u-=1;break;case" ":for(v=1;" "===a.charAt(p);)p+=1,v+=1;v>1&&oe("Spaces are hard to count. Use {{a}}.",n,t+p,v);break;case"[":"^"===(l=a.charAt(p))&&(p+=1,h.regexp?oe("Insecure '{a}'.",n,t+p,l):"]"===a.charAt(p)&&ce("Unescaped '{a}'.",n,t+p,"^")),"]"===l&&oe("Empty class.",n,t+p-1),x=!1,k=!1;e:do{switch(l=a.charAt(p),p+=1,l){case"[":case"^":oe("Unescaped '{a}'.",n,t+p,l),k?k=!1:x=!0;break;case"-":x&&!k?(x=!1,k=!0):k?k=!1:"]"===a.charAt(p)?k=!0:(h.regexdash!==(2===p||3===p&&"^"===a.charAt(1))&&oe("Unescaped '{a}'.",n,t+p-1,"-"),x=!0);break;case"]":k&&!h.regexdash&&oe("Unescaped '{a}'.",n,t+p-1,"-");break e;case"\\":(l=a.charAt(p))<" "?oe("Unexpected control character in regular expression.",n,t+p):"<"===l&&oe("Unexpected escaped character '{a}' in regular expression.",n,t+p,l),p+=1,/[wsd]/i.test(l)?(k&&(oe("Unescaped '{a}'.",n,t+p,"-"),k=!1),x=!1):k?k=!1:x=!0;break;case"/":oe("Unescaped '{a}'.",n,t+p-1,"/"),k?k=!1:x=!0;break;case"<":k?k=!1:x=!0;break;default:k?k=!1:x=!0}}while(l);break;case".":h.regexp&&oe("Insecure '{a}'.",n,t+p,l);break;case"]":case"?":case"{":case"}":case"+":case"*":oe("Unescaped '{a}'.",n,t+p,l)}if(s)switch(a.charAt(p)){case"?":case"+":case"*":p+=1,"?"===a.charAt(p)&&(p+=1);break;case"{":for(p+=1,((l=a.charAt(p))<"0"||l>"9")&&oe("Expected a number and instead saw '{a}'.",n,t+p,l),p+=1,b=+l;!((l=a.charAt(p))<"0"||l>"9");)p+=1,b=+l+10*b;if(d=b,","===l&&(p+=1,d=1/0,(l=a.charAt(p))>="0"&&l<="9"))for(p+=1,d=+l;!((l=a.charAt(p))<"0"||l>"9");)p+=1,d=+l+10*d;"}"!==a.charAt(p)?oe("Expected '{a}' and instead saw '{b}'.",n,t+p,"}",l):p+=1,"?"===a.charAt(p)&&(p+=1),b>d&&oe("'{a}' should not be greater than '{b}'.",n,t+p,b,d)}}return l=a.substr(0,p-1),e+=p,a=a.substr(p),r("(regexp)",l)}return r("(punctuator)",g);case"#":default:return r("(punctuator)",g)}}else{for(g="",l="";a&&a<"!";)a=a.substr(1);a&&(ce("Unexpected '{a}'.",n,e,a.substr(0,1)),a="")}}}}}();function fe(e,n){"hasOwnProperty"===e&&se("'hasOwnProperty' is a really bad name."),ee(t,e)&&!t["(global)"]&&(!0===t[e]?h.latedef&&se("'{a}' was used before it was defined.",f,e):h.shadow||"exception"===n||se("'{a}' is already defined.",f,e)),t[e]=n,t["(global)"]?(a[e]=t,ee(i,e)&&(h.latedef&&se("'{a}' was used before it was defined.",f,e),delete i[e])):g[e]=t}function pe(){var e,n,a,i,r,s,o=f.value;switch(o){case"*/":le("Unbegun comment.");break;case"/*members":case"/*member":o="/*members",d||(d={}),n=d;break;case"/*jshint":case"/*jslint":n=h,a=C;break;case"/*global":n=b;break;default:le("What?")}i=de.token();e:for(;;){for(;;){if("special"===i.type&&"*/"===i.value)break e;if("(endline)"!==i.id&&","!==i.id)break;i=de.token()}"(string)"!==i.type&&"(identifier)"!==i.type&&"/*members"!==o&&le("Bad option.",i),":"===(s=de.token()).id?(s=de.token(),n===d&&le("Expected '{a}' and instead saw '{b}'.",i,"*/",":"),"/*jshint"===o&&te(i.value,i),"indent"!==i.value||"/*jshint"!==o&&"/*jslint"!==o?"maxerr"!==i.value||"/*jshint"!==o&&"/*jslint"!==o?"maxlen"!==i.value||"/*jshint"!==o&&"/*jslint"!==o?"validthis"===i.value?t["(global)"]?le("Option 'validthis' can't be used in a global scope."):"true"===s.value||"false"===s.value?n[i.value]="true"===s.value:le("Bad option value.",s):"true"===s.value||"false"===s.value?"/*jslint"===o?(n[r=D[i.value]||i.value]="true"===s.value,void 0!==B[r]&&(n[r]=!n[r])):n[i.value]="true"===s.value:le("Bad option value.",s):(("number"!=typeof(e=+s.value)||!isFinite(e)||e<=0||Math.floor(e)!==e)&&le("Expected a small integer and instead saw '{a}'.",s,s.value),n.maxlen=e):(("number"!=typeof(e=+s.value)||!isFinite(e)||e<=0||Math.floor(e)!==e)&&le("Expected a small integer and instead saw '{a}'.",s,s.value),n.maxerr=e):(("number"!=typeof(e=+s.value)||!isFinite(e)||e<=0||Math.floor(e)!==e)&&le("Expected a small integer and instead saw '{a}'.",s,s.value),n.white=!0,n.indent=e),i=de.token()):("/*jshint"!==o&&"/*jslint"!==o||le("Missing option value.",i),n[i.value]=!1,i=s)}a&&ae()}function he(e){for(var t,n=e||0,a=0;a<=n;)(t=c[a])||(t=c[a]=de.token()),a+=1;return t}function be(t,n){switch(w.id){case"(number)":"."===f.id&&se("A dot following a number can be confused with a decimal point.",w);break;case"-":"-"!==f.id&&"--"!==f.id||se("Confusing minusses.");break;case"+":"+"!==f.id&&"++"!==f.id||se("Confusing plusses.")}for(("(string)"===w.type||w.identifier)&&(e=w.value),t&&f.id!==t&&(n?"(end)"===f.id?se("Unmatched '{a}'.",n,n.id):se("Expected '{a}' to match '{b}' from line {c} and instead saw '{d}'.",f,t,n.id,n.line,f.value):"(identifier)"===f.type&&f.value===t||se("Expected '{a}' and instead saw '{b}'.",f,t,f.value)),v=w,w=f;;){if("(end)"===(f=c.shift()||de.token()).id||"(error)"===f.id)return;if("special"===f.type)pe();else if("(endline)"!==f.id)break}}function me(n,a){var i,r=!1,s=!1;if("(end)"===f.id&&le("Unexpected early end of program.",w),be(),a&&(e="anonymous",t["(verb)"]=w.value),!0===a&&w.fud)i=w.fud();else{if(w.nud)i=w.nud();else{if("(number)"===f.type&&"."===w.id)return se("A leading decimal point can be confused with a dot: '.{a}'.",w,f.value),be(),w;le("Expected an identifier and instead saw '{a}'.",w,w.id)}for(;n<f.lbp;)r="Array"===w.value,s="Object"===w.value,i&&(i.value||i.first&&i.first.value)&&("new"!==i.value||i.first&&i.first.value&&"."===i.first.value)&&(r=!1,i.value!==w.value&&(s=!1)),be(),r&&"("===w.id&&")"===f.id&&se("Use the array literal notation [].",w),s&&"("===w.id&&")"===f.id&&se("Use the object literal notation {}.",w),w.led?i=w.led(i):le("Expected an operator and instead saw '{a}'.",w,w.id)}return i}function ve(e,t){e=e||w,t=t||f,h.white&&e.character!==t.from&&e.line===t.line&&(e.from+=e.character-e.from,se("Unexpected space after '{a}'.",e,e.value))}function ge(e,t){e=e||w,t=t||f,!h.white||e.character===t.from&&e.line===t.line||se("Unexpected space before '{a}'.",t,t.value)}function ye(e,t){e=e||w,t=t||f,h.white&&!e.comment&&e.line===t.line&&ve(e,t)}function xe(e,t){h.white&&(e=e||w,t=t||f,e.line===t.line&&e.character===t.from&&(e.from+=e.character-e.from,se("Missing space after '{a}'.",e,e.value)))}function we(e,t){e=e||w,t=t||f,h.laxbreak||e.line===t.line?h.white&&(e=e||w,t=t||f,e.character===t.from&&(e.from+=e.character-e.from,se("Missing space after '{a}'.",e,e.value))):se("Bad line breaking before '{a}'.",t,t.id)}function ke(e){var t;h.white&&"(end)"!==f.id&&(t=s+(e||0),f.from!==t&&se("Expected '{a}' to have an indentation at {b} instead at {c}.",f,f.value,t,f.from))}function Ee(e){(e=e||w).line!==f.line&&se("Line breaking error '{a}'.",e,e.value)}function Te(){w.line!==f.line?h.laxcomma||(Te.first&&(se("Comma warnings can be turned off with 'laxcomma'"),Te.first=!1),se("Bad line breaking before '{a}'.",w,f.id)):!w.comment&&w.character!==f.from&&h.white&&(w.from+=w.character-w.from,se("Unexpected space after '{a}'.",w,w.value)),be(","),xe(w,f)}function Ae(e,t){var n=Q[e];return n&&"object"==typeof n||(Q[e]=n={id:e,lbp:t,value:e}),n}function Me(e){return Ae(e,0)}function Se(e,t){var n=Me(e);return n.identifier=n.reserved=!0,n.fud=t,n}function Le(e,t){var n=Se(e,t);return n.block=!0,n}function He(e){var t=e.id.charAt(0);return(t>="a"&&t<="z"||t>="A"&&t<="Z")&&(e.identifier=e.reserved=!0),e}function je(e,t){var n=Ae(e,150);return He(n),n.nud="function"==typeof t?t:function(){return this.right=me(150),this.arity="unary","++"!==this.id&&"--"!==this.id||(h.plusplus?se("Unexpected use of '{a}'.",this,this.id):this.right.identifier&&!this.right.reserved||"."===this.right.id||"["===this.right.id||se("Bad operand.",this)),this},n}function Ue(e,t){var n=Me(e);return n.type=e,n.nud=t,n}function Oe(e,t){var n=Ue(e,t);return n.identifier=n.reserved=!0,n}function Ie(e,t){return Oe(e,function(){return"function"==typeof t&&t(this),this})}function Ce(e,t,n,a){var i=Ae(e,n);return He(i),i.led=function(i){return a||(we(v,w),xe(w,f)),"in"===e&&"!"===i.id&&se("Confusing use of '{a}'.",i,"!"),"function"==typeof t?t(i,this):(this.left=i,this.right=me(n),this)},i}function Ne(e,t){var n=Ae(e,100);return n.led=function(e){we(v,w),xe(w,f);var n=me(100);return e&&"NaN"===e.id||n&&"NaN"===n.id?se("Use the isNaN function to compare with NaN.",this):t&&t.apply(this,[e,n]),"!"===e.id&&se("Confusing use of '{a}'.",e,"!"),"!"===n.id&&se("Confusing use of '{a}'.",n,"!"),this.left=e,this.right=n,this},n}function Be(e){return e&&("(number)"===e.type&&0==+e.value||"(string)"===e.type&&""===e.value||"null"===e.type&&!h.eqnull||"true"===e.type||"false"===e.type||"undefined"===e.type)}function De(e,n){return Ae(e,20).exps=!0,Ce(e,function(e,n){if(n.left=e,!1===b[e.value]&&!0===g[e.value]["(global)"]?se("Read only.",e):e.function&&se("'{a}' is a function.",e,e.value),e){if(h.esnext&&"const"===t[e.value]&&se("Attempting to override '{a}' which is a constant",e,e.value),"."===e.id||"["===e.id)return e.left&&"arguments"!==e.left.value||se("Bad assignment.",n),n.right=me(19),n;if(e.identifier&&!e.reserved)return"exception"===t[e.value]&&se("Do not assign to the exception parameter.",e),n.right=me(19),n;e===Q.function&&se("Expected an identifier in an assignment and instead saw a function invocation.",w)}le("Bad assignment.",n)},20)}function _e(e,t,n){var a=Ae(e,n);return He(a),a.led="function"==typeof t?t:function(e){return h.bitwise&&se("Unexpected use of '{a}'.",this,this.id),this.left=e,this.right=me(n),this},a}function qe(e){return Ae(e,20).exps=!0,Ce(e,function(e,t){if(h.bitwise&&se("Unexpected use of '{a}'.",t,t.id),xe(v,w),xe(w,f),e)return"."===e.id||"["===e.id||e.identifier&&!e.reserved?(me(19),t):(e===Q.function&&se("Expected an identifier in an assignment, and instead saw a function invocation.",w),t);le("Bad assignment.",t)},20)}function Re(e,t){var n=Ae(e,150);return n.led=function(e){return h.plusplus?se("Unexpected use of '{a}'.",this,this.id):e.identifier&&!e.reserved||"."===e.id||"["===e.id||se("Bad operand.",this),this.left=e,this},n}function Fe(e){if(f.identifier)return be(),w.reserved&&!h.es5&&(e&&"undefined"===w.value||se("Expected an identifier and instead saw '{a}' (a reserved word).",w,w.id)),w.value}function $e(e){var t=Fe(e);if(t)return t;"function"===w.id&&"("===f.id?se("Missing name in function declaration."):le("Expected an identifier and instead saw '{a}'.",f,f.value)}function Pe(e){var t,n=0;if(";"===f.id&&!p)for(;;){if((t=he(n)).reach)return;if("(endline)"!==t.id){if("function"===t.id){if(!h.latedef)break;se("Inner functions should be listed at the top of the outer function.",t);break}se("Unreachable '{a}' after '{b}'.",t,t.value,e);break}n+=1}}function Je(e){var t,n=s,a=g,i=f;if(";"!==i.id){if(i.identifier&&!i.reserved&&":"===he().id&&(be(),be(":"),g=Object.create(a),fe(i.value,"label"),f.labelled||se("Label '{a}' on {b} statement.",f,i.value,f.value),U.test(i.value+":")&&se("Label '{a}' looks like a javascript url.",i,i.value),f.label=i.value,i=f),e||ke(),t=me(0,!0),!i.block){if(h.expr||t&&t.exps?h.nonew&&"("===t.id&&"new"===t.left.id&&se("Do not use 'new' for side effects."):se("Expected an assignment or function call and instead saw an expression.",w),","===f.id)return Te();";"!==f.id?h.asi||h.lastsemic&&"}"===f.id&&f.line===w.line||oe("Missing semicolon.",w.line,w.character):(ve(w,f),be(";"),xe(w,f))}return s=n,g=a,t}be(";")}function ze(e){for(var t,n=[];!f.reach&&"(end)"!==f.id;)";"===f.id?((t=he())&&"("===t.id||se("Unnecessary semicolon."),be(";")):n.push(Je(e===f.line));return n}function Xe(){for(var e,t,n;"(string)"===f.id;){if("(endline)"===(t=he(0)).id){e=1;do{n=he(e),e+=1}while("(endline)"===n.id);if(";"!==n.id){if("(string)"!==n.id&&"(number)"!==n.id&&"(regexp)"!==n.id&&!0!==n.identifier&&"}"!==n.id)break;se("Missing semicolon.",f)}else t=n}else if("}"===t.id)se("Missing semicolon.",t);else if(";"!==t.id)break;ke(),be(),y[w.value]&&se('Unnecessary directive "{a}".',w,w.value),"use strict"===w.value&&(h.newcap=!0,h.undef=!0),y[w.value]=!0,";"===t.id&&be(";")}}function Ve(e,n,a){var i,o,l,c,u,d=r,b=s,m=g;if(r=e,e&&h.funcscope||(g=Object.create(g)),xe(w,f),l=f,"{"===f.id){if(be("{"),c=w.line,"}"!==f.id){for(s+=h.indent;!e&&f.from>s;)s+=h.indent;if(a){o={};for(u in y)ee(y,u)&&(o[u]=y[u]);Xe(),h.strict&&t["(context)"]["(global)"]&&(o["use strict"]||y["use strict"]||se('Missing "use strict" statement.'))}i=ze(c),a&&(y=o),s-=h.indent,c!==f.line&&ke()}else c!==f.line&&ke();be("}",l),s=b}else e?(n&&!h.curly||se("Expected '{a}' and instead saw '{b}'.",f,"{",f.value),p=!0,s+=h.indent,i=[Je(f.line===w.line)],s-=h.indent,p=!1):le("Expected '{a}' and instead saw '{b}'.",f,"{",f.value);return t["(verb)"]=null,e&&h.funcscope||(g=m),r=d,!e||!h.noempty||i&&0!==i.length||se("Empty block."),i}function We(e){d&&"boolean"!=typeof d[e]&&se("Unexpected /*member '{a}'.",w,e),"number"==typeof u[e]?u[e]+=1:u[e]=1}function Ze(e){var t=e.value,n=e.line,a=i[t];"function"==typeof a&&(a=!1),a?a[a.length-1]!==n&&a.push(n):(a=[n],i[t]=a)}function Ge(){var e=Fe(!0);return e||("(string)"===f.id?(e=f.value,be()):"(number)"===f.id&&(e=f.value.toString(),be())),e}function Qe(a,i){var r,s=h,o=g;return h=Object.create(h),g=Object.create(g),r=t={"(name)":a||'"'+e+'"',"(line)":f.line,"(context)":t,"(breakage)":0,"(loopage)":0,"(scope)":g,"(statement)":i},w.funct=t,n.push(t),a&&fe(a,"function"),t["(params)"]=function(){var e,t=f,n=[];if(be("("),ye(),")"!==f.id)for(;;){if(e=$e(!0),n.push(e),fe(e,"parameter"),","!==f.id)return be(")",t),ye(v,w),n;Te()}else be(")")}(),Ve(!1,!1,!0),g=o,h=s,t["(last)"]=w.line,t=t["(context)"],r}Ue("(number)",function(){return this}),Ue("(string)",function(){return this}),Q["(identifier)"]={type:"(identifier)",lbp:0,identifier:!0,nud:function(){var a,i=this.value,r=g[i];if("function"==typeof r?r=void 0:"boolean"==typeof r&&(a=t,t=n[0],fe(i,"var"),r=t,t=a),t===r)switch(t[i]){case"unused":t[i]="var";break;case"unction":t[i]="function",this.function=!0;break;case"function":this.function=!0;break;case"label":se("'{a}' is a statement label.",w,i)}else if(t["(global)"])h.undef&&"boolean"!=typeof b[i]&&("typeof"!==e&&"delete"!==e||f&&("."===f.value||"["===f.value))&&re(t,"'{a}' is not defined.",w,i),Ze(w);else switch(t[i]){case"closure":case"function":case"var":case"unused":se("'{a}' used out of scope.",w,i);break;case"label":se("'{a}' is a statement label.",w,i);break;case"outer":case"global":break;default:if(!0===r)t[i]=!0;else if(null===r)se("'{a}' is not allowed.",w,i),Ze(w);else if("object"!=typeof r)h.undef&&("typeof"!==e&&"delete"!==e||f&&("."===f.value||"["===f.value))&&re(t,"'{a}' is not defined.",w,i),t[i]=!0,Ze(w);else switch(r[i]){case"function":case"unction":this.function=!0,r[i]="closure",t[i]=r["(global)"]?"global":"outer";break;case"var":case"unused":r[i]="closure",t[i]=r["(global)"]?"global":"outer";break;case"closure":case"parameter":t[i]=r["(global)"]?"global":"outer";break;case"label":se("'{a}' is a statement label.",w,i)}}return this},led:function(){le("Expected an operator and instead saw '{a}'.",f,f.value)}},Ue("(regexp)",function(){return this}),Me("(endline)"),Me("(begin)"),Me("(end)").reach=!0,Me("</").reach=!0,Me("<!"),Me("\x3c!--"),Me("--\x3e"),Me("(error)").reach=!0,Me("}").reach=!0,Me(")"),Me("]"),Me('"').reach=!0,Me("'").reach=!0,Me(";"),Me(":").reach=!0,Me(","),Me("#"),Me("@"),Oe("else"),Oe("case").reach=!0,Oe("catch"),Oe("default").reach=!0,Oe("finally"),Ie("arguments",function(e){y["use strict"]&&t["(global)"]&&se("Strict violation.",e)}),Ie("eval"),Ie("false"),Ie("Infinity"),Ie("NaN"),Ie("null"),Ie("this",function(e){y["use strict"]&&!h.validthis&&(t["(statement)"]&&t["(name)"].charAt(0)>"Z"||t["(global)"])&&se("Possible strict violation.",e)}),Ie("true"),Ie("undefined"),De("=",0),De("+=",0),De("-=",0),De("*=",0),De("/=",0).nud=function(){le("A regular expression literal can be confused with '/='.")},De("%=",0),qe("&="),qe("|="),qe("^="),qe("<<="),qe(">>="),qe(">>>="),Ce("?",function(e,t){return t.left=e,t.right=me(10),be(":"),t.else=me(10),t},30),Ce("||","or",40),Ce("&&","and",50),_e("|","bitor",70),_e("^","bitxor",80),_e("&","bitand",90),Ne("==",function(e,t){return!(h.eqnull&&("null"===e.value||"null"===t.value))&&h.eqeqeq?se("Expected '{a}' and instead saw '{b}'.",this,"===","=="):Be(e)?se("Use '{a}' to compare with '{b}'.",this,"===",e.value):Be(t)&&se("Use '{a}' to compare with '{b}'.",this,"===",t.value),this}),Ne("==="),Ne("!=",function(e,t){return!(h.eqnull&&("null"===e.value||"null"===t.value))&&h.eqeqeq?se("Expected '{a}' and instead saw '{b}'.",this,"!==","!="):Be(e)?se("Use '{a}' to compare with '{b}'.",this,"!==",e.value):Be(t)&&se("Use '{a}' to compare with '{b}'.",this,"!==",t.value),this}),Ne("!=="),Ne("<"),Ne(">"),Ne("<="),Ne(">="),_e("<<","shiftleft",120),_e(">>","shiftright",120),_e(">>>","shiftrightunsigned",120),Ce("in","in",120),Ce("instanceof","instanceof",120),Ce("+",function(e,t){var n=me(130);return e&&n&&"(string)"===e.id&&"(string)"===n.id?(e.value+=n.value,e.character=n.character,!h.scripturl&&U.test(e.value)&&se("JavaScript URL.",e),e):(t.left=e,t.right=n,t)},130),je("+","num"),je("+++",function(){return se("Confusing pluses."),this.right=me(150),this.arity="unary",this}),Ce("+++",function(e){return se("Confusing pluses."),this.left=e,this.right=me(130),this},130),Ce("-","sub",130),je("-","neg"),je("---",function(){return se("Confusing minuses."),this.right=me(150),this.arity="unary",this}),Ce("---",function(e){return se("Confusing minuses."),this.left=e,this.right=me(130),this},130),Ce("*","mult",140),Ce("/","div",140),Ce("%","mod",140),Re("++"),je("++","preinc"),Q["++"].exps=!0,Re("--"),je("--","predec"),Q["--"].exps=!0,je("delete",function(){var e=me(0);return(!e||"."!==e.id&&"["!==e.id)&&se("Variables should not be deleted."),this.first=e,this}).exps=!0,je("~",function(){return h.bitwise&&se("Unexpected '{a}'.",this,"~"),me(150),this}),je("!",function(){return this.right=me(150),this.arity="unary",!0===I[this.right.id]&&se("Confusing use of '{a}'.",this,"!"),this}),je("typeof","typeof"),je("new",function(){var e,t=me(155);if(t&&"function"!==t.id)if(t.identifier)switch(t.new=!0,t.value){case"Number":case"String":case"Boolean":case"Math":case"JSON":se("Do not use {a} as a constructor.",w,t.value);break;case"Function":h.evil||se("The Function constructor is eval.");break;case"Date":case"RegExp":break;default:"function"!==t.id&&(e=t.value.substr(0,1),h.newcap&&(e<"A"||e>"Z")&&se("A constructor name should start with an uppercase letter.",w))}else"."!==t.id&&"["!==t.id&&"("!==t.id&&se("Bad constructor.",w);else h.supernew||se("Weird construction. Delete 'new'.",this);return ve(w,f),"("===f.id||h.supernew||se("Missing '()' invoking a constructor."),this.first=t,this}),Q.new.exps=!0,je("void").exps=!0,Ce(".",function(e,t){ve(v,w),ge();var n=$e();return"string"==typeof n&&We(n),t.left=e,t.right=n,!e||"arguments"!==e.value||"callee"!==n&&"caller"!==n?h.evil||!e||"document"!==e.value||"write"!==n&&"writeln"!==n||se("document.write can be a form of eval.",e):h.noarg?se("Avoid arguments.{a}.",e,n):y["use strict"]&&le("Strict violation."),h.evil||"eval"!==n&&"execScript"!==n||se("eval is evil."),t},160,!0),Ce("(",function(e,t){"}"!==v.id&&")"!==v.id&&ge(v,w),ye(),h.immed&&!e.immed&&"function"===e.id&&se("Wrap an immediate function invocation in parentheses to assist the reader in understanding that the expression is the result of a function, and not the function itself.");var n=0,a=[];if(e&&"(identifier)"===e.type&&e.value.match(/^[A-Z]([A-Z0-9_$]*[a-z][A-Za-z0-9_$]*)?$/)&&"Number"!==e.value&&"String"!==e.value&&"Boolean"!==e.value&&"Date"!==e.value&&("Math"===e.value?se("Math is not a function.",e):h.newcap&&se("Missing 'new' prefix when invoking a constructor.",e)),")"!==f.id)for(;a[a.length]=me(10),n+=1,","===f.id;)Te();return be(")"),ye(v,w),"object"==typeof e&&("parseInt"===e.value&&1===n&&se("Missing radix parameter.",e),h.evil||("eval"===e.value||"Function"===e.value||"execScript"===e.value?se("eval is evil.",e):!a[0]||"(string)"!==a[0].id||"setTimeout"!==e.value&&"setInterval"!==e.value||se("Implied eval is evil. Pass a function instead of a string.",e)),e.identifier||"."===e.id||"["===e.id||"("===e.id||"&&"===e.id||"||"===e.id||"?"===e.id||se("Bad invocation.",e)),t.left=e,t},155,!0).exps=!0,je("(",function(){ye(),"function"===f.id&&(f.immed=!0);var e=me(0);return be(")",this),ye(v,w),h.immed&&"function"===e.id&&("("===f.id||"."===f.id&&("call"===he().value||"apply"===he().value)?se("Move the invocation into the parens that contain the function.",f):se("Do not wrap function literals in parens unless they are to be immediately invoked.",this)),e}),Ce("[",function(e,t){ge(v,w),ye();var n,a=me(0);return a&&"(string)"===a.type&&(h.evil||"eval"!==a.value&&"execScript"!==a.value||se("eval is evil.",t),We(a.value),!h.sub&&j.test(a.value)&&((n=Q[a.value])&&n.reserved||se("['{a}'] is better written in dot notation.",a,a.value))),be("]",t),ye(v,w),t.left=e,t.right=a,t},160,!0),je("[",function(){var e=w.line!==f.line;for(this.first=[],e&&(s+=h.indent,f.from===s+h.indent&&(s+=h.indent));"(end)"!==f.id;){for(;","===f.id;)se("Extra comma."),be(",");if("]"===f.id)break;if(e&&w.line!==f.line&&ke(),this.first.push(me(10)),","!==f.id)break;if(Te(),"]"===f.id&&!h.es5){se("Extra comma.",w);break}}return e&&(s-=h.indent,ke()),be("]",this),this}),(ue=Me("{")).nud=function(){var e,t,n,a,i,r,o,l,c,u={};for((e=w.line!==f.line)&&(s+=h.indent,f.from===s+h.indent&&(s+=h.indent));"}"!==f.id;){if(e&&ke(),"get"===f.value&&":"!==he().id)be("get"),h.es5||le("get/set are ES5 features."),(t=Ge())||le("Missing property name."),u[c=t]&&ee(u,c)?(u[c].basic||u[c].getter)&&se("Duplicate member '{a}'.",f,t):u[c]={},u[c].getter=!0,u[c].getterToken=w,a=f,ve(w,f),(n=Qe()["(params)"])&&se("Unexpected parameter '{a}' in get {b} function.",a,n[0],t),ve(w,f);else if("set"===f.value&&":"!==he().id)be("set"),h.es5||le("get/set are ES5 features."),(t=Ge())||le("Missing property name."),l=f,u[o=t]&&ee(u,o)?(u[o].basic||u[o].setter)&&se("Duplicate member '{a}'.",f,t):u[o]={},u[o].setter=!0,u[o].setterToken=l,a=f,ve(w,f),(n=Qe()["(params)"])&&1===n.length||se("Expected a single parameter in set {a} function.",a,t);else{if(t=Ge(),r=f,u[i=t]&&ee(u,i)?se("Duplicate member '{a}'.",f,t):u[i]={},u[i].basic=!0,u[i].basicToken=r,"string"!=typeof t)break;be(":"),xe(w,f),me(10)}if(We(t),","!==f.id)break;Te(),","===f.id?se("Extra comma.",w):"}"!==f.id||h.es5||se("Extra comma.",w)}if(e&&(s-=h.indent,ke()),be("}",this),h.es5)for(var d in u)ee(u,d)&&u[d].setter&&!u[d].getter&&se("Setter is defined without getter.",u[d].setterToken);return this},ue.fud=function(){le("Expected to see a statement and instead saw a block.",w)},E=function(){Se("const",function(e){var n,a,i;for(this.first=[];(xe(w,f),n=$e(),"const"===t[n]&&se("const '"+n+"' has already been declared"),t["(global)"]&&!1===b[n]&&se("Redefinition of '{a}'.",w,n),fe(n,"const"),!e)&&(a=w,this.first.push(w),"="!==f.id&&se("const '{a}' is initialized to 'undefined'.",w,n),"="===f.id&&(xe(w,f),be("="),xe(w,f),"undefined"===f.id&&se("It is not necessary to initialize '{a}' to 'undefined'.",w,n),"="===he(0).id&&f.identifier&&le("Constant {a} was not declared correctly.",f,f.value),i=me(0),a.first=i),","===f.id);)Te();return this}).exps=!0};var Ke,Ye=Se("var",function(e){var n,a,i;for(t["(onevar)"]&&h.onevar?se("Too many var statements."):t["(global)"]||(t["(onevar)"]=!0),this.first=[];(xe(w,f),n=$e(),h.esnext&&"const"===t[n]&&se("const '"+n+"' has already been declared"),t["(global)"]&&!1===b[n]&&se("Redefinition of '{a}'.",w,n),fe(n,"unused"),!e)&&(a=w,this.first.push(w),"="===f.id&&(xe(w,f),be("="),xe(w,f),"undefined"===f.id&&se("It is not necessary to initialize '{a}' to 'undefined'.",w,n),"="===he(0).id&&f.identifier&&le("Variable {a} was not declared correctly.",f,f.value),i=me(0),a.first=i),","===f.id);)Te();return this});Ye.exps=!0,Le("function",function(){r&&se("Function declarations should not be placed in blocks. Use a function expression or move the statement to the top of the outer function.",w);var e=$e();return h.esnext&&"const"===t[e]&&se("const '"+e+"' has already been declared"),ve(w,f),fe(e,"unction"),Qe(e,!0),"("===f.id&&f.line===w.line&&le("Function declarations are not invocable. Wrap the whole function invocation in parens."),this}),je("function",function(){var e=Fe();return e?ve(w,f):xe(w,f),Qe(e),!h.loopfunc&&t["(loopage)"]&&se("Don't make functions within a loop."),this}),Le("if",function(){var e=f;return be("("),xe(this,e),ye(),me(20),"="===f.id&&(h.boss||se("Expected a conditional expression and instead saw an assignment."),be("="),me(20)),be(")",e),ye(v,w),Ve(!0,!0),"else"===f.id&&(xe(w,f),be("else"),"if"===f.id||"switch"===f.id?Je(!0):Ve(!0,!0)),this}),Le("try",function(){var e,t,n;return Ve(!1),"catch"===f.id&&(be("catch"),xe(w,f),be("("),n=g,g=Object.create(n),t=f.value,"(identifier)"!==f.type?se("Expected an identifier and instead saw '{a}'.",f,t):fe(t,"exception"),be(),be(")"),Ve(!1),e=!0,g=n),"finally"===f.id?(be("finally"),void Ve(!1)):(e||le("Expected '{a}' and instead saw '{b}'.",f,"catch",f.value),this)}),Le("while",function(){var e=f;return t["(breakage)"]+=1,t["(loopage)"]+=1,be("("),xe(this,e),ye(),me(20),"="===f.id&&(h.boss||se("Expected a conditional expression and instead saw an assignment."),be("="),me(20)),be(")",e),ye(v,w),Ve(!0,!0),t["(breakage)"]-=1,t["(loopage)"]-=1,this}).labelled=!0,Le("with",function(){var e=f;return y["use strict"]?le("'with' is not allowed in strict mode.",w):h.withstmt||se("Don't use 'with'.",w),be("("),xe(this,e),ye(),me(0),be(")",e),ye(v,w),Ve(!0,!0),this}),Le("switch",function(){var e=f,n=!1;for(t["(breakage)"]+=1,be("("),xe(this,e),ye(),this.condition=me(20),be(")",e),ye(v,w),xe(w,f),e=f,be("{"),xe(w,f),s+=h.indent,this.cases=[];;)switch(f.id){case"case":switch(t["(verb)"]){case"break":case"case":case"continue":case"return":case"switch":case"throw":break;default:O.test(l[f.line-2])||se("Expected a 'break' statement before 'case'.",w)}ke(-h.indent),be("case"),this.cases.push(me(20)),n=!0,be(":"),t["(verb)"]="case";break;case"default":switch(t["(verb)"]){case"break":case"continue":case"return":case"throw":break;default:O.test(l[f.line-2])||se("Expected a 'break' statement before 'default'.",w)}ke(-h.indent),be("default"),n=!0,be(":");break;case"}":return s-=h.indent,ke(),be("}",e),1!==this.cases.length&&"true"!==this.condition.id&&"false"!==this.condition.id||h.onecase||se("This 'switch' should be an 'if'.",this),t["(breakage)"]-=1,void(t["(verb)"]=void 0);case"(end)":return void le("Missing '{a}'.",f,"}");default:if(n)switch(w.id){case",":return void le("Each value should have its own case label.");case":":n=!1,ze();break;default:return void le("Missing ':' on a case clause.",w)}else{if(":"!==w.id)return void le("Expected '{a}' and instead saw '{b}'.",f,"case",f.value);be(":"),le("Unexpected '{a}'.",w,":"),ze()}}}).labelled=!0,Se("debugger",function(){return h.debug||se("All 'debugger' statements should be removed."),this}).exps=!0,(Ke=Se("do",function(){t["(breakage)"]+=1,t["(loopage)"]+=1,this.first=Ve(!0),be("while");var e=f;return xe(w,e),be("("),ye(),me(20),"="===f.id&&(h.boss||se("Expected a conditional expression and instead saw an assignment."),be("="),me(20)),be(")",e),ye(v,w),t["(breakage)"]-=1,t["(loopage)"]-=1,this})).labelled=!0,Ke.exps=!0,Le("for",function(){var e,n=f;if(t["(breakage)"]+=1,t["(loopage)"]+=1,be("("),xe(this,n),ye(),"in"===he("var"===f.id?1:0).id){if("var"===f.id)be("var"),Ye.fud.call(Ye,!0);else{switch(t[f.value]){case"unused":t[f.value]="var";break;case"var":break;default:se("Bad for in variable '{a}'.",f,f.value)}be()}return be("in"),me(20),be(")",n),e=Ve(!0,!0),h.forin&&e&&(e.length>1||"object"!=typeof e[0]||"if"!==e[0].value)&&se("The body of a for in should be wrapped in an if statement to filter unwanted properties from the prototype.",this),t["(breakage)"]-=1,t["(loopage)"]-=1,this}if(";"!==f.id)if("var"===f.id)be("var"),Ye.fud.call(Ye);else for(;me(0,"for"),","===f.id;)Te();if(Ee(w),be(";"),";"!==f.id&&(me(20),"="===f.id&&(h.boss||se("Expected a conditional expression and instead saw an assignment."),be("="),me(20))),Ee(w),be(";"),";"===f.id&&le("Expected '{a}' and instead saw '{b}'.",f,")",";"),")"!==f.id)for(;me(0,"for"),","===f.id;)Te();return be(")",n),ye(v,w),Ve(!0,!0),t["(breakage)"]-=1,t["(loopage)"]-=1,this}).labelled=!0,Se("break",function(){var e=f.value;return 0===t["(breakage)"]&&se("Unexpected '{a}'.",f,this.value),h.asi||Ee(this),";"!==f.id&&w.line===f.line&&("label"!==t[e]?se("'{a}' is not a statement label.",f,e):g[e]!==t&&se("'{a}' is out of scope.",f,e),this.first=f,be()),Pe("break"),this}).exps=!0,Se("continue",function(){var e=f.value;return 0===t["(breakage)"]&&se("Unexpected '{a}'.",f,this.value),h.asi||Ee(this),";"!==f.id?w.line===f.line&&("label"!==t[e]?se("'{a}' is not a statement label.",f,e):g[e]!==t&&se("'{a}' is out of scope.",f,e),this.first=f,be()):t["(loopage)"]||se("Unexpected '{a}'.",f,this.value),Pe("continue"),this}).exps=!0,Se("return",function(){return this.line===f.line?("(regexp)"===f.id&&se("Wrap the /regexp/ literal in parens to disambiguate the slash operator."),";"===f.id||f.reach||(xe(w,f),"="!==he().value||h.boss||oe("Did you mean to return a conditional instead of an assignment?",w.line,w.character+1),this.first=me(0))):h.asi||Ee(this),Pe("return"),this}).exps=!0,Se("throw",function(){return Ee(this),xe(w,f),this.first=me(20),Pe("throw"),this}).exps=!0,Oe("class"),Oe("const"),Oe("enum"),Oe("export"),Oe("extends"),Oe("import"),Oe("super"),Oe("let"),Oe("yield"),Oe("implements"),Oe("interface"),Oe("package"),Oe("private"),Oe("protected"),Oe("public"),Oe("static");var et=function(e,l,p){var E,A,M,S,L,H={};if(JSHINT.errors=[],JSHINT.undefs=[],ne(b=Object.create(Z),p||{}),l){if(E=l.predef)if(Array.isArray(E))for(A=0;A<E.length;A+=1)b[E[A]]=!0;else if("object"==typeof E)for(M=Object.keys(E),A=0;A<M.length;A+=1)b[M[A]]=!!E[M[A]];for(L=Object.keys(l),S=0;S<L.length;S++)H[L[S]]=l[L[S]]}for((h=H).indent=h.indent||4,h.maxerr=h.maxerr||50,x="",A=0;A<h.indent;A+=1)x+=" ";s=1,a=Object.create(b),n=[t={"(global)":!0,"(name)":"(global)","(scope)":g=a,"(breakage)":0,"(loopage)":0}],k=[],null,u={},d=null,i={},r=!1,c=[],o=!1,T=0,de.init(e),m=!0,y={},v=w=f=Q["(begin)"];for(var j in l)ee(l,j)&&te(j,w);ae(),ne(b,p||{}),Te.first=!0;try{switch(be(),f.id){case"{":case"[":h.laxbreak=!0,o=!0,function e(){switch(f.id){case"{":!function(){var t={},n=f;if(be("{"),"}"!==f.id)for(;;){if("(end)"===f.id)le("Missing '}' to match '{' from line {a}.",f,n.line);else{if("}"===f.id){se("Unexpected comma.",w);break}","===f.id?le("Unexpected comma.",f):"(string)"!==f.id&&se("Expected a string and instead saw {a}.",f,f.value)}if(!0===t[f.value]?se("Duplicate key '{a}'.",f,f.value):"__proto__"===f.value&&!h.proto||"__iterator__"===f.value&&!h.iterator?se("The '{a}' key may produce unexpected results.",f,f.value):t[f.value]=!0,be(),be(":"),e(),","!==f.id)break;be(",")}be("}")}();break;case"[":!function(){var t=f;if(be("["),"]"!==f.id)for(;;){if("(end)"===f.id)le("Missing ']' to match '[' from line {a}.",f,t.line);else{if("]"===f.id){se("Unexpected comma.",w);break}","===f.id&&le("Unexpected comma.",f)}if(e(),","!==f.id)break;be(",")}be("]")}();break;case"true":case"false":case"null":case"(number)":case"(string)":be();break;case"-":be("-"),w.character!==f.from&&se("Unexpected space after '-'.",w),ve(w,f),be("(number)");break;default:le("Expected a JSON value.",f)}}();break;default:Xe(),y["use strict"]&&!h.globalstrict&&se('Use the function form of "use strict".',v),ze()}be("(end)");var U=function(e,t){do{if("string"==typeof t[e])return"unused"===t[e]?t[e]="var":"unction"===t[e]&&(t[e]="closure"),!0;t=t["(context)"]}while(t);return!1},O=function(e,t){if(i[e]){for(var n=[],a=0;a<i[e].length;a+=1)i[e][a]!==t&&n.push(i[e][a]);0===n.length?delete i[e]:i[e]=n}};for(A=0;A<JSHINT.undefs.length;A+=1)U((M=JSHINT.undefs[A].slice(0))[2].value,M[0])?O(M[2].value,M[2].line):se.apply(se,M.slice(1))}catch(e){if(e){var I=f||{};JSHINT.errors.push({raw:e.raw,reason:e.message,line:e.line||I.line,character:e.character||I.from},null)}}return 0===JSHINT.errors.length};return et.data=function(){var e,t,a,r,s,l,c,d={functions:[],options:h},f=[],p=[];et.errors.length&&(d.errors=et.errors),o&&(d.json=!0);for(l in i)ee(i,l)&&f.push({name:l,line:i[l]});for(f.length>0&&(d.implieds=f),k.length>0&&(d.urls=k),(t=Object.keys(g)).length>0&&(d.globals=t),r=1;r<n.length;r+=1){for(a=n[r],e={},s=0;s<P.length;s+=1)e[P[s]]=[];for(l in a)ee(a,l)&&"("!==l.charAt(0)&&("unction"===(c=a[l])&&(c="unused"),Array.isArray(e[c])&&(e[c].push(l),"unused"===c&&p.push({name:l,line:a["(line)"],function:a["(name)"]})));for(s=0;s<P.length;s+=1)0===e[P[s]].length&&delete e[P[s]];e.name=a["(name)"],e.param=a["(params)"],e.line=a["(line)"],e.last=a["(last)"],d.functions.push(e)}p.length>0&&(d.unused=p);for(l in u)if("number"==typeof u[l]){d.member=u;break}return d},et.report=function(e){var t,n,a,i,r,s,o,l,c,u=et.data(),d=[],f="",p=[];function h(e,t){var n,a,i;if(t){for(p.push("<div><i>"+e+"</i> "),t=t.sort(),a=0;a<t.length;a+=1)t[a]!==i&&(i=t[a],p.push((n?", ":"")+i),n=!0);p.push("</div>")}}if(u.errors||u.implieds||u.unused){if(a=!0,p.push("<div id=errors><i>Error:</i>"),u.errors)for(r=0;r<u.errors.length;r+=1)(t=u.errors[r])&&(n=t.evidence||"",p.push("<p>Problem"+(isFinite(t.line)?" at line "+t.line+" character "+t.character:"")+": "+t.reason.entityify()+"</p><p class=evidence>"+(n&&(n.length>80?n.slice(0,77)+"...":n).entityify())+"</p>"));if(u.implieds){for(c=[],r=0;r<u.implieds.length;r+=1)c[r]="<code>"+u.implieds[r].name+"</code>&nbsp;<i>"+u.implieds[r].line+"</i>";p.push("<p><i>Implied global:</i> "+c.join(", ")+"</p>")}if(u.unused){for(c=[],r=0;r<u.unused.length;r+=1)c[r]="<code><u>"+u.unused[r].name+"</u></code>&nbsp;<i>"+u.unused[r].line+"</i> <code>"+u.unused[r].function+"</code>";p.push("<p><i>Unused variable:</i> "+c.join(", ")+"</p>")}u.json&&p.push("<p>JSON: bad.</p>"),p.push("</div>")}if(!e){for(p.push("<br><div id=functions>"),u.urls&&h("URLs<br>",u.urls),u.json&&!a?p.push("<p>JSON: good.</p>"):u.globals?p.push("<div><i>Global</i> "+u.globals.sort().join(", ")+"</div>"):p.push("<div><i>No new global variables introduced.</i></div>"),r=0;r<u.functions.length;r+=1)i=u.functions[r],p.push("<br><div class=function><i>"+i.line+"-"+i.last+"</i> "+(i.name||"")+"("+(i.param?i.param.join(", "):"")+")</div>"),h("<big><b>Unused</b></big>",i.unused),h("Closure",i.closure),h("Variable",i.var),h("Exception",i.exception),h("Outer",i.outer),h("Global",i.global),h("Label",i.label);if(u.member){if((d=Object.keys(u.member)).length){for(d=d.sort(),f="<br><pre id=members>/*members ",o=10,r=0;r<d.length;r+=1)o+(l=(s=d[r]).name()).length>72&&(p.push(f+"<br>"),f="    ",o=1),o+=l.length+2,1===u.member[s]&&(l="<i>"+l+"</i>"),r<d.length-1&&(l+=", "),f+=l;p.push(f+"<br>*/</pre>")}p.push("</div>")}}return p.join("")},et.jshint=et,et}();"object"==typeof exports&&exports&&(exports.JSHINT=JSHINT);

var jsonlint=function(){var t={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,i,n,s,r,h){var l=r.length-1;switch(s){case 1:this.$=t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(t);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=r[l-1];case 13:this.$={};break;case 14:this.$=r[l-1];break;case 15:this.$=[r[l-2],r[l]];break;case 16:this.$={},this.$[r[l][0]]=r[l][1];break;case 17:this.$=r[l-2],r[l-2][r[l][0]]=r[l][1];break;case 18:this.$=[];break;case 19:this.$=r[l-1];break;case 20:this.$=[r[l]];break;case 21:this.$=r[l-2],r[l-2].push(r[l])}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(t,e){throw new Error(t)},parse:function(t){var e=this,i=[0],n=[null],s=[],r=this.table,h="",l=0,o=0,a=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;function u(){var t;return"number"!=typeof(t=e.lexer.lex()||1)&&(t=e.symbols_[t]||t),t}s.push(c),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var y,p,f,g,m,d,x,_,b,E,S={};;){if(f=i[i.length-1],this.defaultActions[f]?g=this.defaultActions[f]:(null==y&&(y=u()),g=r[f]&&r[f][y]),void 0===g||!g.length||!g[0]){if(!a){b=[];for(d in r[f])this.terminals_[d]&&d>2&&b.push("'"+this.terminals_[d]+"'");var k="";k=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+b.join(", ")+", got '"+this.terminals_[y]+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[y]||y,line:this.lexer.yylineno,loc:c,expected:b})}if(3==a){if(1==y)throw new Error(k||"Parsing halted.");o=this.lexer.yyleng,h=this.lexer.yytext,l=this.lexer.yylineno,c=this.lexer.yylloc,y=u()}for(;!(2..toString()in r[f]);){if(0==f)throw new Error(k||"Parsing halted.");E=1,i.length=i.length-2*E,n.length=n.length-E,s.length=s.length-E,f=i[i.length-1]}p=y,y=2,g=r[f=i[i.length-1]]&&r[f][2],a=3}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+y);switch(g[0]){case 1:i.push(y),n.push(this.lexer.yytext),s.push(this.lexer.yylloc),i.push(g[1]),y=null,p?(y=p,p=null):(o=this.lexer.yyleng,h=this.lexer.yytext,l=this.lexer.yylineno,c=this.lexer.yylloc,a>0&&a--);break;case 2:if(x=this.productions_[g[1]][1],S.$=n[n.length-x],S._$={first_line:s[s.length-(x||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(x||1)].first_column,last_column:s[s.length-1].last_column},void 0!==(m=this.performAction.call(S,h,o,l,this.yy,g[1],n,s)))return m;x&&(i=i.slice(0,-1*x*2),n=n.slice(0,-1*x),s=s.slice(0,-1*x)),i.push(this.productions_[g[1]][0]),n.push(S.$),s.push(S._$),_=r[i[i.length-2]][i[i.length-1]],i.push(_);break;case 3:return!0}}return!0}},e={EOF:1,parseError:function(t,e){if(!this.yy.parseError)throw new Error(t);this.yy.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.match+=t,this.matched+=t,t.match(/\n/)&&this.yylineno++,this._input=this._input.slice(1),t},unput:function(t){return this._input=t+this._input,this},more:function(){return this._more=!0,this},less:function(t){this._input=this.match.slice(t)+this._input},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var t,e,i,n,s;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),h=0;h<r.length&&(!(i=this._input.match(this.rules[r[h]]))||e&&!(i[0].length>e[0].length)||(e=i,n=h,this.options.flex));h++);return e?((s=e[0].match(/\n.*/g))&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-1:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,r[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:void this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,e,i,n){switch(i){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return t.lexer=e,t}();"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.parser=jsonlint,exports.parse=function(){return jsonlint.parse.apply(jsonlint,arguments)},exports.main=function(t){if(!t[1])throw new Error("Usage: "+t[0]+" FILE");if("undefined"!=typeof process)var e=require("fs").readFileSync(require("path").join(process.cwd(),t[1]),"utf8");else e=require("file").path(require("file").cwd()).join(t[1]).read({charset:"utf-8"});return exports.parser.parse(e)},"undefined"!=typeof module&&require.main===module&&exports.main("undefined"!=typeof process?process.argv.slice(1):require("system").args));

!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";var e="CodeMirror-lint-markers";function n(t){t.parentNode&&t.parentNode.removeChild(t)}function o(e,o,r){var i=function(e,n){var o=document.createElement("div");function r(e){if(!o.parentNode)return t.off(document,"mousemove",r);o.style.top=Math.max(0,e.clientY-o.offsetHeight-5)+"px",o.style.left=e.clientX+5+"px"}return o.className="CodeMirror-lint-tooltip",o.appendChild(n.cloneNode(!0)),document.body.appendChild(o),t.on(document,"mousemove",r),r(e),null!=o.style.opacity&&(o.style.opacity=1),o}(e,o);function a(){var e;t.off(r,"mouseout",a),i&&((e=i).parentNode&&(null==e.style.opacity&&n(e),e.style.opacity=0,setTimeout(function(){n(e)},600)),i=null)}var l=setInterval(function(){if(i)for(var t=r;;t=t.parentNode){if(t==document.body)return;if(!t){a();break}}if(!i)return clearInterval(l)},400);t.on(r,"mouseout",a)}function r(t,e,n){this.marked=[],this.options=e,this.timeout=null,this.hasGutter=n,this.onMouseOver=function(e){!function(t,e){var n=e.target||e.srcElement;if(!/\bCodeMirror-lint-mark-/.test(n.className))return;for(var r=n.getBoundingClientRect(),i=(r.left+r.right)/2,a=(r.top+r.bottom)/2,s=t.findMarksAt(t.coordsChar({left:i,top:a},"client")),u=0;u<s.length;++u){var c=s[u].__annotation;if(c)return f=c,d=e,void 0,m=d.target||d.srcElement,void o(d,l(f),m)}var f,d,m}(t,e)}}function i(t){var n=t.state.lint;n.hasGutter&&t.clearGutter(e);for(var o=0;o<n.marked.length;++o)n.marked[o].clear();n.marked.length=0}function a(e,n,r,i){var a=document.createElement("div"),l=a;return a.className="CodeMirror-lint-marker-"+n,r&&((l=a.appendChild(document.createElement("div"))).className="CodeMirror-lint-marker-multiple"),0!=i&&t.on(l,"mouseover",function(t){o(t,e,l)}),a}function l(t){var e=t.severity;e||(e="error");var n=document.createElement("div");return n.className="CodeMirror-lint-message-"+e,n.appendChild(document.createTextNode(t.message)),n}function s(t){var e=t.state.lint.options,n=e.options||e;e.async?e.getAnnotations(t.getValue(),u,n,t):u(t,e.getAnnotations(t.getValue(),n,t))}function u(t,n){i(t);for(var o,r=t.state.lint,s=r.options,u=function(t){for(var e=[],n=0;n<t.length;++n){var o=t[n],r=o.from.line;(e[r]||(e[r]=[])).push(o)}return e}(n),c=0;c<u.length;++c){var f=u[c];if(f){for(var d=null,m=r.hasGutter&&document.createDocumentFragment(),p=0;p<f.length;++p){var v=f[p],g=v.severity;g||(g="error"),d="error"==(o=d)?o:g,s.formatAnnotation&&(v=s.formatAnnotation(v)),r.hasGutter&&m.appendChild(l(v)),v.to&&r.marked.push(t.markText(v.from,v.to,{className:"CodeMirror-lint-mark-"+g,__annotation:v}))}r.hasGutter&&t.setGutterMarker(c,e,a(m,d,f.length>1,r.options.tooltips))}}s.onUpdateLinting&&s.onUpdateLinting(n,u,t)}function c(t){var e=t.state.lint;clearTimeout(e.timeout),e.timeout=setTimeout(function(){s(t)},e.options.delay||500)}t.defineOption("lint",!1,function(n,o,a){if(a&&a!=t.Init&&(i(n),n.off("change",c),t.off(n.getWrapperElement(),"mouseover",n.state.lint.onMouseOver),delete n.state.lint),o){for(var l=n.getOption("gutters"),u=!1,f=0;f<l.length;++f)l[f]==e&&(u=!0);var d=n.state.lint=new r(n,function(e,n){if(n instanceof Function)return{getAnnotations:n};if(n&&!0!==n||(n={}),n.getAnnotations||(n.getAnnotations=e.getHelper(t.Pos(0,0),"lint")),!n.getAnnotations)throw new Error("Required option 'getAnnotations' missing (lint addon)");return n}(n,o),u);n.on("change",c),0!=d.options.tooltips&&t.on(n.getWrapperElement(),"mouseover",d.onMouseOver),s(n)}})});

!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var r=["Dangerous comment"],n=[["Expected '{'","Statement body should be inside '{ }' braces."]],i=["Missing semicolon","Extra comma","Missing property name","Unmatched "," and instead saw"," is not defined","Unclosed string","Stopping, unable to continue"];function t(e){return o(e,n,"warning",!0),o(e,i,"error"),function(e){for(var n=e.description,i=0;i<r.length;i++)if(-1!==n.indexOf(r[i]))return!0;return!1}(e)?null:e}function o(e,r,n,i){var t,o,a,c,s;t=e.description;for(var f=0;f<r.length;f++)a="string"==typeof(o=r[f])?o:o[0],c="string"==typeof o?null:o[1],s=-1!==t.indexOf(a),(i||s)&&(e.severity=n),s&&c&&(e.description=c)}e.registerHelper("lint","javascript",function(r,n){if(!window.JSHINT)return[];JSHINT(r,n);var i=JSHINT.data().errors,o=[];return i&&function(r,n){for(var i=0;i<r.length;i++){var o=r[i];if(o){var a,c;if(a=[],o.evidence){var s=a[o.line];if(!s){var f=o.evidence;s=[],Array.prototype.forEach.call(f,function(e,r){"\t"===e&&s.push(r+1)}),a[o.line]=s}if(s.length>0){var d=o.character;s.forEach(function(e){d>e&&(d-=1)}),o.character=d}}var u=o.character-1,l=u+1;o.evidence&&(c=o.evidence.substring(u).search(/.\b/))>-1&&(l+=c),o.description=o.reason,o.start=o.character,o.end=l,(o=t(o))&&n.push({message:o.description,severity:o.severity,from:e.Pos(o.line-1,u),to:e.Pos(o.line-1,l)})}}}(i,o),o})});